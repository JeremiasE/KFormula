<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>KD Chart 2: KDChartAttributesModel.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.6 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>KDChartAttributesModel.cpp</h1><a href="_k_d_chart_attributes_model_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">/* -*- Mode: C++ -*-</span>
00002 <span class="comment">   KDChart - a multi-platform charting engine</span>
00003 <span class="comment">   */</span>
00004 
00005 <span class="comment">/****************************************************************************</span>
00006 <span class="comment"> ** Copyright (C) 2001-2006 Klaraelvdalens Datakonsult AB.  All rights reserved.</span>
00007 <span class="comment"> **</span>
00008 <span class="comment"> ** This file is part of the KD Chart library.</span>
00009 <span class="comment"> **</span>
00010 <span class="comment"> ** This file may be distributed and/or modified under the terms of the</span>
00011 <span class="comment"> ** GNU General Public License version 2 as published by the Free Software</span>
00012 <span class="comment"> ** Foundation and appearing in the file LICENSE.GPL included in the</span>
00013 <span class="comment"> ** packaging of this file.</span>
00014 <span class="comment"> **</span>
00015 <span class="comment"> ** Licensees holding valid commercial KD Chart licenses may use this file in</span>
00016 <span class="comment"> ** accordance with the KD Chart Commercial License Agreement provided with</span>
00017 <span class="comment"> ** the Software.</span>
00018 <span class="comment"> **</span>
00019 <span class="comment"> ** This file is provided AS IS with NO WARRANTY OF ANY KIND, INCLUDING THE</span>
00020 <span class="comment"> ** WARRANTY OF DESIGN, MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.</span>
00021 <span class="comment"> **</span>
00022 <span class="comment"> ** See http://www.kdab.net/kdchart for</span>
00023 <span class="comment"> **   information about KD Chart Commercial License Agreements.</span>
00024 <span class="comment"> **</span>
00025 <span class="comment"> ** Contact info@kdab.net if any conditions of this</span>
00026 <span class="comment"> ** licensing are not clear to you.</span>
00027 <span class="comment"> **</span>
00028 <span class="comment"> **********************************************************************/</span>
00029 <span class="preprocessor">#include &lt;QDebug&gt;</span>
00030 <span class="preprocessor">#include &lt;QPen&gt;</span>
00031 <span class="preprocessor">#include &lt;QPointer&gt;</span>
00032 
00033 <span class="preprocessor">#include "<a class="code" href="_k_d_chart_attributes_model_8h.html">KDChartAttributesModel.h</a>"</span>
00034 <span class="preprocessor">#include "<a class="code" href="_k_d_chart_palette_8h.html">KDChartPalette.h</a>"</span>
00035 <span class="preprocessor">#include "<a class="code" href="_k_d_chart_global_8h.html">KDChartGlobal.h</a>"</span>
00036 
00037 <span class="preprocessor">#include &lt;KDChartTextAttributes&gt;</span>
00038 <span class="preprocessor">#include &lt;KDChartFrameAttributes&gt;</span>
00039 <span class="preprocessor">#include &lt;KDChartBackgroundAttributes&gt;</span>
00040 <span class="preprocessor">#include &lt;KDChartDataValueAttributes&gt;</span>
00041 <span class="preprocessor">#include &lt;KDChartMarkerAttributes&gt;</span>
00042 <span class="preprocessor">#include &lt;KDChartBarAttributes&gt;</span>
00043 <span class="preprocessor">#include &lt;KDChartLineAttributes&gt;</span>
00044 <span class="preprocessor">#include &lt;KDChartPieAttributes&gt;</span>
00045 <span class="preprocessor">#include &lt;KDChartAbstractThreeDAttributes&gt;</span>
00046 <span class="preprocessor">#include &lt;KDChartThreeDBarAttributes&gt;</span>
00047 <span class="preprocessor">#include &lt;KDChartThreeDLineAttributes&gt;</span>
00048 <span class="preprocessor">#include &lt;KDChartThreeDPieAttributes&gt;</span>
00049 <span class="preprocessor">#include &lt;KDChartGridAttributes&gt;</span>
00050 
00051 <span class="preprocessor">#include &lt;KDABLibFakes&gt;</span>
00052 
00053 
00054 <span class="keyword">using</span> <span class="keyword">namespace </span>KDChart;
00055 
<a name="l00056"></a><a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_attributes_modela0">00056</a> <a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_attributes_modela0">AttributesModel::AttributesModel</a>( QAbstractItemModel* model, <a class="code" href="class_q_object.html">QObject</a> * parent<span class="comment">/* = 0 */</span> )
00057   : <a class="code" href="class_k_d_chart_1_1_abstract_proxy_model.html">AbstractProxyModel</a>( parent ),
00058     mPaletteType( PaletteTypeDefault )
00059 {
00060   <a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela23">setSourceModel</a>(model);
00061 }
00062 
<a name="l00063"></a><a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_attributes_modela24">00063</a> <a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_attributes_modela24">AttributesModel::~AttributesModel</a>()
00064 {
00065 }
00066 
<a name="l00067"></a><a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela8">00067</a> <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela8">AttributesModel::initFrom</a>( <span class="keyword">const</span> <a class="code" href="class_k_d_chart_1_1_attributes_model.html">AttributesModel</a>* other )
00068 {
00069     <span class="keywordflow">if</span>( other == <span class="keyword">this</span> || ! other ) <span class="keywordflow">return</span>;
00070 
00071     mDataMap = other-&gt;<a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_attributes_modelr0">mDataMap</a>;
00072     mHorizontalHeaderDataMap = other-&gt;<a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_attributes_modelr1">mHorizontalHeaderDataMap</a>;
00073     mVerticalHeaderDataMap = other-&gt;<a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_attributes_modelr4">mVerticalHeaderDataMap</a>;
00074     mModelDataMap = other-&gt;<a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_attributes_modelr2">mModelDataMap</a>;
00075 
00076     <a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela22">setPaletteType</a>( other-&gt;<a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela13">paletteType</a>() );
00077 }
00078 
<a name="l00079"></a><a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela1">00079</a> <span class="keywordtype">bool</span> <a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela1">AttributesModel::compare</a>( <span class="keyword">const</span> <a class="code" href="class_k_d_chart_1_1_attributes_model.html">AttributesModel</a>* other )<span class="keyword">const</span>
00080 {
00081     <span class="keywordflow">if</span>( other == <span class="keyword">this</span> ) <span class="keywordflow">return</span> <span class="keyword">true</span>;
00082     <span class="keywordflow">if</span>( ! other ){
00083         <span class="comment">//qDebug() &lt;&lt; "AttributesModel::compare() cannot compare to Null pointer";</span>
00084         <span class="keywordflow">return</span> <span class="keyword">false</span>;
00085     }
00086 
00087     {
00088         <span class="keywordflow">if</span> (mDataMap.count() != other-&gt;mDataMap.count()){
00089             <span class="comment">//qDebug() &lt;&lt; "AttributesModel::compare() dataMap have different sizes";</span>
00090             <span class="keywordflow">return</span> <span class="keyword">false</span>;
00091         }
00092         QMap&lt;int, QMap&lt;int, QMap&lt;int, QVariant&gt; &gt; &gt;::const_iterator itA = mDataMap.constBegin();
00093         QMap&lt;int, QMap&lt;int, QMap&lt;int, QVariant&gt; &gt; &gt;::const_iterator itB = other-&gt;mDataMap.constBegin();
00094         <span class="keywordflow">while</span> (itA != mDataMap.constEnd()) {
00095             <span class="keywordflow">if</span> ((*itA).count() != (*itB).count()){
00096                 <span class="comment">//qDebug() &lt;&lt; "AttributesModel::compare() dataMap/map have different sizes";</span>
00097                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
00098             }
00099             QMap&lt;int, QMap&lt;int, QVariant&gt; &gt;::const_iterator it2A = (*itA).constBegin();
00100             QMap&lt;int, QMap&lt;int, QVariant&gt; &gt;::const_iterator it2B = (*itB).constBegin();
00101             <span class="keywordflow">while</span> (it2A != itA-&gt;constEnd()) {
00102                 <span class="keywordflow">if</span> ((*it2A).count() != (*it2B).count()){
00103                     <span class="comment">//qDebug() &lt;&lt; "AttributesModel::compare() dataMap/map/map have different sizes:"</span>
00104                     <span class="comment">//        &lt;&lt; (*it2A).count() &lt;&lt; (*it2B).count();</span>
00105                     <span class="keywordflow">return</span> <span class="keyword">false</span>;
00106                 }
00107                 QMap&lt;int, QVariant&gt;::const_iterator it3A = (*it2A).constBegin();
00108                 QMap&lt;int, QVariant&gt;::const_iterator it3B = (*it2B).constBegin();
00109                 <span class="keywordflow">while</span> (it3A != it2A-&gt;constEnd()) {
00110                     <span class="keywordflow">if</span> ( it3A.key() != it3B.key() ){
00111                         <span class="comment">//qDebug( "AttributesModel::compare()\n"</span>
00112                         <span class="comment">//        "   dataMap[%i, %i] values have different types.  A: %x  B: %x",</span>
00113                         <span class="comment">//        itA.key(), it2A.key(), it3A.key(), it3B.key());</span>
00114                         <span class="keywordflow">return</span> <span class="keyword">false</span>;
00115                     }
00116                     <span class="keywordflow">if</span> ( ! compareAttributes( it3A.key(), it3A.value(), it3B.value() ) ){
00117                         <span class="comment">//qDebug( "AttributesModel::compare()\n"</span>
00118                         <span class="comment">//        "   dataMap[%i, %i] values are different. Role: %x", itA.key(), it2A.key(), it3A.key());</span>
00119                         <span class="keywordflow">return</span> <span class="keyword">false</span>;
00120                     }
00121                     ++it3A;
00122                     ++it3B;
00123                 }
00124                 ++it2A;
00125                 ++it2B;
00126             }
00127             ++itA;
00128             ++itB;
00129         }
00130     }
00131     {
00132         <span class="keywordflow">if</span> (mHorizontalHeaderDataMap.count() != other-&gt;mHorizontalHeaderDataMap.count()){
00133             <span class="comment">//qDebug() &lt;&lt; "AttributesModel::compare() horizontalHeaderDataMap have different sizes";</span>
00134             <span class="keywordflow">return</span> <span class="keyword">false</span>;
00135         }
00136         QMap&lt;int, QMap&lt;int, QVariant&gt; &gt;::const_iterator itA = mHorizontalHeaderDataMap.constBegin();
00137         QMap&lt;int, QMap&lt;int, QVariant&gt; &gt;::const_iterator itB = other-&gt;mHorizontalHeaderDataMap.constBegin();
00138         <span class="keywordflow">while</span> (itA != mHorizontalHeaderDataMap.constEnd()) {
00139             <span class="keywordflow">if</span> ((*itA).count() != (*itB).count()){
00140                 <span class="comment">//qDebug() &lt;&lt; "AttributesModel::compare() horizontalHeaderDataMap/map have different sizes";</span>
00141                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
00142             }
00143             QMap&lt;int, QVariant&gt;::const_iterator it2A = (*itA).constBegin();
00144             QMap&lt;int, QVariant&gt;::const_iterator it2B = (*itB).constBegin();
00145             <span class="keywordflow">while</span> (it2A != itA-&gt;constEnd()) {
00146                 <span class="keywordflow">if</span> ( it2A.key() != it2B.key() ){
00147                     <span class="comment">//qDebug( "AttributesModel::compare()\n"</span>
00148                     <span class="comment">//        "   horizontalHeaderDataMap[ %i ] values have different types.  A: %x  B: %x",</span>
00149                     <span class="comment">//        itA.key(), it2A.key(), it2B.key());</span>
00150                     <span class="keywordflow">return</span> <span class="keyword">false</span>;
00151                 }
00152                 <span class="keywordflow">if</span> ( ! compareAttributes( it2A.key(), it2A.value(), it2B.value() ) ){
00153                     <span class="comment">//qDebug( "AttributesModel::compare()\n"</span>
00154                     <span class="comment">//        "   horizontalHeaderDataMap[ %i ] values are different. Role: %x", itA.key(), it2A.key() );</span>
00155                     <span class="keywordflow">return</span> <span class="keyword">false</span>;
00156                 }
00157                 ++it2A;
00158                 ++it2B;
00159             }
00160             ++itA;
00161             ++itB;
00162         }
00163     }
00164     {
00165         <span class="keywordflow">if</span> (mVerticalHeaderDataMap.count() != other-&gt;mVerticalHeaderDataMap.count()){
00166             <span class="comment">//qDebug() &lt;&lt; "AttributesModel::compare() verticalHeaderDataMap have different sizes";</span>
00167             <span class="keywordflow">return</span> <span class="keyword">false</span>;
00168         }
00169         QMap&lt;int, QMap&lt;int, QVariant&gt; &gt;::const_iterator itA = mVerticalHeaderDataMap.constBegin();
00170         QMap&lt;int, QMap&lt;int, QVariant&gt; &gt;::const_iterator itB = other-&gt;mVerticalHeaderDataMap.constBegin();
00171         <span class="keywordflow">while</span> (itA != mVerticalHeaderDataMap.constEnd()) {
00172             <span class="keywordflow">if</span> ((*itA).count() != (*itB).count()){
00173                 <span class="comment">//qDebug() &lt;&lt; "AttributesModel::compare() verticalHeaderDataMap/map have different sizes";</span>
00174                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
00175             }
00176             QMap&lt;int, QVariant&gt;::const_iterator it2A = (*itA).constBegin();
00177             QMap&lt;int, QVariant&gt;::const_iterator it2B = (*itB).constBegin();
00178             <span class="keywordflow">while</span> (it2A != itA-&gt;constEnd()) {
00179                 <span class="keywordflow">if</span> ( it2A.key() != it2B.key() ){
00180                     <span class="comment">//qDebug( "AttributesModel::compare()\n"</span>
00181                     <span class="comment">//        "   verticalHeaderDataMap[ %i ] values have different types.  A: %x  B: %x",</span>
00182                     <span class="comment">//        itA.key(), it2A.key(), it2B.key());</span>
00183                     <span class="keywordflow">return</span> <span class="keyword">false</span>;
00184                 }
00185                 <span class="keywordflow">if</span> ( ! compareAttributes( it2A.key(), it2A.value(), it2B.value() ) ){
00186                     <span class="comment">//qDebug( "AttributesModel::compare()\n"</span>
00187                     <span class="comment">//        "   verticalHeaderDataMap[ %i ] values are different. Role: %x", itA.key(), it2A.key() );</span>
00188                     <span class="keywordflow">return</span> <span class="keyword">false</span>;
00189                 }
00190                 ++it2A;
00191                 ++it2B;
00192             }
00193             ++itA;
00194             ++itB;
00195         }
00196     }
00197     {
00198         <span class="keywordflow">if</span> (mModelDataMap.count() != other-&gt;mModelDataMap.count()){
00199             <span class="comment">//qDebug() &lt;&lt; "AttributesModel::compare() modelDataMap have different sizes:" &lt;&lt; mModelDataMap.count() &lt;&lt; other-&gt;mModelDataMap.count();</span>
00200             <span class="keywordflow">return</span> <span class="keyword">false</span>;
00201         }
00202         QMap&lt;int, QVariant&gt;::const_iterator itA = mModelDataMap.constBegin();
00203         QMap&lt;int, QVariant&gt;::const_iterator itB = other-&gt;mModelDataMap.constBegin();
00204         <span class="keywordflow">while</span> (itA != mModelDataMap.constEnd()) {
00205             <span class="keywordflow">if</span> ( itA.key() != itB.key() ){
00206                 <span class="comment">//qDebug( "AttributesModel::compare()\n"</span>
00207                 <span class="comment">//        "   modelDataMap values have different types.  A: %x  B: %x",</span>
00208                 <span class="comment">//        itA.key(), itB.key());</span>
00209                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
00210             }
00211             <span class="keywordflow">if</span> ( ! compareAttributes( itA.key(), itA.value(), itB.value() ) ){
00212                 <span class="comment">//qDebug( "AttributesModel::compare()\n"</span>
00213                 <span class="comment">//        "   modelDataMap values are different. Role: %x", itA.key() );</span>
00214                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
00215             }
00216             ++itA;
00217             ++itB;
00218         }
00219     }
00220     <span class="keywordflow">if</span> (paletteType() != other-&gt;paletteType()){
00221         <span class="comment">//qDebug() &lt;&lt; "AttributesModel::compare() palette types are different";</span>
00222         <span class="keywordflow">return</span> <span class="keyword">false</span>;
00223     }
00224     <span class="keywordflow">return</span> <span class="keyword">true</span>;
00225 }
00226 
<a name="l00227"></a><a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela2">00227</a> <span class="keywordtype">bool</span> <a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela2">AttributesModel::compareAttributes</a>(
00228         <span class="keywordtype">int</span> role, <span class="keyword">const</span> QVariant&amp; a, <span class="keyword">const</span> QVariant&amp; b )<span class="keyword">const</span>
00229 {
00230     <span class="keywordflow">if</span>( isKnownAttributesRole( role ) ){
00231         <span class="keywordflow">switch</span>( role ) {
00232             <span class="keywordflow">case</span> <a class="code" href="namespace_k_d_chart.html#a21a10">DataValueLabelAttributesRole</a>:
00233                 <span class="keywordflow">return</span> (qVariantValue&lt;DataValueAttributes&gt;( a ) ==
00234                         qVariantValue&lt;DataValueAttributes&gt;( b ));
00235             <span class="keywordflow">case</span> <a class="code" href="namespace_k_d_chart.html#a21a9">DatasetBrushRole</a>:
00236                 <span class="keywordflow">return</span> (qVariantValue&lt;QBrush&gt;( a ) ==
00237                         qVariantValue&lt;QBrush&gt;( b ));
00238             <span class="keywordflow">case</span> <a class="code" href="namespace_k_d_chart.html#a21a8">DatasetPenRole</a>:
00239                 <span class="keywordflow">return</span> (qVariantValue&lt;QPen&gt;( a ) ==
00240                         qVariantValue&lt;QPen&gt;( b ));
00241             <span class="keywordflow">case</span> <a class="code" href="namespace_k_d_chart.html#a21a11">ThreeDAttributesRole</a>:
00242                 <span class="comment">// As of yet there is no ThreeDAttributes class,</span>
00243                 <span class="comment">// and the AbstractThreeDAttributes class is pure virtual,</span>
00244                 <span class="comment">// so we ignore this role for now.</span>
00245                 <span class="comment">// (khz, 04.04.2007)</span>
00246                 <span class="comment">/*</span>
00247 <span class="comment">                return (qVariantValue&lt;ThreeDAttributes&gt;( a ) ==</span>
00248 <span class="comment">                        qVariantValue&lt;ThreeDAttributes&gt;( b ));</span>
00249 <span class="comment">                */</span>
00250                 <span class="keywordflow">break</span>;
00251             <span class="keywordflow">case</span> <a class="code" href="namespace_k_d_chart.html#a21a12">LineAttributesRole</a>:
00252                 <span class="keywordflow">return</span> (qVariantValue&lt;LineAttributes&gt;( a ) ==
00253                         qVariantValue&lt;LineAttributes&gt;( b ));
00254             <span class="keywordflow">case</span> <a class="code" href="namespace_k_d_chart.html#a21a13">ThreeDLineAttributesRole</a>:
00255                 <span class="keywordflow">return</span> (qVariantValue&lt;ThreeDLineAttributes&gt;( a ) ==
00256                         qVariantValue&lt;ThreeDLineAttributes&gt;( b ));
00257             <span class="keywordflow">case</span> <a class="code" href="namespace_k_d_chart.html#a21a14">BarAttributesRole</a>:
00258                 <span class="keywordflow">return</span> (qVariantValue&lt;BarAttributes&gt;( a ) ==
00259                         qVariantValue&lt;BarAttributes&gt;( b ));
00260             <span class="keywordflow">case</span> <a class="code" href="namespace_k_d_chart.html#a21a15">ThreeDBarAttributesRole</a>:
00261                 <span class="keywordflow">return</span> (qVariantValue&lt;ThreeDBarAttributes&gt;( a ) ==
00262                         qVariantValue&lt;ThreeDBarAttributes&gt;( b ));
00263             <span class="keywordflow">case</span> <a class="code" href="namespace_k_d_chart.html#a21a16">PieAttributesRole</a>:
00264                 <span class="keywordflow">return</span> (qVariantValue&lt;PieAttributes&gt;( a ) ==
00265                         qVariantValue&lt;PieAttributes&gt;( b ));
00266             <span class="keywordflow">case</span> <a class="code" href="namespace_k_d_chart.html#a21a17">ThreeDPieAttributesRole</a>:
00267                 <span class="keywordflow">return</span> (qVariantValue&lt;ThreeDPieAttributes&gt;( a ) ==
00268                         qVariantValue&lt;ThreeDPieAttributes&gt;( b ));
00269             <span class="keywordflow">case</span> <a class="code" href="namespace_k_d_chart.html#a21a18">DataHiddenRole</a>:
00270                 <span class="keywordflow">return</span> (qVariantValue&lt;bool&gt;( a ) ==
00271                         qVariantValue&lt;bool&gt;( b ));
00272             <span class="keywordflow">default</span>:
00273                 Q_ASSERT( <span class="keyword">false</span> ); <span class="comment">// all of our own roles need to be handled</span>
00274                 <span class="keywordflow">break</span>;
00275         }
00276     }<span class="keywordflow">else</span>{
00277         <span class="keywordflow">return</span> (a == b);
00278     }
00279     <span class="keywordflow">return</span> <span class="keyword">true</span>;
00280 }
00281 
00282 
<a name="l00283"></a><a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela6">00283</a> QVariant <a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela6">AttributesModel::headerData</a> ( <span class="keywordtype">int</span> section,
00284                                        Qt::Orientation orientation,
00285                                        <span class="keywordtype">int</span> role<span class="comment">/* = Qt::DisplayRole */</span> )<span class="keyword"> const</span>
00286 <span class="keyword"></span>{
00287   QVariant sourceData = sourceModel()-&gt;headerData( section, orientation, role );
00288   <span class="keywordflow">if</span> ( sourceData.isValid() ) <span class="keywordflow">return</span> sourceData;
00289   <span class="comment">// the source model didn't have data set, let's use our stored values</span>
00290   <span class="keyword">const</span> QMap&lt;int, QMap&lt;int, QVariant&gt; &gt;&amp; map = orientation == Qt::Horizontal ? mHorizontalHeaderDataMap : mVerticalHeaderDataMap;
00291   <span class="keywordflow">if</span> ( map.contains( section ) ) {
00292       <span class="keyword">const</span> QMap&lt;int, QVariant&gt; &amp;<a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modelb0">dataMap</a> = map[ section ];
00293       <span class="keywordflow">if</span> ( dataMap.contains( role ) ) {
00294           <span class="keywordflow">return</span> dataMap[ role ];
00295       }
00296   }
00297 
00298   <span class="comment">// Default values if nothing else matches</span>
00299   <span class="keywordflow">switch</span> ( role ) {
00300   <span class="keywordflow">case</span> Qt::DisplayRole:
00301       <span class="keywordflow">return</span> QLatin1String( orientation == Qt::Vertical ?  <span class="stringliteral">"Series "</span> : <span class="stringliteral">"Item "</span> ) + QString::number( section ) ;
00302 
00303   <span class="keywordflow">case</span> KDChart::DatasetBrushRole: {
00304       <span class="keywordflow">if</span> ( <a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela13">paletteType</a>() == <a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modelw0_k_d_chart_1_1_private_attributes_modelw3">PaletteTypeSubdued</a> )
00305           <span class="keywordflow">return</span> <a class="code" href="class_k_d_chart_1_1_palette.html#_k_d_chart_1_1_palettee2">Palette::subduedPalette</a>().<a class="code" href="class_k_d_chart_1_1_palette.html#_k_d_chart_1_1_palettea1">getBrush</a>( section );
00306       <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( <a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela13">paletteType</a>() == <a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modelw0_k_d_chart_1_1_private_attributes_modelw2">PaletteTypeRainbow</a> )
00307           <span class="keywordflow">return</span> <a class="code" href="class_k_d_chart_1_1_palette.html#_k_d_chart_1_1_palettee1">Palette::rainbowPalette</a>().<a class="code" href="class_k_d_chart_1_1_palette.html#_k_d_chart_1_1_palettea1">getBrush</a>( section );
00308       <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( <a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela13">paletteType</a>() == <a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modelw0_k_d_chart_1_1_private_attributes_modelw1">PaletteTypeDefault</a> )
00309           <span class="keywordflow">return</span> <a class="code" href="class_k_d_chart_1_1_palette.html#_k_d_chart_1_1_palettee0">Palette::defaultPalette</a>().<a class="code" href="class_k_d_chart_1_1_palette.html#_k_d_chart_1_1_palettea1">getBrush</a>( section );
00310       <span class="keywordflow">else</span>
00311           qWarning(<span class="stringliteral">"Unknown type of fallback palette!"</span>);
00312   }
00313   <span class="keywordflow">case</span> KDChart::DatasetPenRole: {
00314       <span class="comment">// default to the color set for the brush (or it's defaults)</span>
00315       <span class="comment">// but only if no per model override was set</span>
00316       <span class="keywordflow">if</span> ( !<a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela12">modelData</a>( role ).isValid() ) {
00317           QBrush brush = qVariantValue&lt;QBrush&gt;( <a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela6">headerData</a>( section, orientation, <a class="code" href="namespace_k_d_chart.html#a21a9">DatasetBrushRole</a> ) );
00318           <span class="keywordflow">return</span> QPen( brush.color() );
00319       }
00320   }
00321   <span class="keywordflow">default</span>:
00322       <span class="keywordflow">break</span>;
00323   }
00324 
00325   <span class="keywordflow">return</span> QVariant();
00326 }
00327 
00328 
00329 <span class="comment">// Note: Our users NEED this method - even if</span>
00330 <span class="comment">//       we do not need it at drawing time!</span>
00331 <span class="comment">//       (khz, 2006-07-28)</span>
<a name="l00332"></a><a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela5">00332</a> QVariant <a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela5">AttributesModel::data</a>( <span class="keywordtype">int</span> role )<span class="keyword"> const</span>
00333 <span class="keyword"></span>{
00334   <span class="keywordflow">if</span> ( <a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela9">isKnownAttributesRole</a>( role ) ) {
00335       <span class="comment">// check if there is something set at global level</span>
00336       QVariant v = <a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela12">modelData</a>( role );
00337 
00338       <span class="comment">// else return the default setting, if any</span>
00339       <span class="keywordflow">if</span> ( !v.isValid() )
00340           v = defaultsForRole( role );
00341       <span class="keywordflow">return</span> v;
00342   }
00343   <span class="keywordflow">return</span> QVariant();
00344 }
00345 
00346 
00347 <span class="comment">// Note: Our users NEED this method - even if</span>
00348 <span class="comment">//       we do not need it at drawing time!</span>
00349 <span class="comment">//       (khz, 2006-07-28)</span>
<a name="l00350"></a><a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela4">00350</a> QVariant <a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela5">AttributesModel::data</a>( <span class="keywordtype">int</span> column, <span class="keywordtype">int</span> role )<span class="keyword"> const</span>
00351 <span class="keyword"></span>{
00352   <span class="keywordflow">if</span> ( <a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela9">isKnownAttributesRole</a>( role ) ) {
00353       <span class="comment">// check if there is something set for the column (dataset)</span>
00354       QVariant v;
00355       v = <a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela6">headerData</a>( column, Qt::Vertical, role );
00356 
00357       <span class="comment">// check if there is something set at global level</span>
00358       <span class="keywordflow">if</span> ( !v.isValid() )
00359           v = <a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela5">data</a>( role ); <span class="comment">// includes automatic fallback to default</span>
00360       <span class="keywordflow">return</span> v;
00361   }
00362   <span class="keywordflow">return</span> QVariant();
00363 }
00364 
00365 
<a name="l00366"></a><a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela3">00366</a> QVariant <a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela5">AttributesModel::data</a>( <span class="keyword">const</span> QModelIndex&amp; index, <span class="keywordtype">int</span> role )<span class="keyword"> const</span>
00367 <span class="keyword"></span>{
00368   <span class="comment">//qDebug() &lt;&lt; "AttributesModel::data(" &lt;&lt; index &lt;&lt; role &lt;&lt; ")";</span>
00369   <span class="keywordflow">if</span>( index.isValid() ) {
00370     Q_ASSERT( index.model() == <span class="keyword">this</span> );
00371   }
00372   QVariant sourceData = sourceModel()-&gt;data( <a class="code" href="class_k_d_chart_1_1_abstract_proxy_model.html#_k_d_chart_1_1_private_attributes_modela11">mapToSource</a>(index), role );
00373   <span class="keywordflow">if</span> ( sourceData.isValid() )
00374       <span class="keywordflow">return</span> sourceData;
00375 
00376   <span class="comment">// check if we are storing a value for this role at this cell index</span>
00377   <span class="keywordflow">if</span> ( mDataMap.contains( index.column() ) ) {
00378       <span class="keyword">const</span> QMap&lt; int,  QMap&lt; int, QVariant&gt; &gt; &amp;colDataMap = mDataMap[ index.column() ];
00379       <span class="keywordflow">if</span> ( colDataMap.contains( index.row() ) ) {
00380           <span class="keyword">const</span> QMap&lt;int, QVariant&gt; &amp;<a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modelb0">dataMap</a> = colDataMap[ index.row() ];
00381           <span class="keywordflow">if</span> ( dataMap.contains( role ) ) {
00382               QVariant v = dataMap[ role ];
00383               <span class="keywordflow">if</span>( v.isValid() )
00384                   <span class="keywordflow">return</span> dataMap[ role ];
00385           }
00386       }
00387   }
00388   <span class="comment">// check if there is something set for the column (dataset), or at global level</span>
00389   <span class="keywordflow">if</span>( index.isValid() )
00390       <span class="keywordflow">return</span> <a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela5">data</a>( index.column(), role ); <span class="comment">// includes automatic fallback to default</span>
00391 
00392   <span class="keywordflow">return</span> QVariant();
00393 }
00394 
00395 
<a name="l00396"></a><a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela9">00396</a> <span class="keywordtype">bool</span> <a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela9">AttributesModel::isKnownAttributesRole</a>( <span class="keywordtype">int</span> role )<span class="keyword"> const</span>
00397 <span class="keyword"></span>{
00398     <span class="keywordtype">bool</span> oneOfOurs = <span class="keyword">false</span>;
00399     <span class="keywordflow">switch</span>( role ) {
00400       <span class="comment">// fallthrough intended</span>
00401       <span class="keywordflow">case</span> <a class="code" href="namespace_k_d_chart.html#a21a10">DataValueLabelAttributesRole</a>:
00402       <span class="keywordflow">case</span> <a class="code" href="namespace_k_d_chart.html#a21a9">DatasetBrushRole</a>:
00403       <span class="keywordflow">case</span> <a class="code" href="namespace_k_d_chart.html#a21a8">DatasetPenRole</a>:
00404       <span class="keywordflow">case</span> <a class="code" href="namespace_k_d_chart.html#a21a11">ThreeDAttributesRole</a>:
00405       <span class="keywordflow">case</span> <a class="code" href="namespace_k_d_chart.html#a21a12">LineAttributesRole</a>:
00406       <span class="keywordflow">case</span> <a class="code" href="namespace_k_d_chart.html#a21a13">ThreeDLineAttributesRole</a>:
00407       <span class="keywordflow">case</span> <a class="code" href="namespace_k_d_chart.html#a21a14">BarAttributesRole</a>:
00408       <span class="keywordflow">case</span> <a class="code" href="namespace_k_d_chart.html#a21a15">ThreeDBarAttributesRole</a>:
00409       <span class="keywordflow">case</span> <a class="code" href="namespace_k_d_chart.html#a21a16">PieAttributesRole</a>:
00410       <span class="keywordflow">case</span> <a class="code" href="namespace_k_d_chart.html#a21a17">ThreeDPieAttributesRole</a>:
00411       <span class="keywordflow">case</span> <a class="code" href="namespace_k_d_chart.html#a21a18">DataHiddenRole</a>:
00412             oneOfOurs = <span class="keyword">true</span>;
00413         <span class="keywordflow">default</span>:
00414         <span class="keywordflow">break</span>;
00415     }
00416     <span class="keywordflow">return</span> oneOfOurs;
00417 }
00418 
00419 QVariant AttributesModel::defaultsForRole( <span class="keywordtype">int</span> role )<span class="keyword"> const</span>
00420 <span class="keyword"></span>{
00421     <span class="keywordflow">switch</span> ( role ) {
00422         <span class="keywordflow">case</span> KDChart::DataValueLabelAttributesRole:
00423             <span class="keywordflow">return</span> <a class="code" href="class_k_d_chart_1_1_data_value_attributes.html#_k_d_chart_1_1_data_value_attributese1">DataValueAttributes::defaultAttributesAsVariant</a>();
00424             <span class="comment">// for the below there isn't a per-value default, since there's a per-column one</span>
00425         <span class="keywordflow">case</span> KDChart::DatasetBrushRole:
00426         <span class="keywordflow">case</span> KDChart::DatasetPenRole:
00427         <span class="keywordflow">default</span>:
00428             <span class="keywordflow">break</span>;
00429     }
00430     <span class="keywordflow">return</span> QVariant();
00431 }
00432 
<a name="l00433"></a><a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela19">00433</a> <span class="keywordtype">bool</span> <a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela19">AttributesModel::setData</a> ( <span class="keyword">const</span> QModelIndex &amp; index, <span class="keyword">const</span> QVariant &amp; value, <span class="keywordtype">int</span> role )
00434 {
00435     <span class="keywordflow">if</span> ( !<a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela9">isKnownAttributesRole</a>( role ) ) {
00436         <span class="keywordflow">return</span> sourceModel()-&gt;setData( <a class="code" href="class_k_d_chart_1_1_abstract_proxy_model.html#_k_d_chart_1_1_private_attributes_modela11">mapToSource</a>(index), value, role );
00437     } <span class="keywordflow">else</span> {
00438         QMap&lt; int,  QMap&lt; int, QVariant&gt; &gt; &amp;colDataMap = mDataMap[ index.column() ];
00439         QMap&lt;int, QVariant&gt; &amp;<a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modelb0">dataMap</a> = colDataMap[ index.row() ];
00440         <span class="comment">//qDebug() &lt;&lt;  "AttributesModel::setData" &lt;&lt;"role" &lt;&lt; role &lt;&lt; "value" &lt;&lt; value;</span>
00441         dataMap.insert( role, value );
00442         emit attributesChanged( index, index );
00443         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00444     }
00445 }
00446 
<a name="l00447"></a><a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela16">00447</a> <span class="keywordtype">bool</span> <a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela16">AttributesModel::resetData</a> ( <span class="keyword">const</span> QModelIndex &amp; index, <span class="keywordtype">int</span> role )
00448 {
00449     <span class="keywordflow">return</span> <a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela19">setData</a> ( index, QVariant(), role );
00450 }
00451 
<a name="l00452"></a><a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela20">00452</a> <span class="keywordtype">bool</span> <a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela20">AttributesModel::setHeaderData</a> ( <span class="keywordtype">int</span> section, Qt::Orientation orientation,
00453                                       <span class="keyword">const</span> QVariant &amp; value, <span class="keywordtype">int</span> role )
00454 {
00455     <span class="keywordflow">if</span> ( !<a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela9">isKnownAttributesRole</a>( role ) ) {
00456         <span class="keywordflow">return</span> sourceModel()-&gt;setHeaderData( section, orientation, value, role );
00457     } <span class="keywordflow">else</span> {
00458         QMap&lt;int,  QMap&lt;int, QVariant&gt; &gt; &amp;sectionDataMap
00459             = orientation == Qt::Horizontal ? mHorizontalHeaderDataMap : mVerticalHeaderDataMap;
00460         QMap&lt;int, QVariant&gt; &amp;<a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modelb0">dataMap</a> = sectionDataMap[ section ];
00461         dataMap.insert( role, value );
00462         emit attributesChanged( <a class="code" href="class_k_d_chart_1_1_abstract_proxy_model.html#_k_d_chart_1_1_private_attributes_modela7">index</a>( 0, section, QModelIndex() ),
00463                                 <a class="code" href="class_k_d_chart_1_1_abstract_proxy_model.html#_k_d_chart_1_1_private_attributes_modela7">index</a>( <a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela18">rowCount</a>( QModelIndex() ), section, QModelIndex() ) );
00464         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00465     }
00466 }
00467 
<a name="l00468"></a><a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela17">00468</a> <span class="keywordtype">bool</span> <a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela17">AttributesModel::resetHeaderData</a> ( <span class="keywordtype">int</span> section, Qt::Orientation orientation, <span class="keywordtype">int</span> role )
00469 {
00470     <span class="keywordflow">return</span> <a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela20">setHeaderData</a> ( section, orientation, QVariant(), role );
00471 }
00472 
<a name="l00473"></a><a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela22">00473</a> <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela22">AttributesModel::setPaletteType</a>( AttributesModel::PaletteType type )
00474 {
00475     mPaletteType = type;
00476 }
00477 
<a name="l00478"></a><a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela13">00478</a> AttributesModel::PaletteType <a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela13">AttributesModel::paletteType</a>()<span class="keyword"> const</span>
00479 <span class="keyword"></span>{
00480     <span class="keywordflow">return</span> mPaletteType;
00481 }
00482 
<a name="l00483"></a><a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela21">00483</a> <span class="keywordtype">bool</span> <a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela21">KDChart::AttributesModel::setModelData</a>( <span class="keyword">const</span> QVariant value, <span class="keywordtype">int</span> role )
00484 {
00485     mModelDataMap.insert( role, value );
00486     emit attributesChanged( <a class="code" href="class_k_d_chart_1_1_abstract_proxy_model.html#_k_d_chart_1_1_private_attributes_modela7">index</a>( 0, 0, QModelIndex() ),
00487                             <a class="code" href="class_k_d_chart_1_1_abstract_proxy_model.html#_k_d_chart_1_1_private_attributes_modela7">index</a>( <a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela18">rowCount</a>( QModelIndex() ),
00488                                     <a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela0">columnCount</a>( QModelIndex() ), QModelIndex() ) );
00489     <span class="keywordflow">return</span> <span class="keyword">true</span>;
00490 }
00491 
<a name="l00492"></a><a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela12">00492</a> QVariant <a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela12">KDChart::AttributesModel::modelData</a>( <span class="keywordtype">int</span> role )<span class="keyword"> const</span>
00493 <span class="keyword"></span>{
00494     <span class="keywordflow">return</span> mModelDataMap.value( role, QVariant() );
00495 }
00496 
<a name="l00497"></a><a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela18">00497</a> <span class="keywordtype">int</span> <a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela18">AttributesModel::rowCount</a>( <span class="keyword">const</span> QModelIndex&amp; index )<span class="keyword"> const</span>
00498 <span class="keyword"></span>{
00499     Q_ASSERT(sourceModel());
00500     <span class="keywordflow">return</span> sourceModel()-&gt;rowCount( <a class="code" href="class_k_d_chart_1_1_abstract_proxy_model.html#_k_d_chart_1_1_private_attributes_modela11">mapToSource</a>(index) );
00501 }
00502 
<a name="l00503"></a><a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela0">00503</a> <span class="keywordtype">int</span> <a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela0">AttributesModel::columnCount</a>( <span class="keyword">const</span> QModelIndex&amp; index )<span class="keyword"> const</span>
00504 <span class="keyword"></span>{
00505     Q_ASSERT(sourceModel());
00506     <span class="keywordflow">return</span> sourceModel()-&gt;columnCount( <a class="code" href="class_k_d_chart_1_1_abstract_proxy_model.html#_k_d_chart_1_1_private_attributes_modela11">mapToSource</a>(index) );
00507 }
00508 
<a name="l00509"></a><a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela23">00509</a> <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela23">AttributesModel::setSourceModel</a>( QAbstractItemModel* sourceModel )
00510 {
00511     <span class="keywordflow">if</span>( this-&gt;sourceModel() != 0 )
00512         disconnect( this-&gt;sourceModel(), SIGNAL( dataChanged( <span class="keyword">const</span> QModelIndex&amp;, <span class="keyword">const</span> QModelIndex&amp;)),
00513                                   <span class="keyword">this</span>, SIGNAL( dataChanged( <span class="keyword">const</span> QModelIndex&amp;, <span class="keyword">const</span> QModelIndex&amp;)));
00514     QAbstractProxyModel::setSourceModel( sourceModel );
00515     <span class="keywordflow">if</span>( this-&gt;sourceModel() != NULL )
00516         connect( this-&gt;sourceModel(), SIGNAL( dataChanged( <span class="keyword">const</span> QModelIndex&amp;, <span class="keyword">const</span> QModelIndex&amp;)),
00517                                 <span class="keyword">this</span>, SIGNAL( dataChanged( <span class="keyword">const</span> QModelIndex&amp;, <span class="keyword">const</span> QModelIndex&amp;)));
00518 }
00519 
<a name="l00521"></a><a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modelb0">00521</a> <span class="keyword">const</span> QMap&lt;int, QMap&lt;int, QMap&lt;int, QVariant&gt; &gt; &gt; <a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modelb0">AttributesModel::dataMap</a>()<span class="keyword">const</span>
00522 {
00523     <span class="keywordflow">return</span> mDataMap;
00524 }
<a name="l00526"></a><a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modelb1">00526</a> <span class="keyword">const</span> QMap&lt;int, QMap&lt;int, QVariant&gt; &gt; <a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modelb1">AttributesModel::horizontalHeaderDataMap</a>()<span class="keyword">const</span>
00527 {
00528     <span class="keywordflow">return</span> mHorizontalHeaderDataMap;
00529 }
<a name="l00531"></a><a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modelb7">00531</a> <span class="keyword">const</span> QMap&lt;int, QMap&lt;int, QVariant&gt; &gt; <a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modelb7">AttributesModel::verticalHeaderDataMap</a>()<span class="keyword">const</span>
00532 {
00533     <span class="keywordflow">return</span> mVerticalHeaderDataMap;
00534 }
<a name="l00536"></a><a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modelb2">00536</a> <span class="keyword">const</span> QMap&lt;int, QVariant&gt; <a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modelb2">AttributesModel::modelDataMap</a>()<span class="keyword">const</span>
00537 {
00538     <span class="keywordflow">return</span> mModelDataMap;
00539 }
00540 
<a name="l00542"></a><a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modelb3">00542</a> <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modelb3">AttributesModel::setDataMap</a>( <span class="keyword">const</span> QMap&lt;<span class="keywordtype">int</span>, QMap&lt;<span class="keywordtype">int</span>, QMap&lt;int, QVariant&gt; &gt; &gt; map )
00543 {
00544     mDataMap = map;
00545 }
<a name="l00547"></a><a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modelb4">00547</a> <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modelb4">AttributesModel::setHorizontalHeaderDataMap</a>( <span class="keyword">const</span> QMap&lt;<span class="keywordtype">int</span>, QMap&lt;int, QVariant&gt; &gt; map )
00548 {
00549     mHorizontalHeaderDataMap = map;
00550 }
<a name="l00552"></a><a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modelb6">00552</a> <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modelb6">AttributesModel::setVerticalHeaderDataMap</a>( <span class="keyword">const</span> QMap&lt;<span class="keywordtype">int</span>, QMap&lt;int, QVariant&gt; &gt; map )
00553 {
00554     mVerticalHeaderDataMap = map;
00555 }
<a name="l00557"></a><a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modelb5">00557</a> <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modelb5">AttributesModel::setModelDataMap</a>( <span class="keyword">const</span> QMap&lt;int, QVariant&gt; map )
00558 {
00559     mModelDataMap = map;
00560 }
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Thu May 10 11:06:24 2007 for KD Chart 2 by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > </a>1.3.6 </small></address>
</body>
</html>

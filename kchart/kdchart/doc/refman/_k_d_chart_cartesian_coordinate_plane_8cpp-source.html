<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>KD Chart 2: KDChartCartesianCoordinatePlane.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.1 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li><a href="classes.html"><span>Classes</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
  </ul></div>
<div class="nav">
<a class="el" href="dir_c4e2aed91326a361eee69bb54811986e.html">src</a></div>
<h1>KDChartCartesianCoordinatePlane.cpp</h1><a href="_k_d_chart_cartesian_coordinate_plane_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/****************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment"> ** Copyright (C) 2007 Klaralvdalens Datakonsult AB.  All rights reserved.</span>
<a name="l00003"></a>00003 <span class="comment"> **</span>
<a name="l00004"></a>00004 <span class="comment"> ** This file is part of the KD Chart library.</span>
<a name="l00005"></a>00005 <span class="comment"> **</span>
<a name="l00006"></a>00006 <span class="comment"> ** This file may be distributed and/or modified under the terms of the</span>
<a name="l00007"></a>00007 <span class="comment"> ** GNU General Public License version 2 as published by the Free Software</span>
<a name="l00008"></a>00008 <span class="comment"> ** Foundation and appearing in the file LICENSE.GPL included in the</span>
<a name="l00009"></a>00009 <span class="comment"> ** packaging of this file.</span>
<a name="l00010"></a>00010 <span class="comment"> **</span>
<a name="l00011"></a>00011 <span class="comment"> ** Licensees holding valid commercial KD Chart licenses may use this file in</span>
<a name="l00012"></a>00012 <span class="comment"> ** accordance with the KD Chart Commercial License Agreement provided with</span>
<a name="l00013"></a>00013 <span class="comment"> ** the Software.</span>
<a name="l00014"></a>00014 <span class="comment"> **</span>
<a name="l00015"></a>00015 <span class="comment"> ** This file is provided AS IS with NO WARRANTY OF ANY KIND, INCLUDING THE</span>
<a name="l00016"></a>00016 <span class="comment"> ** WARRANTY OF DESIGN, MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.</span>
<a name="l00017"></a>00017 <span class="comment"> **</span>
<a name="l00018"></a>00018 <span class="comment"> ** See http://www.kdab.net/kdchart for</span>
<a name="l00019"></a>00019 <span class="comment"> **   information about KDChart Commercial License Agreements.</span>
<a name="l00020"></a>00020 <span class="comment"> **</span>
<a name="l00021"></a>00021 <span class="comment"> ** Contact info@kdab.net if any conditions of this</span>
<a name="l00022"></a>00022 <span class="comment"> ** licensing are not clear to you.</span>
<a name="l00023"></a>00023 <span class="comment"> **</span>
<a name="l00024"></a>00024 <span class="comment"> **********************************************************************/</span>
<a name="l00025"></a>00025 
<a name="l00026"></a>00026 <span class="preprocessor">#include &lt;QFont&gt;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &lt;QList&gt;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &lt;QtDebug&gt;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &lt;QPainter&gt;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &lt;QApplication&gt;</span>
<a name="l00031"></a>00031 
<a name="l00032"></a>00032 <span class="preprocessor">#include "<a class="code" href="_k_d_chart_abstract_diagram_8h.html">KDChartAbstractDiagram.h</a>"</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include "<a class="code" href="_k_d_chart_abstract_cartesian_diagram_8h.html">KDChartAbstractCartesianDiagram.h</a>"</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include "<a class="code" href="_k_d_chart_cartesian_coordinate_plane_8h.html">KDChartCartesianCoordinatePlane.h</a>"</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include "KDChartCartesianCoordinatePlane_p.h"</span>
<a name="l00036"></a>00036 <span class="preprocessor">#include "CartesianCoordinateTransformation.h"</span>
<a name="l00037"></a>00037 <span class="preprocessor">#include "<a class="code" href="_k_d_chart_grid_attributes_8h.html">KDChartGridAttributes.h</a>"</span>
<a name="l00038"></a>00038 <span class="preprocessor">#include "<a class="code" href="_k_d_chart_paint_context_8h.html">KDChartPaintContext.h</a>"</span>
<a name="l00039"></a>00039 <span class="preprocessor">#include "KDChartPainterSaver_p.h"</span>
<a name="l00040"></a>00040 
<a name="l00041"></a>00041 <span class="preprocessor">#include &lt;KDABLibFakes&gt;</span>
<a name="l00042"></a>00042 
<a name="l00043"></a>00043 
<a name="l00044"></a>00044 <span class="keyword">using namespace </span>KDChart;
<a name="l00045"></a>00045 
<a name="l00046"></a><a class="code" href="_k_d_chart_cartesian_coordinate_plane_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">00046</a> <span class="preprocessor">#define d d_func()</span>
<a name="l00047"></a>00047 <span class="preprocessor"></span>
<a name="l00048"></a>00048 CartesianCoordinatePlane::Private::Private()
<a name="l00049"></a>00049     : <a class="code" href="class_k_d_chart_1_1_abstract_coordinate_plane.html">AbstractCoordinatePlane</a>::Private()
<a name="l00050"></a>00050     , bPaintIsRunning( false )
<a name="l00051"></a>00051     , hasOwnGridAttributesHorizontal ( false )
<a name="l00052"></a>00052     , hasOwnGridAttributesVertical ( false )
<a name="l00053"></a>00053     <span class="comment">// old: , initialResizeEventReceived ( false )</span>
<a name="l00054"></a>00054     , isometricScaling ( false )
<a name="l00055"></a>00055     , horizontalMin(0)
<a name="l00056"></a>00056     , horizontalMax(0)
<a name="l00057"></a>00057     , verticalMin(0)
<a name="l00058"></a>00058     , verticalMax(0)
<a name="l00059"></a>00059     , autoAdjustHorizontalRangeToData(67)
<a name="l00060"></a>00060     , autoAdjustVerticalRangeToData(  67)
<a name="l00061"></a>00061     , autoAdjustGridToZoom( true )
<a name="l00062"></a>00062     , fixedDataCoordinateSpaceRelation( false )
<a name="l00063"></a>00063     , reverseVerticalPlane( false )
<a name="l00064"></a>00064     , reverseHorizontalPlane( false )
<a name="l00065"></a>00065 {
<a name="l00066"></a>00066 }
<a name="l00067"></a>00067 
<a name="l00068"></a><a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#4abe889d5d1dd57df5abd94cd4e8a3c4">00068</a> CartesianCoordinatePlane::CartesianCoordinatePlane ( <a class="code" href="class_k_d_chart_1_1_chart.html">Chart</a>* parent )
<a name="l00069"></a>00069     : <a class="code" href="class_k_d_chart_1_1_abstract_coordinate_plane.html">AbstractCoordinatePlane</a> ( new Private(), parent )
<a name="l00070"></a>00070 {
<a name="l00071"></a>00071     <span class="comment">// this bloc left empty intentionally</span>
<a name="l00072"></a>00072 }
<a name="l00073"></a>00073 
<a name="l00074"></a><a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#d13064e53faa3ab53eae07a1684091e2">00074</a> <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#d13064e53faa3ab53eae07a1684091e2">CartesianCoordinatePlane::~CartesianCoordinatePlane</a>()
<a name="l00075"></a>00075 {
<a name="l00076"></a>00076     <span class="comment">// this bloc left empty intentionally</span>
<a name="l00077"></a>00077 }
<a name="l00078"></a>00078 
<a name="l00079"></a>00079 <span class="keywordtype">void</span> CartesianCoordinatePlane::init()
<a name="l00080"></a>00080 {
<a name="l00081"></a>00081     <span class="comment">// this bloc left empty intentionally</span>
<a name="l00082"></a>00082 }
<a name="l00083"></a>00083 
<a name="l00084"></a>00084 
<a name="l00085"></a><a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#376d94271db1036387d5550e084e076c">00085</a> <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#376d94271db1036387d5550e084e076c">CartesianCoordinatePlane::addDiagram</a> ( <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html">AbstractDiagram</a>* diagram )
<a name="l00086"></a>00086 {
<a name="l00087"></a>00087     Q_ASSERT_X ( dynamic_cast&lt;AbstractCartesianDiagram*&gt; ( <a class="code" href="class_k_d_chart_1_1_abstract_coordinate_plane.html#d6097b44d17dc4bf8dbfd70d63147e8d">diagram</a> ),
<a name="l00088"></a>00088                  <span class="stringliteral">"CartesianCoordinatePlane::addDiagram"</span>, <span class="stringliteral">"Only cartesian "</span>
<a name="l00089"></a>00089                  <span class="stringliteral">"diagrams can be added to a cartesian coordinate plane!"</span> );
<a name="l00090"></a>00090     <a class="code" href="class_k_d_chart_1_1_abstract_coordinate_plane.html#9e3b4b16ab8a8c58d53a97184a60a236">AbstractCoordinatePlane::addDiagram</a> ( diagram );
<a name="l00091"></a>00091     connect ( diagram,  SIGNAL ( layoutChanged ( <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html">AbstractDiagram</a>* ) ),
<a name="l00092"></a>00092               SLOT ( <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#fe3572ebc9265125aa9386e7ab58beb3">slotLayoutChanged</a> ( AbstractDiagram* ) ) );
<a name="l00093"></a>00093 
<a name="l00094"></a>00094     connect( diagram, SIGNAL( <a class="code" href="class_k_d_chart_1_1_abstract_coordinate_plane.html#683824b7d35b89c35422a5bc1cf71c59">propertiesChanged</a>() ),<span class="keyword">this</span>, SIGNAL( <a class="code" href="class_k_d_chart_1_1_abstract_coordinate_plane.html#683824b7d35b89c35422a5bc1cf71c59">propertiesChanged</a>() ) );
<a name="l00095"></a>00095 }
<a name="l00096"></a>00096 
<a name="l00097"></a>00097 
<a name="l00098"></a><a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#9f8a6b522a3fa33670fea037b1b718fb">00098</a> <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#9f8a6b522a3fa33670fea037b1b718fb">CartesianCoordinatePlane::paint</a> ( QPainter* painter )
<a name="l00099"></a>00099 {
<a name="l00100"></a>00100     <span class="comment">// prevent recursive call:</span>
<a name="l00101"></a>00101     <span class="comment">//qDebug("attempt plane::paint()");</span>
<a name="l00102"></a>00102     <span class="keywordflow">if</span>( <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;bPaintIsRunning ){
<a name="l00103"></a>00103         <span class="keywordflow">return</span>;
<a name="l00104"></a>00104     }
<a name="l00105"></a>00105     <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;bPaintIsRunning = <span class="keyword">true</span>;
<a name="l00106"></a>00106 
<a name="l00107"></a>00107     <span class="comment">//qDebug() &lt;&lt; "start plane::paint()";</span>
<a name="l00108"></a>00108 
<a name="l00109"></a>00109     <a class="code" href="namespace_k_d_chart.html#acb8bf1cf1284b4b88d67dc9c9a89ff1">AbstractDiagramList</a> diags = <a class="code" href="class_k_d_chart_1_1_abstract_coordinate_plane.html#27da62e376612d64e5e5631512a4dd59">diagrams</a>();
<a name="l00110"></a>00110     <span class="keywordflow">if</span> ( !diags.isEmpty() )
<a name="l00111"></a>00111     {
<a name="l00112"></a>00112         <a class="code" href="class_k_d_chart_1_1_paint_context.html">PaintContext</a> ctx;
<a name="l00113"></a>00113         ctx.setPainter ( painter );
<a name="l00114"></a>00114         ctx.setCoordinatePlane ( <span class="keyword">this</span> );
<a name="l00115"></a>00115         <span class="keyword">const</span> QRectF drawArea( <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#57d31012ef9b7a882537b7762003b476">drawingArea</a>() );
<a name="l00116"></a>00116         ctx.setRectangle ( drawArea );
<a name="l00117"></a>00117 
<a name="l00118"></a>00118         <span class="comment">// enabling clipping so that we're not drawing outside</span>
<a name="l00119"></a>00119         PainterSaver painterSaver( painter );
<a name="l00120"></a>00120         QRect clipRect = drawArea.toRect().adjusted( -1, -1, 1, 1 );
<a name="l00121"></a>00121         QRegion clipRegion( clipRect );
<a name="l00122"></a>00122         painter-&gt;setClipRegion( clipRegion );
<a name="l00123"></a>00123 
<a name="l00124"></a>00124         <span class="comment">// paint the coordinate system rulers:</span>
<a name="l00125"></a>00125         <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;grid-&gt;drawGrid( &amp;ctx );
<a name="l00126"></a>00126 
<a name="l00127"></a>00127         <span class="comment">// paint the diagrams:</span>
<a name="l00128"></a>00128         <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; diags.size(); i++ )
<a name="l00129"></a>00129         {
<a name="l00130"></a>00130 <span class="comment">//qDebug("  start diags[i]-&gt;paint ( &amp;ctx );");</span>
<a name="l00131"></a>00131             PainterSaver diagramPainterSaver( painter );
<a name="l00132"></a>00132             diags[i]-&gt;paint ( &amp;ctx );
<a name="l00133"></a>00133 <span class="comment">//qDebug("  done: diags[i]-&gt;paint ( &amp;ctx );");</span>
<a name="l00134"></a>00134         }
<a name="l00135"></a>00135 
<a name="l00136"></a>00136         <span class="comment">//for debugging:</span>
<a name="l00137"></a>00137         <span class="comment">//    painter-&gt;drawRect( drawArea.adjusted(4,4,-4,-4) );</span>
<a name="l00138"></a>00138         <span class="comment">//    painter-&gt;drawRect( drawArea.adjusted(2,2,-2,-2) );</span>
<a name="l00139"></a>00139         <span class="comment">//    painter-&gt;drawRect( drawArea );</span>
<a name="l00140"></a>00140     }
<a name="l00141"></a>00141     <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;bPaintIsRunning = <span class="keyword">false</span>;
<a name="l00142"></a>00142     <span class="comment">//qDebug("done: plane::paint()");</span>
<a name="l00143"></a>00143 }
<a name="l00144"></a>00144 
<a name="l00145"></a>00145 
<a name="l00146"></a><a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#fe3572ebc9265125aa9386e7ab58beb3">00146</a> <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#fe3572ebc9265125aa9386e7ab58beb3">CartesianCoordinatePlane::slotLayoutChanged</a> ( <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html">AbstractDiagram</a>* )
<a name="l00147"></a>00147 {
<a name="l00148"></a>00148     <span class="comment">// old: if ( d-&gt;initialResizeEventReceived )</span>
<a name="l00149"></a>00149     <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#2f3481a044a90f98816af2167e1fce83">layoutDiagrams</a>();
<a name="l00150"></a>00150 }
<a name="l00151"></a>00151 
<a name="l00152"></a><a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#7fed7cd342eb40dd4be670313d68d8ab">00152</a> QRectF <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#7fed7cd342eb40dd4be670313d68d8ab">CartesianCoordinatePlane::getRawDataBoundingRectFromDiagrams</a>()<span class="keyword"> const</span>
<a name="l00153"></a>00153 <span class="keyword"></span>{
<a name="l00154"></a>00154     <span class="comment">// determine unit of the rectangles of all involved diagrams:</span>
<a name="l00155"></a>00155     qreal minX, maxX, minY, maxY;
<a name="l00156"></a>00156     <span class="keywordtype">bool</span> bStarting = <span class="keyword">true</span>;
<a name="l00157"></a>00157     Q_FOREACH( <span class="keyword">const</span> <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html">AbstractDiagram</a>* <a class="code" href="class_k_d_chart_1_1_abstract_coordinate_plane.html#d6097b44d17dc4bf8dbfd70d63147e8d">diagram</a>, <a class="code" href="class_k_d_chart_1_1_abstract_coordinate_plane.html#27da62e376612d64e5e5631512a4dd59">diagrams</a>() )
<a name="l00158"></a>00158     {
<a name="l00159"></a>00159         QPair&lt;QPointF, QPointF&gt; dataBoundariesPair = <a class="code" href="class_k_d_chart_1_1_abstract_coordinate_plane.html#d6097b44d17dc4bf8dbfd70d63147e8d">diagram</a>-&gt;<a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#66c06de0bc805f23a731b4af45dab84f">dataBoundaries</a>();
<a name="l00160"></a>00160         <span class="comment">//qDebug() &lt;&lt; "CartesianCoordinatePlane::getRawDataBoundingRectFromDiagrams()\ngets diagram-&gt;dataBoundaries: " &lt;&lt; dataBoundariesPair.first &lt;&lt; dataBoundariesPair.second;</span>
<a name="l00161"></a>00161         <span class="keywordflow">if</span> ( bStarting || dataBoundariesPair.first.x()  &lt; minX ) minX = dataBoundariesPair.first.x();
<a name="l00162"></a>00162         <span class="keywordflow">if</span> ( bStarting || dataBoundariesPair.first.y()  &lt; minY ) minY = dataBoundariesPair.first.y();
<a name="l00163"></a>00163         <span class="keywordflow">if</span> ( bStarting || dataBoundariesPair.second.x() &gt; maxX ) maxX = dataBoundariesPair.second.x();
<a name="l00164"></a>00164         <span class="keywordflow">if</span> ( bStarting || dataBoundariesPair.second.y() &gt; maxY ) maxY = dataBoundariesPair.second.y();
<a name="l00165"></a>00165         bStarting = <span class="keyword">false</span>;
<a name="l00166"></a>00166     }
<a name="l00167"></a>00167     <span class="comment">//qDebug() &lt;&lt; "CartesianCoordinatePlane::getRawDataBoundingRectFromDiagrams()\nreturns data boundaries: " &lt;&lt; QRectF( QPointF(minX, minY), QSizeF(maxX - minX, maxY - minY) );</span>
<a name="l00168"></a>00168     QRectF dataBoundingRect;
<a name="l00169"></a>00169     dataBoundingRect.setBottomLeft( QPointF(minX, minY) );
<a name="l00170"></a>00170     dataBoundingRect.setTopRight(   QPointF(maxX, maxY) );
<a name="l00171"></a>00171     <span class="keywordflow">return</span> dataBoundingRect;
<a name="l00172"></a>00172 }
<a name="l00173"></a>00173 
<a name="l00174"></a>00174 
<a name="l00175"></a><a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#17a4b9d1dc14d8735b468451c9c49751">00175</a> QRectF <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#17a4b9d1dc14d8735b468451c9c49751">CartesianCoordinatePlane::adjustedToMaxEmptyInnerPercentage</a>(
<a name="l00176"></a>00176         <span class="keyword">const</span> QRectF&amp; r, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> percentX, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> percentY )<span class="keyword"> const</span>
<a name="l00177"></a>00177 <span class="keyword"></span>{
<a name="l00178"></a>00178     QRectF erg( r );
<a name="l00179"></a>00179     <span class="keywordflow">if</span>( percentX &lt; 100 || percentX == 1000 ) {
<a name="l00180"></a>00180         <span class="keyword">const</span> <span class="keywordtype">bool</span> isPositive = (r.left() &gt;= 0);
<a name="l00181"></a>00181         <span class="keywordflow">if</span>( (r.right() &gt;= 0) == isPositive ){
<a name="l00182"></a>00182             <span class="keyword">const</span> qreal innerBound =
<a name="l00183"></a>00183                     isPositive ? qMin(r.left(), r.right()) : qMax(r.left(), r.right());
<a name="l00184"></a>00184             <span class="keyword">const</span> qreal outerBound =
<a name="l00185"></a>00185                     isPositive ? qMax(r.left(), r.right()) : qMin(r.left(), r.right());
<a name="l00186"></a>00186             <span class="keywordflow">if</span>( innerBound / outerBound * 100 &lt;= percentX )
<a name="l00187"></a>00187             {
<a name="l00188"></a>00188                 <span class="keywordflow">if</span>( isPositive )
<a name="l00189"></a>00189                     erg.setLeft( 0.0 );
<a name="l00190"></a>00190                 <span class="keywordflow">else</span>
<a name="l00191"></a>00191                     erg.setRight( 0.0 );
<a name="l00192"></a>00192             }
<a name="l00193"></a>00193         }
<a name="l00194"></a>00194     }
<a name="l00195"></a>00195     <span class="keywordflow">if</span>( percentY &lt; 100 || percentY == 1000 ) {
<a name="l00196"></a>00196         <span class="keyword">const</span> <span class="keywordtype">bool</span> isPositive = (r.bottom() &gt;= 0);
<a name="l00197"></a>00197         <span class="keywordflow">if</span>( (r.top() &gt;= 0) == isPositive ){
<a name="l00198"></a>00198             <span class="keyword">const</span> qreal innerBound =
<a name="l00199"></a>00199                     isPositive ? qMin(r.top(), r.bottom()) : qMax(r.top(), r.bottom());
<a name="l00200"></a>00200             <span class="keyword">const</span> qreal outerBound =
<a name="l00201"></a>00201                     isPositive ? qMax(r.top(), r.bottom()) : qMin(r.top(), r.bottom());
<a name="l00202"></a>00202             <span class="keywordflow">if</span>( innerBound / outerBound * 100 &lt;= percentY )
<a name="l00203"></a>00203             {
<a name="l00204"></a>00204                 <span class="keywordflow">if</span>( isPositive )
<a name="l00205"></a>00205                     erg.setBottom( 0.0 );
<a name="l00206"></a>00206                 <span class="keywordflow">else</span>
<a name="l00207"></a>00207                     erg.setTop( 0.0 );
<a name="l00208"></a>00208             }
<a name="l00209"></a>00209         }
<a name="l00210"></a>00210     }
<a name="l00211"></a>00211     <span class="keywordflow">return</span> erg;
<a name="l00212"></a>00212 }
<a name="l00213"></a>00213 
<a name="l00214"></a>00214 
<a name="l00215"></a><a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#74d166762f2cb59ad39e0f88c8dd1b11">00215</a> QRectF <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#74d166762f2cb59ad39e0f88c8dd1b11">CartesianCoordinatePlane::calculateRawDataBoundingRect</a>()<span class="keyword"> const</span>
<a name="l00216"></a>00216 <span class="keyword"></span>{
<a name="l00217"></a>00217     <span class="comment">// are manually set ranges to be applied?</span>
<a name="l00218"></a>00218     <span class="keyword">const</span> <span class="keywordtype">bool</span> bAutoAdjustHorizontalRange = (<a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;autoAdjustHorizontalRangeToData &lt; 100);
<a name="l00219"></a>00219     <span class="keyword">const</span> <span class="keywordtype">bool</span> bAutoAdjustVerticalRange   = (<a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;autoAdjustVerticalRangeToData   &lt; 100);
<a name="l00220"></a>00220 
<a name="l00221"></a>00221     <span class="keyword">const</span> <span class="keywordtype">bool</span> bHardHorizontalRange = (<a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;horizontalMin != <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;horizontalMax) &amp;&amp; ! bAutoAdjustHorizontalRange;
<a name="l00222"></a>00222     <span class="keyword">const</span> <span class="keywordtype">bool</span> bHardVerticalRange   = (<a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;verticalMin   != <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;verticalMax)   &amp;&amp; ! bAutoAdjustVerticalRange;
<a name="l00223"></a>00223     QRectF dataBoundingRect;
<a name="l00224"></a>00224 
<a name="l00225"></a>00225     <span class="comment">// if custom boundaries are set on the plane, use them</span>
<a name="l00226"></a>00226     <span class="keywordflow">if</span> ( bHardHorizontalRange &amp;&amp; bHardVerticalRange ) {
<a name="l00227"></a>00227         dataBoundingRect.setLeft(   <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;horizontalMin );
<a name="l00228"></a>00228         dataBoundingRect.setRight(  <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;horizontalMax );
<a name="l00229"></a>00229         dataBoundingRect.setBottom( <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;verticalMin );
<a name="l00230"></a>00230         dataBoundingRect.setTop(    <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;verticalMax );
<a name="l00231"></a>00231     }<span class="keywordflow">else</span>{
<a name="l00232"></a>00232         <span class="comment">// determine unit of the rectangles of all involved diagrams:</span>
<a name="l00233"></a>00233         dataBoundingRect = <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#7fed7cd342eb40dd4be670313d68d8ab">getRawDataBoundingRectFromDiagrams</a>();
<a name="l00234"></a>00234         <span class="keywordflow">if</span> ( bHardHorizontalRange ) {
<a name="l00235"></a>00235             dataBoundingRect.setLeft(  <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;horizontalMin );
<a name="l00236"></a>00236             dataBoundingRect.setRight( <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;horizontalMax );
<a name="l00237"></a>00237         }
<a name="l00238"></a>00238         <span class="keywordflow">if</span> ( bHardVerticalRange ) {
<a name="l00239"></a>00239             dataBoundingRect.setBottom( <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;verticalMin );
<a name="l00240"></a>00240             dataBoundingRect.setTop(    <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;verticalMax );
<a name="l00241"></a>00241         }
<a name="l00242"></a>00242     }
<a name="l00243"></a>00243     <span class="comment">// recalculate the bounds, if automatic adjusting of ranges is desired AND</span>
<a name="l00244"></a>00244     <span class="comment">//                         both bounds are at the same side of the zero line</span>
<a name="l00245"></a>00245     dataBoundingRect = <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#17a4b9d1dc14d8735b468451c9c49751">adjustedToMaxEmptyInnerPercentage</a>(
<a name="l00246"></a>00246             dataBoundingRect, <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;autoAdjustHorizontalRangeToData, <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;autoAdjustVerticalRangeToData );
<a name="l00247"></a>00247     <span class="keywordflow">if</span>( bAutoAdjustHorizontalRange ){
<a name="l00248"></a>00248         const_cast&lt;CartesianCoordinatePlane::Private *&gt;(<a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>)-&gt;horizontalMin = dataBoundingRect.left();
<a name="l00249"></a>00249         const_cast&lt;CartesianCoordinatePlane::Private *&gt;(<a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>)-&gt;horizontalMax = dataBoundingRect.right();
<a name="l00250"></a>00250     }
<a name="l00251"></a>00251     <span class="keywordflow">if</span>( bAutoAdjustVerticalRange ){
<a name="l00252"></a>00252         const_cast&lt;CartesianCoordinatePlane*&gt;(<span class="keyword">this</span>)-&gt;<a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;verticalMin = dataBoundingRect.bottom();
<a name="l00253"></a>00253         const_cast&lt;CartesianCoordinatePlane*&gt;(<span class="keyword">this</span>)-&gt;<a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;verticalMax = dataBoundingRect.top();
<a name="l00254"></a>00254     }
<a name="l00255"></a>00255     <span class="comment">//qDebug() &lt;&lt; "CartesianCoordinatePlane::calculateRawDataBoundingRect()\nreturns data boundaries: " &lt;&lt; dataBoundingRect;</span>
<a name="l00256"></a>00256     <span class="keywordflow">return</span> dataBoundingRect;
<a name="l00257"></a>00257 }
<a name="l00258"></a>00258 
<a name="l00259"></a>00259 
<a name="l00260"></a><a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#b7af1e3e3b0248dcb34c6094417beab3">00260</a> <a class="code" href="namespace_k_d_chart.html#c381ec7b07c91b74df2950c9a9065683">DataDimensionsList</a> <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#b7af1e3e3b0248dcb34c6094417beab3">CartesianCoordinatePlane::getDataDimensionsList</a>()<span class="keyword"> const</span>
<a name="l00261"></a>00261 <span class="keyword"></span>{
<a name="l00262"></a>00262 
<a name="l00263"></a>00263     <a class="code" href="namespace_k_d_chart.html#c381ec7b07c91b74df2950c9a9065683">DataDimensionsList</a> l;
<a name="l00264"></a>00264     <span class="keyword">const</span> <a class="code" href="class_k_d_chart_1_1_abstract_cartesian_diagram.html">AbstractCartesianDiagram</a>* dgr
<a name="l00265"></a>00265         = <a class="code" href="class_k_d_chart_1_1_abstract_coordinate_plane.html#27da62e376612d64e5e5631512a4dd59">diagrams</a>().isEmpty() ? 0 : dynamic_cast&lt;const AbstractCartesianDiagram*&gt; (<a class="code" href="class_k_d_chart_1_1_abstract_coordinate_plane.html#27da62e376612d64e5e5631512a4dd59">diagrams</a>().first() );
<a name="l00266"></a>00266 
<a name="l00267"></a>00267     <span class="keywordflow">if</span>( dgr ){
<a name="l00268"></a>00268         <span class="keyword">const</span> QRectF r( <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#74d166762f2cb59ad39e0f88c8dd1b11">calculateRawDataBoundingRect</a>() );
<a name="l00269"></a>00269         <span class="comment">// note:</span>
<a name="l00270"></a>00270         <span class="comment">// We do *not* access d-&gt;gridAttributesHorizontal here, but</span>
<a name="l00271"></a>00271         <span class="comment">// we use the getter function, to get the global attrs, if no</span>
<a name="l00272"></a>00272         <span class="comment">// special ones have been set for the respective orientation.</span>
<a name="l00273"></a>00273         <span class="keyword">const</span> <a class="code" href="class_k_d_chart_1_1_grid_attributes.html">GridAttributes</a> gaH( <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#cf10c44decb5b84acf98ac08832d6f1e">gridAttributes</a>( Qt::Horizontal ) );
<a name="l00274"></a>00274         <span class="keyword">const</span> <a class="code" href="class_k_d_chart_1_1_grid_attributes.html">GridAttributes</a> gaV( <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#cf10c44decb5b84acf98ac08832d6f1e">gridAttributes</a>( Qt::Vertical ) );
<a name="l00275"></a>00275         <span class="comment">// append the first dimension: for Abscissa axes</span>
<a name="l00276"></a>00276         l.append(
<a name="l00277"></a>00277             <a class="code" href="class_k_d_chart_1_1_data_dimension.html">DataDimension</a>(
<a name="l00278"></a>00278                 r.left(), r.right(),
<a name="l00279"></a>00279                 dgr-&gt;<a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#a675ca45a6d418b26b4855673fdc8e41">datasetDimension</a>() &gt; 1,
<a name="l00280"></a>00280                 <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#4875fe5fa90e85527adb018e86839fb3">axesCalcModeX</a>(),
<a name="l00281"></a>00281                 gaH.<a class="code" href="class_k_d_chart_1_1_grid_attributes.html#6f11db85d4e870249e456dd73839549c">gridGranularitySequence</a>(),
<a name="l00282"></a>00282                 gaH.<a class="code" href="class_k_d_chart_1_1_grid_attributes.html#0abfe539a9c47b1a74110f3a03d9ef11">gridStepWidth</a>(),
<a name="l00283"></a>00283                 gaH.<a class="code" href="class_k_d_chart_1_1_grid_attributes.html#db95ede1e8f118a7c3ab00714b75be08">gridSubStepWidth</a>() ) );
<a name="l00284"></a>00284         <span class="comment">// append the second dimension: for Ordinate axes</span>
<a name="l00285"></a>00285         <span class="keywordflow">if</span>( dgr-&gt;<a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#e7bf807b77e166f259915dcca1c96724">percentMode</a>() )
<a name="l00286"></a>00286             l.append(
<a name="l00287"></a>00287                 <a class="code" href="class_k_d_chart_1_1_data_dimension.html">DataDimension</a>(
<a name="l00288"></a>00288                     <span class="comment">// always return 0-100 when in percentMode</span>
<a name="l00289"></a>00289                     0.0, 100.0,
<a name="l00290"></a>00290                     <span class="keyword">true</span>,
<a name="l00291"></a>00291                     <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#6f4496ee4a46db94e77289f811553170">axesCalcModeY</a>(),
<a name="l00292"></a>00292                     <a class="code" href="class_k_d_chart_enums.html#81303eccb641ce0560034fef2a5a1f71ad184fd5238c814d1763ac1134fe6925">KDChartEnums::GranularitySequence_10_20</a>,
<a name="l00293"></a>00293                     10.0 ) );
<a name="l00294"></a>00294         <span class="keywordflow">else</span>
<a name="l00295"></a>00295             l.append(
<a name="l00296"></a>00296                 <a class="code" href="class_k_d_chart_1_1_data_dimension.html">DataDimension</a>(
<a name="l00297"></a>00297                     r.bottom(), r.top(),
<a name="l00298"></a>00298                     <span class="keyword">true</span>,
<a name="l00299"></a>00299                     <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#6f4496ee4a46db94e77289f811553170">axesCalcModeY</a>(),
<a name="l00300"></a>00300                     gaV.<a class="code" href="class_k_d_chart_1_1_grid_attributes.html#6f11db85d4e870249e456dd73839549c">gridGranularitySequence</a>(),
<a name="l00301"></a>00301                     gaV.<a class="code" href="class_k_d_chart_1_1_grid_attributes.html#0abfe539a9c47b1a74110f3a03d9ef11">gridStepWidth</a>(),
<a name="l00302"></a>00302                     gaV.<a class="code" href="class_k_d_chart_1_1_grid_attributes.html#db95ede1e8f118a7c3ab00714b75be08">gridSubStepWidth</a>() ) );
<a name="l00303"></a>00303     }<span class="keywordflow">else</span>{
<a name="l00304"></a>00304         l.append( <a class="code" href="class_k_d_chart_1_1_data_dimension.html">DataDimension</a>() ); <span class="comment">// This gets us the default 1..0 / 1..0 grid</span>
<a name="l00305"></a>00305         l.append( <a class="code" href="class_k_d_chart_1_1_data_dimension.html">DataDimension</a>() ); <span class="comment">// shown, if there is no diagram on this plane.</span>
<a name="l00306"></a>00306     }
<a name="l00307"></a>00307     <span class="keywordflow">return</span> l;
<a name="l00308"></a>00308 }
<a name="l00309"></a>00309 
<a name="l00310"></a><a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#57d31012ef9b7a882537b7762003b476">00310</a> QRectF <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#57d31012ef9b7a882537b7762003b476">CartesianCoordinatePlane::drawingArea</a>()<span class="keyword"> const</span>
<a name="l00311"></a>00311 <span class="keyword"></span>{
<a name="l00312"></a>00312     <span class="keyword">const</span> QRect rect( <a class="code" href="class_k_d_chart_1_1_abstract_area.html#ca8c7be74ee3dbb68d48cb65d276657f">areaGeometry</a>() );
<a name="l00313"></a>00313     <span class="keywordflow">return</span> QRectF ( rect.left()+1, rect.top()+1, rect.width() - 3, rect.height() - 3 );
<a name="l00314"></a>00314 }
<a name="l00315"></a>00315 
<a name="l00316"></a>00316 
<a name="l00317"></a><a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#2f3481a044a90f98816af2167e1fce83">00317</a> <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#2f3481a044a90f98816af2167e1fce83">CartesianCoordinatePlane::layoutDiagrams</a>()
<a name="l00318"></a>00318 {
<a name="l00319"></a>00319     <span class="comment">//qDebug("CartesianCoordinatePlane::layoutDiagrams() called");</span>
<a name="l00320"></a>00320     <span class="keywordflow">if</span> ( <a class="code" href="class_k_d_chart_1_1_abstract_coordinate_plane.html#27da62e376612d64e5e5631512a4dd59">diagrams</a>().<a class="code" href="class_k_d_chart_1_1_abstract_coordinate_plane.html#fc73298c1919345d9f43cbdb75134388">isEmpty</a>() )
<a name="l00321"></a>00321     {   <span class="comment">// FIXME evaluate what can still be prepared</span>
<a name="l00322"></a>00322         <span class="comment">// FIXME decide default dimension if no diagrams are present (to make empty planes useable)</span>
<a name="l00323"></a>00323     }
<a name="l00324"></a>00324     <span class="comment">// the rectangle the diagrams cover in the *plane*:</span>
<a name="l00325"></a>00325     <span class="comment">// (Why -3? We save 1px on each side for the antialiased drawing, and</span>
<a name="l00326"></a>00326     <span class="comment">// respect the way QPainter calculates the width of a painted rect (the</span>
<a name="l00327"></a>00327     <span class="comment">// size is the rectangle size plus the pen width). This way, most clipping</span>
<a name="l00328"></a>00328     <span class="comment">// for regular pens should be avoided. When pens with a penWidth or larger</span>
<a name="l00329"></a>00329     <span class="comment">// than 1 are used, this may not be sufficient.</span>
<a name="l00330"></a>00330     <span class="keyword">const</span> QRectF drawArea( <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#57d31012ef9b7a882537b7762003b476">drawingArea</a>() );
<a name="l00331"></a>00331     <span class="comment">//qDebug() &lt;&lt; "drawingArea() returns" &lt;&lt; drawArea;</span>
<a name="l00332"></a>00332 
<a name="l00333"></a>00333     <span class="keyword">const</span> <a class="code" href="namespace_k_d_chart.html#c381ec7b07c91b74df2950c9a9065683">DataDimensionsList</a> dimensions( <a class="code" href="class_k_d_chart_1_1_abstract_coordinate_plane.html#bc697586fe5a2b45b49721210f3ec125">gridDimensionsList</a>() );
<a name="l00334"></a>00334     <span class="comment">// test for programming errors: critical</span>
<a name="l00335"></a>00335     Q_ASSERT_X ( dimensions.count() == 2, <span class="stringliteral">"CartesianCoordinatePlane::layoutDiagrams"</span>,
<a name="l00336"></a>00336                  <span class="stringliteral">"Error: gridDimensionsList() did not return exactly two dimensions."</span> );
<a name="l00337"></a>00337     <span class="keyword">const</span> <a class="code" href="class_k_d_chart_1_1_data_dimension.html">DataDimension</a> dimX = dimensions.first();
<a name="l00338"></a>00338     <span class="keyword">const</span> <a class="code" href="class_k_d_chart_1_1_data_dimension.html">DataDimension</a> dimY = dimensions.last();
<a name="l00339"></a>00339     <span class="keyword">const</span> qreal distX = dimX.distance();
<a name="l00340"></a>00340     <span class="keyword">const</span> qreal distY = dimY.<a class="code" href="class_k_d_chart_1_1_data_dimension.html#3503f75e4caa3cf880584cb6d5e2c333">distance</a>();
<a name="l00341"></a>00341     <span class="comment">//qDebug() &lt;&lt; distX &lt;&lt; distY;</span>
<a name="l00342"></a>00342     <span class="keyword">const</span> QPointF pt(qMin(dimX.start, dimX.end), qMax(dimY.<a class="code" href="class_k_d_chart_1_1_data_dimension.html#e3c2ee6618711053340236fe91f0c575">start</a>, dimY.<a class="code" href="class_k_d_chart_1_1_data_dimension.html#b843c6adde42e7c7b56d3ab188f4b235">end</a>));
<a name="l00343"></a>00343     <span class="keyword">const</span> QSizeF siz( qAbs(distX), -qAbs(distY) );
<a name="l00344"></a>00344     <span class="keyword">const</span> QRectF dataBoundingRect( pt, siz );
<a name="l00345"></a>00345     <span class="comment">//qDebug() &lt;&lt; "dataBoundingRect" &lt;&lt; dataBoundingRect;</span>
<a name="l00346"></a>00346 
<a name="l00347"></a>00347     <span class="comment">// calculate the remaining rectangle, and use it as the diagram area:</span>
<a name="l00348"></a>00348     QRectF diagramArea = drawArea;
<a name="l00349"></a>00349     diagramArea.setTopLeft ( QPointF ( drawArea.left(), drawArea.top() ) );
<a name="l00350"></a>00350     diagramArea.setBottomRight ( QPointF ( drawArea.right(), drawArea.bottom() ) );
<a name="l00351"></a>00351 
<a name="l00352"></a>00352     <span class="comment">// determine coordinate transformation:</span>
<a name="l00353"></a>00353     QPointF diagramTopLeft;
<a name="l00354"></a>00354     <span class="keywordflow">if</span>( !<a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;reverseVerticalPlane &amp;&amp; !<a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;reverseHorizontalPlane )
<a name="l00355"></a>00355         diagramTopLeft = dataBoundingRect.topLeft();
<a name="l00356"></a>00356     <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;reverseVerticalPlane &amp;&amp; !<a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;reverseHorizontalPlane )
<a name="l00357"></a>00357         diagramTopLeft = dataBoundingRect.bottomLeft();
<a name="l00358"></a>00358     <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;reverseVerticalPlane &amp;&amp; <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;reverseHorizontalPlane )
<a name="l00359"></a>00359         diagramTopLeft = dataBoundingRect.bottomRight();
<a name="l00360"></a>00360     <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !<a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;reverseVerticalPlane &amp;&amp; <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;reverseHorizontalPlane )
<a name="l00361"></a>00361         diagramTopLeft = dataBoundingRect.topRight();
<a name="l00362"></a>00362 
<a name="l00363"></a>00363     <span class="keywordtype">double</span> diagramWidth;
<a name="l00364"></a>00364     <span class="keywordflow">if</span>( !<a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;reverseHorizontalPlane )
<a name="l00365"></a>00365         diagramWidth = dataBoundingRect.width();
<a name="l00366"></a>00366     <span class="keywordflow">else</span>
<a name="l00367"></a>00367         diagramWidth = -dataBoundingRect.width();
<a name="l00368"></a>00368 
<a name="l00369"></a>00369     <span class="keywordtype">double</span> diagramHeight;
<a name="l00370"></a>00370     <span class="keywordflow">if</span>( !<a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;reverseVerticalPlane )
<a name="l00371"></a>00371         diagramHeight = dataBoundingRect.height();
<a name="l00372"></a>00372     <span class="keywordflow">else</span>
<a name="l00373"></a>00373         diagramHeight = -dataBoundingRect.height();
<a name="l00374"></a>00374 
<a name="l00375"></a>00375     <span class="keywordtype">double</span> planeWidth = diagramArea.width();
<a name="l00376"></a>00376     <span class="keywordtype">double</span> planeHeight = diagramArea.height();
<a name="l00377"></a>00377     <span class="keywordtype">double</span> scaleX;
<a name="l00378"></a>00378     <span class="keywordtype">double</span> scaleY;
<a name="l00379"></a>00379 
<a name="l00380"></a>00380     <span class="keywordtype">double</span> diagramXUnitInCoordinatePlane;
<a name="l00381"></a>00381     <span class="keywordtype">double</span> diagramYUnitInCoordinatePlane;
<a name="l00382"></a>00382 
<a name="l00383"></a>00383     diagramXUnitInCoordinatePlane = diagramWidth != 0 ? planeWidth / diagramWidth : 1;
<a name="l00384"></a>00384     diagramYUnitInCoordinatePlane = diagramHeight != 0 ? planeHeight / diagramHeight : 1;
<a name="l00385"></a>00385     <span class="comment">// calculate isometric scaling factor to maxscale the diagram into</span>
<a name="l00386"></a>00386     <span class="comment">// the coordinate system:</span>
<a name="l00387"></a>00387     <span class="keywordflow">if</span> ( <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;isometricScaling )
<a name="l00388"></a>00388     {
<a name="l00389"></a>00389         <span class="keywordtype">double</span> scale = qMin ( qAbs ( diagramXUnitInCoordinatePlane ),
<a name="l00390"></a>00390                               qAbs ( diagramYUnitInCoordinatePlane ) );
<a name="l00391"></a>00391 
<a name="l00392"></a>00392         scaleX = qAbs( scale / diagramXUnitInCoordinatePlane );
<a name="l00393"></a>00393         scaleY = qAbs( scale / diagramYUnitInCoordinatePlane );
<a name="l00394"></a>00394     } <span class="keywordflow">else</span> {
<a name="l00395"></a>00395         scaleX = 1.0;
<a name="l00396"></a>00396         scaleY = 1.0;
<a name="l00397"></a>00397     }
<a name="l00398"></a>00398 
<a name="l00399"></a>00399     <span class="comment">// calculate diagram origin in plane coordinates:</span>
<a name="l00400"></a>00400     QPointF coordinateOrigin = QPointF (
<a name="l00401"></a>00401             diagramTopLeft.x() * -diagramXUnitInCoordinatePlane,
<a name="l00402"></a>00402     diagramTopLeft.y() * -diagramYUnitInCoordinatePlane );
<a name="l00403"></a>00403     coordinateOrigin += diagramArea.topLeft();
<a name="l00404"></a>00404 
<a name="l00405"></a>00405     <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;coordinateTransformation.originTranslation = coordinateOrigin;
<a name="l00406"></a>00406 
<a name="l00407"></a>00407     <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;coordinateTransformation.diagramRect = dataBoundingRect;
<a name="l00408"></a>00408 
<a name="l00409"></a>00409     <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;coordinateTransformation.unitVectorX = diagramXUnitInCoordinatePlane;
<a name="l00410"></a>00410     <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;coordinateTransformation.unitVectorY = diagramYUnitInCoordinatePlane;
<a name="l00411"></a>00411 
<a name="l00412"></a>00412     <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;coordinateTransformation.isoScaleX = scaleX;
<a name="l00413"></a>00413     <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;coordinateTransformation.isoScaleY = scaleY;
<a name="l00414"></a>00414 
<a name="l00415"></a>00415     <span class="comment">//      adapt diagram area to effect of isometric scaling:</span>
<a name="l00416"></a>00416     diagramArea.setTopLeft( <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#78a71423354969c970c5feb2f0c1da92">translate</a> ( dataBoundingRect.topLeft() ) );
<a name="l00417"></a>00417     diagramArea.setBottomRight ( <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#78a71423354969c970c5feb2f0c1da92">translate</a> ( dataBoundingRect.bottomRight() ) );
<a name="l00418"></a>00418 
<a name="l00419"></a>00419     <span class="comment">// the plane area might have changed, so the zoom values might also be changed</span>
<a name="l00420"></a>00420     <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#f3986f4f19ebd9eee5de03fea8ae7819">handleFixedDataCoordinateSpaceRelation</a>( drawArea );
<a name="l00421"></a>00421 
<a name="l00422"></a>00422     <span class="comment">//qDebug("CartesianCoordinatePlane::layoutDiagrams() done,\ncalling update() now:");</span>
<a name="l00423"></a>00423     <a class="code" href="class_k_d_chart_1_1_abstract_coordinate_plane.html#ae24ee3b978933716870e3c63552db98">update</a>();
<a name="l00424"></a>00424 }
<a name="l00425"></a>00425 
<a name="l00426"></a><a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#7decb99b5bf4e5ec5c0f1b17c0d91591">00426</a> <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#7decb99b5bf4e5ec5c0f1b17c0d91591">CartesianCoordinatePlane::setFixedDataCoordinateSpaceRelation</a>( <span class="keywordtype">bool</span> fixed )
<a name="l00427"></a>00427 {
<a name="l00428"></a>00428     <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;fixedDataCoordinateSpaceRelation = fixed;
<a name="l00429"></a>00429     <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;fixedDataCoordinateSpaceRelationOldSize = QRectF();
<a name="l00430"></a>00430 }
<a name="l00431"></a>00431 
<a name="l00432"></a><a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#5c673f9c561d6944fd8c7fc8791b09a4">00432</a> <span class="keywordtype">bool</span> <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#5c673f9c561d6944fd8c7fc8791b09a4">CartesianCoordinatePlane::hasFixedDataCoordinateSpaceRelation</a>()<span class="keyword"> const</span>
<a name="l00433"></a>00433 <span class="keyword"></span>{
<a name="l00434"></a>00434     <span class="keywordflow">return</span> <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;fixedDataCoordinateSpaceRelation;
<a name="l00435"></a>00435 }
<a name="l00436"></a>00436 
<a name="l00437"></a><a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#f3986f4f19ebd9eee5de03fea8ae7819">00437</a> <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#f3986f4f19ebd9eee5de03fea8ae7819">CartesianCoordinatePlane::handleFixedDataCoordinateSpaceRelation</a>( <span class="keyword">const</span> QRectF&amp; geometry )
<a name="l00438"></a>00438 {
<a name="l00439"></a>00439     <span class="comment">// is the feature enabled?</span>
<a name="l00440"></a>00440     <span class="keywordflow">if</span>( !<a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;fixedDataCoordinateSpaceRelation )
<a name="l00441"></a>00441         <span class="keywordflow">return</span>;
<a name="l00442"></a>00442 
<a name="l00443"></a>00443     <span class="comment">// is the new geometry ok?</span>
<a name="l00444"></a>00444     <span class="keywordflow">if</span>( geometry.height() &lt; 1 || geometry.width() &lt; 1 )
<a name="l00445"></a>00445         <span class="keywordflow">return</span>;
<a name="l00446"></a>00446 
<a name="l00447"></a>00447     <span class="comment">// if the size was changed, we calculate new zoom settings</span>
<a name="l00448"></a>00448     <span class="keywordflow">if</span>( <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;fixedDataCoordinateSpaceRelationOldSize != geometry &amp;&amp; !<a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;fixedDataCoordinateSpaceRelationOldSize.isNull() )
<a name="l00449"></a>00449     {
<a name="l00450"></a>00450         <span class="keyword">const</span> <span class="keywordtype">double</span> newZoomX = <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#afdd3a7110f51655f3024c0ea8dc251a">zoomFactorX</a>() * <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;fixedDataCoordinateSpaceRelationOldSize.width() / geometry.width();
<a name="l00451"></a>00451         <span class="keyword">const</span> <span class="keywordtype">double</span> newZoomY = <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#4da0c447e16f67254ff7794f2a4836b0">zoomFactorY</a>() * <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;fixedDataCoordinateSpaceRelationOldSize.height() / geometry.height();
<a name="l00452"></a>00452 
<a name="l00453"></a>00453         <span class="keyword">const</span> QPointF oldCenter = <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#7f33b5d8b4bff40b178e0dc9972b1d22">zoomCenter</a>();
<a name="l00454"></a>00454         <span class="keyword">const</span> QPointF newCenter = QPointF( oldCenter.x() * geometry.width() / <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;fixedDataCoordinateSpaceRelationOldSize.width(),
<a name="l00455"></a>00455                                            oldCenter.y() * geometry.height() / <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;fixedDataCoordinateSpaceRelationOldSize.height() );
<a name="l00456"></a>00456 
<a name="l00457"></a>00457         <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#340f42332eefe848c7f9f4f28f75c7a6">setZoomCenter</a>( newCenter );
<a name="l00458"></a>00458         <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#e4fb11812681348802a58a4929a732ca">setZoomFactorX</a>( newZoomX );
<a name="l00459"></a>00459         <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#78bdd7150f958b7d0d34192911841166">setZoomFactorY</a>( newZoomY );
<a name="l00460"></a>00460     }
<a name="l00461"></a>00461 
<a name="l00462"></a>00462     <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;fixedDataCoordinateSpaceRelationOldSize = geometry;
<a name="l00463"></a>00463 }
<a name="l00464"></a>00464 
<a name="l00465"></a><a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#78a71423354969c970c5feb2f0c1da92">00465</a> <span class="keyword">const</span> QPointF <a class="code" href="_ternary_point_8cpp.html#d527a696995f1e16602d1ec52359733e">CartesianCoordinatePlane::translate</a>( <span class="keyword">const</span> QPointF&amp; diagramPoint )<span class="keyword"> const</span>
<a name="l00466"></a>00466 <span class="keyword"></span>{
<a name="l00467"></a>00467     <span class="comment">// Note: We do not test if the point lays inside of the data area,</span>
<a name="l00468"></a>00468     <span class="comment">//       but we just apply the transformation calculations to the point.</span>
<a name="l00469"></a>00469     <span class="comment">//       This allows for basic calculations done by the user, see e.g.</span>
<a name="l00470"></a>00470     <span class="comment">//       the file  examples/Lines/BubbleChart/mainwindow.cpp</span>
<a name="l00471"></a>00471     <span class="keywordflow">return</span>  <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;coordinateTransformation.translate ( diagramPoint );
<a name="l00472"></a>00472 }
<a name="l00473"></a>00473 
<a name="l00474"></a><a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#40b481d335bdefbc11fb56801bc0d0f7">00474</a> <span class="keyword">const</span> QPointF <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#40b481d335bdefbc11fb56801bc0d0f7">CartesianCoordinatePlane::translateBack</a>( <span class="keyword">const</span> QPointF&amp; screenPoint )<span class="keyword"> const</span>
<a name="l00475"></a>00475 <span class="keyword"></span>{
<a name="l00476"></a>00476     <span class="keywordflow">return</span>  <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;coordinateTransformation.translateBack ( screenPoint );
<a name="l00477"></a>00477 }
<a name="l00478"></a>00478 
<a name="l00479"></a><a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#806bf349b454b22b742fbae7abc4cead">00479</a> <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#806bf349b454b22b742fbae7abc4cead">CartesianCoordinatePlane::setIsometricScaling</a> ( <span class="keywordtype">bool</span> onOff )
<a name="l00480"></a>00480 {
<a name="l00481"></a>00481     <span class="keywordflow">if</span> ( <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;isometricScaling != onOff )
<a name="l00482"></a>00482     {
<a name="l00483"></a>00483         <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;isometricScaling = onOff;
<a name="l00484"></a>00484         <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#2f3481a044a90f98816af2167e1fce83">layoutDiagrams</a>();
<a name="l00485"></a>00485         emit <a class="code" href="class_k_d_chart_1_1_abstract_coordinate_plane.html#683824b7d35b89c35422a5bc1cf71c59">propertiesChanged</a>();
<a name="l00486"></a>00486     }
<a name="l00487"></a>00487 }
<a name="l00488"></a>00488 
<a name="l00489"></a><a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#287b49a826690756c95d8e83b64050c1">00489</a> <span class="keywordtype">bool</span> <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#287b49a826690756c95d8e83b64050c1">CartesianCoordinatePlane::doesIsometricScaling</a> ()<span class="keyword"> const</span>
<a name="l00490"></a>00490 <span class="keyword"></span>{
<a name="l00491"></a>00491     <span class="keywordflow">return</span> <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;isometricScaling;
<a name="l00492"></a>00492 }
<a name="l00493"></a>00493 
<a name="l00494"></a><a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#bb081b2ffa5be221ed2b23239a140cce">00494</a> <span class="keywordtype">bool</span> <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#bb081b2ffa5be221ed2b23239a140cce">CartesianCoordinatePlane::doneSetZoomFactorX</a>( <span class="keywordtype">double</span> factor )
<a name="l00495"></a>00495 {
<a name="l00496"></a>00496     <span class="keyword">const</span> <span class="keywordtype">bool</span> done = ( <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;coordinateTransformation.zoom.xFactor != factor );
<a name="l00497"></a>00497     <span class="keywordflow">if</span>( done ){
<a name="l00498"></a>00498         <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;coordinateTransformation.zoom.xFactor = factor;
<a name="l00499"></a>00499         <span class="keywordflow">if</span>( <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;autoAdjustGridToZoom )
<a name="l00500"></a>00500             <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;grid-&gt;setNeedRecalculate();
<a name="l00501"></a>00501     }
<a name="l00502"></a>00502     <span class="keywordflow">return</span> done;
<a name="l00503"></a>00503 }
<a name="l00504"></a>00504 
<a name="l00505"></a><a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#d287738934f3c57a381fb0ce85a8d897">00505</a> <span class="keywordtype">bool</span> <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#d287738934f3c57a381fb0ce85a8d897">CartesianCoordinatePlane::doneSetZoomFactorY</a>( <span class="keywordtype">double</span> factor )
<a name="l00506"></a>00506 {
<a name="l00507"></a>00507     <span class="keyword">const</span> <span class="keywordtype">bool</span> done = ( <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;coordinateTransformation.zoom.yFactor != factor );
<a name="l00508"></a>00508     <span class="keywordflow">if</span>( done ){
<a name="l00509"></a>00509         <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;coordinateTransformation.zoom.yFactor = factor;
<a name="l00510"></a>00510         <span class="keywordflow">if</span>( <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;autoAdjustGridToZoom )
<a name="l00511"></a>00511             <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;grid-&gt;setNeedRecalculate();
<a name="l00512"></a>00512     }
<a name="l00513"></a>00513     <span class="keywordflow">return</span> done;
<a name="l00514"></a>00514 }
<a name="l00515"></a>00515 
<a name="l00516"></a><a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#9b89e872655a1f1a7fa31c786562b513">00516</a> <span class="keywordtype">bool</span> <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#9b89e872655a1f1a7fa31c786562b513">CartesianCoordinatePlane::doneSetZoomCenter</a>( <span class="keyword">const</span> QPointF&amp; point )
<a name="l00517"></a>00517 {
<a name="l00518"></a>00518     <span class="keyword">const</span> <span class="keywordtype">bool</span> done = ( <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;coordinateTransformation.zoom.center() != point );
<a name="l00519"></a>00519     <span class="keywordflow">if</span>( done ){
<a name="l00520"></a>00520         <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;coordinateTransformation.zoom.setCenter( point );
<a name="l00521"></a>00521         <span class="keywordflow">if</span>( <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;autoAdjustGridToZoom )
<a name="l00522"></a>00522             <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;grid-&gt;setNeedRecalculate();
<a name="l00523"></a>00523     }
<a name="l00524"></a>00524     <span class="keywordflow">return</span> done;
<a name="l00525"></a>00525 }
<a name="l00526"></a>00526 
<a name="l00527"></a><a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#e4fb11812681348802a58a4929a732ca">00527</a> <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#e4fb11812681348802a58a4929a732ca">CartesianCoordinatePlane::setZoomFactorX</a>( <span class="keywordtype">double</span> factor )
<a name="l00528"></a>00528 {
<a name="l00529"></a>00529     <span class="keywordflow">if</span>( <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#bb081b2ffa5be221ed2b23239a140cce">doneSetZoomFactorX</a>( factor ) ){
<a name="l00530"></a>00530         emit <a class="code" href="class_k_d_chart_1_1_abstract_coordinate_plane.html#683824b7d35b89c35422a5bc1cf71c59">propertiesChanged</a>();
<a name="l00531"></a>00531     }
<a name="l00532"></a>00532 }
<a name="l00533"></a>00533 
<a name="l00534"></a><a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#78bdd7150f958b7d0d34192911841166">00534</a> <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#78bdd7150f958b7d0d34192911841166">CartesianCoordinatePlane::setZoomFactorY</a>( <span class="keywordtype">double</span> factor )
<a name="l00535"></a>00535 {
<a name="l00536"></a>00536     <span class="keywordflow">if</span>( <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#d287738934f3c57a381fb0ce85a8d897">doneSetZoomFactorY</a>( factor ) ){
<a name="l00537"></a>00537         emit <a class="code" href="class_k_d_chart_1_1_abstract_coordinate_plane.html#683824b7d35b89c35422a5bc1cf71c59">propertiesChanged</a>();
<a name="l00538"></a>00538     }
<a name="l00539"></a>00539 }
<a name="l00540"></a>00540 
<a name="l00541"></a><a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#340f42332eefe848c7f9f4f28f75c7a6">00541</a> <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#340f42332eefe848c7f9f4f28f75c7a6">CartesianCoordinatePlane::setZoomCenter</a>( <span class="keyword">const</span> QPointF&amp; point )
<a name="l00542"></a>00542 {
<a name="l00543"></a>00543     <span class="keywordflow">if</span>( <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#9b89e872655a1f1a7fa31c786562b513">doneSetZoomCenter</a>( point ) ){
<a name="l00544"></a>00544         emit <a class="code" href="class_k_d_chart_1_1_abstract_coordinate_plane.html#683824b7d35b89c35422a5bc1cf71c59">propertiesChanged</a>();
<a name="l00545"></a>00545     }
<a name="l00546"></a>00546 }
<a name="l00547"></a>00547 
<a name="l00548"></a><a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#7f33b5d8b4bff40b178e0dc9972b1d22">00548</a> QPointF <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#7f33b5d8b4bff40b178e0dc9972b1d22">CartesianCoordinatePlane::zoomCenter</a>()<span class="keyword"> const</span>
<a name="l00549"></a>00549 <span class="keyword"></span>{
<a name="l00550"></a>00550     <span class="keywordflow">return</span> <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;coordinateTransformation.zoom.center();
<a name="l00551"></a>00551 }
<a name="l00552"></a>00552 
<a name="l00553"></a><a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#afdd3a7110f51655f3024c0ea8dc251a">00553</a> <span class="keywordtype">double</span> <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#afdd3a7110f51655f3024c0ea8dc251a">CartesianCoordinatePlane::zoomFactorX</a>()<span class="keyword"> const</span>
<a name="l00554"></a>00554 <span class="keyword"></span>{
<a name="l00555"></a>00555     <span class="keywordflow">return</span> <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;coordinateTransformation.zoom.xFactor;
<a name="l00556"></a>00556 }
<a name="l00557"></a>00557 
<a name="l00558"></a><a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#4da0c447e16f67254ff7794f2a4836b0">00558</a> <span class="keywordtype">double</span> <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#4da0c447e16f67254ff7794f2a4836b0">CartesianCoordinatePlane::zoomFactorY</a>()<span class="keyword"> const</span>
<a name="l00559"></a>00559 <span class="keyword"></span>{
<a name="l00560"></a>00560     <span class="keywordflow">return</span> <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;coordinateTransformation.zoom.yFactor;
<a name="l00561"></a>00561 }
<a name="l00562"></a>00562 
<a name="l00563"></a>00563 
<a name="l00564"></a><a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#6f4496ee4a46db94e77289f811553170">00564</a> <a class="code" href="class_k_d_chart_1_1_abstract_coordinate_plane.html#25cfe6d37712f9a8360c08ee3765297a">CartesianCoordinatePlane::AxesCalcMode</a> <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#6f4496ee4a46db94e77289f811553170">CartesianCoordinatePlane::axesCalcModeY</a>()<span class="keyword"> const</span>
<a name="l00565"></a>00565 <span class="keyword"></span>{
<a name="l00566"></a>00566     <span class="keywordflow">return</span> <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;coordinateTransformation.axesCalcModeY;
<a name="l00567"></a>00567 }
<a name="l00568"></a>00568 
<a name="l00569"></a><a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#4875fe5fa90e85527adb018e86839fb3">00569</a> <a class="code" href="class_k_d_chart_1_1_abstract_coordinate_plane.html#25cfe6d37712f9a8360c08ee3765297a">CartesianCoordinatePlane::AxesCalcMode</a> <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#4875fe5fa90e85527adb018e86839fb3">CartesianCoordinatePlane::axesCalcModeX</a>()<span class="keyword"> const</span>
<a name="l00570"></a>00570 <span class="keyword"></span>{
<a name="l00571"></a>00571     <span class="keywordflow">return</span> <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;coordinateTransformation.axesCalcModeX;
<a name="l00572"></a>00572 }
<a name="l00573"></a>00573 
<a name="l00574"></a><a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#bfc9b4368a06736ce799ed20ca357628">00574</a> <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#bfc9b4368a06736ce799ed20ca357628">CartesianCoordinatePlane::setAxesCalcModes</a>( <a class="code" href="class_k_d_chart_1_1_abstract_coordinate_plane.html#25cfe6d37712f9a8360c08ee3765297a">AxesCalcMode</a> mode )
<a name="l00575"></a>00575 {
<a name="l00576"></a>00576     <span class="keywordflow">if</span>( <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;coordinateTransformation.axesCalcModeY != mode ||
<a name="l00577"></a>00577         <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;coordinateTransformation.axesCalcModeX != mode ){
<a name="l00578"></a>00578         <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;coordinateTransformation.axesCalcModeY = mode;
<a name="l00579"></a>00579         <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;coordinateTransformation.axesCalcModeX = mode;
<a name="l00580"></a>00580         emit <a class="code" href="class_k_d_chart_1_1_abstract_coordinate_plane.html#683824b7d35b89c35422a5bc1cf71c59">propertiesChanged</a>();
<a name="l00581"></a>00581     }
<a name="l00582"></a>00582 }
<a name="l00583"></a>00583 
<a name="l00584"></a><a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#fd46d435c9d174105c53cfcda2fe7cda">00584</a> <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#fd46d435c9d174105c53cfcda2fe7cda">CartesianCoordinatePlane::setAxesCalcModeY</a>( <a class="code" href="class_k_d_chart_1_1_abstract_coordinate_plane.html#25cfe6d37712f9a8360c08ee3765297a">AxesCalcMode</a> mode )
<a name="l00585"></a>00585 {
<a name="l00586"></a>00586     <span class="keywordflow">if</span>( <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;coordinateTransformation.axesCalcModeY != mode ){
<a name="l00587"></a>00587         <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;coordinateTransformation.axesCalcModeY = mode;
<a name="l00588"></a>00588         emit <a class="code" href="class_k_d_chart_1_1_abstract_coordinate_plane.html#683824b7d35b89c35422a5bc1cf71c59">propertiesChanged</a>();
<a name="l00589"></a>00589     }
<a name="l00590"></a>00590 }
<a name="l00591"></a>00591 
<a name="l00592"></a><a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#100c8d2e85742791e91aef7ccf751356">00592</a> <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#100c8d2e85742791e91aef7ccf751356">CartesianCoordinatePlane::setAxesCalcModeX</a>( <a class="code" href="class_k_d_chart_1_1_abstract_coordinate_plane.html#25cfe6d37712f9a8360c08ee3765297a">AxesCalcMode</a> mode )
<a name="l00593"></a>00593 {
<a name="l00594"></a>00594     <span class="keywordflow">if</span>( <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;coordinateTransformation.axesCalcModeX != mode ){
<a name="l00595"></a>00595         <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;coordinateTransformation.axesCalcModeX = mode;
<a name="l00596"></a>00596         emit <a class="code" href="class_k_d_chart_1_1_abstract_coordinate_plane.html#683824b7d35b89c35422a5bc1cf71c59">propertiesChanged</a>();
<a name="l00597"></a>00597     }
<a name="l00598"></a>00598 }
<a name="l00599"></a>00599 
<a name="l00600"></a><a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#446f5002372e6f52bba8144e6fb61c97">00600</a> <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#446f5002372e6f52bba8144e6fb61c97">CartesianCoordinatePlane::setHorizontalRange</a>( <span class="keyword">const</span> QPair&lt; qreal, qreal &gt; &amp; range )
<a name="l00601"></a>00601 {
<a name="l00602"></a>00602     <span class="keywordflow">if</span> ( <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;horizontalMin != range.first || <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;horizontalMax != range.second ) {
<a name="l00603"></a>00603         <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;autoAdjustHorizontalRangeToData = 100;
<a name="l00604"></a>00604         <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;horizontalMin = range.first;
<a name="l00605"></a>00605         <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;horizontalMax = range.second;
<a name="l00606"></a>00606         <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#2f3481a044a90f98816af2167e1fce83">layoutDiagrams</a>();
<a name="l00607"></a>00607         emit <a class="code" href="class_k_d_chart_1_1_abstract_coordinate_plane.html#683824b7d35b89c35422a5bc1cf71c59">propertiesChanged</a>();
<a name="l00608"></a>00608     }
<a name="l00609"></a>00609 }
<a name="l00610"></a>00610 
<a name="l00611"></a><a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#951b82a4d554cfd9b77f85e0942e0729">00611</a> <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#951b82a4d554cfd9b77f85e0942e0729">CartesianCoordinatePlane::setVerticalRange</a>( <span class="keyword">const</span> QPair&lt; qreal, qreal &gt; &amp; range )
<a name="l00612"></a>00612 {
<a name="l00613"></a>00613 
<a name="l00614"></a>00614     <span class="keywordflow">if</span> ( <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;verticalMin != range.first || <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;verticalMax != range.second ) {
<a name="l00615"></a>00615         <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;autoAdjustVerticalRangeToData = 100;
<a name="l00616"></a>00616         <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;verticalMin = range.first;
<a name="l00617"></a>00617         <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;verticalMax = range.second;
<a name="l00618"></a>00618         <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#2f3481a044a90f98816af2167e1fce83">layoutDiagrams</a>();
<a name="l00619"></a>00619         emit <a class="code" href="class_k_d_chart_1_1_abstract_coordinate_plane.html#683824b7d35b89c35422a5bc1cf71c59">propertiesChanged</a>();
<a name="l00620"></a>00620     }
<a name="l00621"></a>00621 }
<a name="l00622"></a>00622 
<a name="l00623"></a><a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#27ebc779f94c6149bf95f37f82d2a320">00623</a> QPair&lt; qreal, qreal &gt; <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#27ebc779f94c6149bf95f37f82d2a320">CartesianCoordinatePlane::horizontalRange</a>( )<span class="keyword"> const</span>
<a name="l00624"></a>00624 <span class="keyword"></span>{
<a name="l00625"></a>00625     <span class="keywordflow">return</span> QPair&lt;qreal, qreal&gt;( <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;horizontalMin, <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;horizontalMax );
<a name="l00626"></a>00626 }
<a name="l00627"></a>00627 
<a name="l00628"></a><a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#99b3d695904ea4b78abbd86088b3a45b">00628</a> QPair&lt; qreal, qreal &gt; <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#99b3d695904ea4b78abbd86088b3a45b">CartesianCoordinatePlane::verticalRange</a>( )<span class="keyword"> const</span>
<a name="l00629"></a>00629 <span class="keyword"></span>{
<a name="l00630"></a>00630     <span class="keywordflow">return</span> QPair&lt;qreal, qreal&gt;( <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;verticalMin, <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;verticalMax );
<a name="l00631"></a>00631 }
<a name="l00632"></a>00632 
<a name="l00633"></a><a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#468d99ab4e882d0dab636e69a1ec91f1">00633</a> <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#468d99ab4e882d0dab636e69a1ec91f1">CartesianCoordinatePlane::adjustRangesToData</a>()
<a name="l00634"></a>00634 {
<a name="l00635"></a>00635     <span class="keyword">const</span> QRectF dataBoundingRect( <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#7fed7cd342eb40dd4be670313d68d8ab">getRawDataBoundingRectFromDiagrams</a>() );
<a name="l00636"></a>00636     <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;horizontalMin = dataBoundingRect.left();
<a name="l00637"></a>00637     <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;horizontalMax = dataBoundingRect.right();
<a name="l00638"></a>00638     <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;verticalMin = dataBoundingRect.top();
<a name="l00639"></a>00639     <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;verticalMax = dataBoundingRect.bottom();
<a name="l00640"></a>00640     <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#2f3481a044a90f98816af2167e1fce83">layoutDiagrams</a>();
<a name="l00641"></a>00641     emit <a class="code" href="class_k_d_chart_1_1_abstract_coordinate_plane.html#683824b7d35b89c35422a5bc1cf71c59">propertiesChanged</a>();
<a name="l00642"></a>00642 }
<a name="l00643"></a>00643 
<a name="l00644"></a><a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#c187df2a07d73fb49e7523a86e96cbad">00644</a> <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#c187df2a07d73fb49e7523a86e96cbad">CartesianCoordinatePlane::adjustHorizontalRangeToData</a>()
<a name="l00645"></a>00645 {
<a name="l00646"></a>00646     <span class="keyword">const</span> QRectF dataBoundingRect( <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#7fed7cd342eb40dd4be670313d68d8ab">getRawDataBoundingRectFromDiagrams</a>() );
<a name="l00647"></a>00647     <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;horizontalMin = dataBoundingRect.left();
<a name="l00648"></a>00648     <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;horizontalMax = dataBoundingRect.right();
<a name="l00649"></a>00649     <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#2f3481a044a90f98816af2167e1fce83">layoutDiagrams</a>();
<a name="l00650"></a>00650     emit <a class="code" href="class_k_d_chart_1_1_abstract_coordinate_plane.html#683824b7d35b89c35422a5bc1cf71c59">propertiesChanged</a>();
<a name="l00651"></a>00651 }
<a name="l00652"></a>00652 
<a name="l00653"></a><a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#3e1137d880b72dd34dd4a627c3f779c8">00653</a> <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#3e1137d880b72dd34dd4a627c3f779c8">CartesianCoordinatePlane::adjustVerticalRangeToData</a>()
<a name="l00654"></a>00654 {
<a name="l00655"></a>00655     <span class="keyword">const</span> QRectF dataBoundingRect( <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#7fed7cd342eb40dd4be670313d68d8ab">getRawDataBoundingRectFromDiagrams</a>() );
<a name="l00656"></a>00656     <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;verticalMin = dataBoundingRect.bottom();
<a name="l00657"></a>00657     <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;verticalMax = dataBoundingRect.top();
<a name="l00658"></a>00658     <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#2f3481a044a90f98816af2167e1fce83">layoutDiagrams</a>();
<a name="l00659"></a>00659     emit <a class="code" href="class_k_d_chart_1_1_abstract_coordinate_plane.html#683824b7d35b89c35422a5bc1cf71c59">propertiesChanged</a>();
<a name="l00660"></a>00660 }
<a name="l00661"></a>00661 
<a name="l00662"></a><a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#1f77f43391396aabb09a6e3a6ef74fbe">00662</a> <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#1f77f43391396aabb09a6e3a6ef74fbe">CartesianCoordinatePlane::setAutoAdjustHorizontalRangeToData</a>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> percentEmpty )
<a name="l00663"></a>00663 {
<a name="l00664"></a>00664     <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;autoAdjustHorizontalRangeToData = percentEmpty;
<a name="l00665"></a>00665     <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;horizontalMin = 0.0;
<a name="l00666"></a>00666     <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;horizontalMax = 0.0;
<a name="l00667"></a>00667     <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#2f3481a044a90f98816af2167e1fce83">layoutDiagrams</a>();
<a name="l00668"></a>00668     emit <a class="code" href="class_k_d_chart_1_1_abstract_coordinate_plane.html#683824b7d35b89c35422a5bc1cf71c59">propertiesChanged</a>();
<a name="l00669"></a>00669 }
<a name="l00670"></a>00670 
<a name="l00671"></a><a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#c29a971e85d49d1299b7c8d207c8c05d">00671</a> <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#c29a971e85d49d1299b7c8d207c8c05d">CartesianCoordinatePlane::setAutoAdjustVerticalRangeToData</a>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> percentEmpty )
<a name="l00672"></a>00672 {
<a name="l00673"></a>00673     <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;autoAdjustVerticalRangeToData = percentEmpty;
<a name="l00674"></a>00674     <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;verticalMin = 0.0;
<a name="l00675"></a>00675     <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;verticalMax = 0.0;
<a name="l00676"></a>00676     <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#2f3481a044a90f98816af2167e1fce83">layoutDiagrams</a>();
<a name="l00677"></a>00677     emit <a class="code" href="class_k_d_chart_1_1_abstract_coordinate_plane.html#683824b7d35b89c35422a5bc1cf71c59">propertiesChanged</a>();
<a name="l00678"></a>00678 }
<a name="l00679"></a>00679 
<a name="l00680"></a><a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#80033a7a6f17ab38246c2ef12881b3ae">00680</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#80033a7a6f17ab38246c2ef12881b3ae">CartesianCoordinatePlane::autoAdjustHorizontalRangeToData</a>()<span class="keyword"> const</span>
<a name="l00681"></a>00681 <span class="keyword"></span>{
<a name="l00682"></a>00682     <span class="keywordflow">return</span> <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;autoAdjustHorizontalRangeToData;
<a name="l00683"></a>00683 }
<a name="l00684"></a>00684 
<a name="l00685"></a><a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#b5e4ece007d66c9f328ca34c3e00700e">00685</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#b5e4ece007d66c9f328ca34c3e00700e">CartesianCoordinatePlane::autoAdjustVerticalRangeToData</a>()<span class="keyword"> const</span>
<a name="l00686"></a>00686 <span class="keyword"></span>{
<a name="l00687"></a>00687     <span class="keywordflow">return</span> <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;autoAdjustVerticalRangeToData;
<a name="l00688"></a>00688 }
<a name="l00689"></a>00689 
<a name="l00690"></a><a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#a199fd9c6920c4124dfb3c488f8cc924">00690</a> <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#a199fd9c6920c4124dfb3c488f8cc924">CartesianCoordinatePlane::setGridAttributes</a>(
<a name="l00691"></a>00691     Qt::Orientation orientation,
<a name="l00692"></a>00692     <span class="keyword">const</span> <a class="code" href="class_k_d_chart_1_1_grid_attributes.html">GridAttributes</a>&amp; a )
<a name="l00693"></a>00693 {
<a name="l00694"></a>00694     <span class="keywordflow">if</span>( orientation == Qt::Horizontal )
<a name="l00695"></a>00695         <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;gridAttributesHorizontal = a;
<a name="l00696"></a>00696     <span class="keywordflow">else</span>
<a name="l00697"></a>00697         <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;gridAttributesVertical = a;
<a name="l00698"></a>00698     setHasOwnGridAttributes( orientation, <span class="keyword">true</span> );
<a name="l00699"></a>00699     <a class="code" href="class_k_d_chart_1_1_abstract_coordinate_plane.html#ae24ee3b978933716870e3c63552db98">update</a>();
<a name="l00700"></a>00700     emit <a class="code" href="class_k_d_chart_1_1_abstract_coordinate_plane.html#683824b7d35b89c35422a5bc1cf71c59">propertiesChanged</a>();
<a name="l00701"></a>00701 }
<a name="l00702"></a>00702 
<a name="l00703"></a><a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#9ef3abe25802dcf986fb9109a8f00e87">00703</a> <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#9ef3abe25802dcf986fb9109a8f00e87">CartesianCoordinatePlane::resetGridAttributes</a>(
<a name="l00704"></a>00704     Qt::Orientation orientation )
<a name="l00705"></a>00705 {
<a name="l00706"></a>00706     setHasOwnGridAttributes( orientation, <span class="keyword">false</span> );
<a name="l00707"></a>00707     <a class="code" href="class_k_d_chart_1_1_abstract_coordinate_plane.html#ae24ee3b978933716870e3c63552db98">update</a>();
<a name="l00708"></a>00708 }
<a name="l00709"></a>00709 
<a name="l00710"></a><a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#cf10c44decb5b84acf98ac08832d6f1e">00710</a> <span class="keyword">const</span> <a class="code" href="class_k_d_chart_1_1_grid_attributes.html">GridAttributes</a> <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#cf10c44decb5b84acf98ac08832d6f1e">CartesianCoordinatePlane::gridAttributes</a>(
<a name="l00711"></a>00711     Qt::Orientation orientation )<span class="keyword"> const</span>
<a name="l00712"></a>00712 <span class="keyword"></span>{
<a name="l00713"></a>00713     <span class="keywordflow">if</span>( <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#f07413f81b65f07df20824605488b4db">hasOwnGridAttributes</a>( orientation ) ){
<a name="l00714"></a>00714         <span class="keywordflow">if</span>( orientation == Qt::Horizontal )
<a name="l00715"></a>00715             <span class="keywordflow">return</span> <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;gridAttributesHorizontal;
<a name="l00716"></a>00716         <span class="keywordflow">else</span>
<a name="l00717"></a>00717             <span class="keywordflow">return</span> <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;gridAttributesVertical;
<a name="l00718"></a>00718     }<span class="keywordflow">else</span>{
<a name="l00719"></a>00719         <span class="keywordflow">return</span> <a class="code" href="class_k_d_chart_1_1_abstract_coordinate_plane.html#42160dc1fc6b8b80de65ab348199efbc">globalGridAttributes</a>();
<a name="l00720"></a>00720     }
<a name="l00721"></a>00721 }
<a name="l00722"></a>00722 
<a name="l00723"></a>00723 <span class="keywordtype">void</span> CartesianCoordinatePlane::setHasOwnGridAttributes(
<a name="l00724"></a>00724     Qt::Orientation orientation, <span class="keywordtype">bool</span> on )
<a name="l00725"></a>00725 {
<a name="l00726"></a>00726     <span class="keywordflow">if</span>( orientation == Qt::Horizontal )
<a name="l00727"></a>00727         <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;hasOwnGridAttributesHorizontal = on;
<a name="l00728"></a>00728     <span class="keywordflow">else</span>
<a name="l00729"></a>00729         <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;hasOwnGridAttributesVertical = on;
<a name="l00730"></a>00730     emit <a class="code" href="class_k_d_chart_1_1_abstract_coordinate_plane.html#683824b7d35b89c35422a5bc1cf71c59">propertiesChanged</a>();
<a name="l00731"></a>00731 }
<a name="l00732"></a>00732 
<a name="l00733"></a><a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#f07413f81b65f07df20824605488b4db">00733</a> <span class="keywordtype">bool</span> <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#f07413f81b65f07df20824605488b4db">CartesianCoordinatePlane::hasOwnGridAttributes</a>(
<a name="l00734"></a>00734     Qt::Orientation orientation )<span class="keyword"> const</span>
<a name="l00735"></a>00735 <span class="keyword"></span>{
<a name="l00736"></a>00736     <span class="keywordflow">return</span>
<a name="l00737"></a>00737         ( orientation == Qt::Horizontal )
<a name="l00738"></a>00738         ? <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;hasOwnGridAttributesHorizontal
<a name="l00739"></a>00739         : <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;hasOwnGridAttributesVertical;
<a name="l00740"></a>00740 }
<a name="l00741"></a>00741 
<a name="l00742"></a><a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#2b650354155cf3b79246b1b3abe186c5">00742</a> <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#2b650354155cf3b79246b1b3abe186c5">CartesianCoordinatePlane::setAutoAdjustGridToZoom</a>( <span class="keywordtype">bool</span> autoAdjust )
<a name="l00743"></a>00743 {
<a name="l00744"></a>00744     <span class="keywordflow">if</span>( <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;autoAdjustGridToZoom != autoAdjust ){
<a name="l00745"></a>00745         <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;autoAdjustGridToZoom = autoAdjust;
<a name="l00746"></a>00746         <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;grid-&gt;setNeedRecalculate();
<a name="l00747"></a>00747         emit <a class="code" href="class_k_d_chart_1_1_abstract_coordinate_plane.html#683824b7d35b89c35422a5bc1cf71c59">propertiesChanged</a>();
<a name="l00748"></a>00748     }
<a name="l00749"></a>00749 }
<a name="l00750"></a>00750 
<a name="l00751"></a><a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#61202fee1a6f282f6aed6be3a948ee9c">00751</a> <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#61202fee1a6f282f6aed6be3a948ee9c">CartesianCoordinatePlane::autoAdjustGridToZoom</a>()<span class="keyword"> const</span>
<a name="l00752"></a>00752 <span class="keyword"></span>{
<a name="l00753"></a>00753     <span class="keywordflow">return</span> <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;autoAdjustGridToZoom;
<a name="l00754"></a>00754 }
<a name="l00755"></a>00755 
<a name="l00756"></a><a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#9acfce5f0ce8411b6f5c46490a349bc8">00756</a> <a class="code" href="class_k_d_chart_1_1_abstract_coordinate_plane.html">AbstractCoordinatePlane</a>* <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#9acfce5f0ce8411b6f5c46490a349bc8">CartesianCoordinatePlane::sharedAxisMasterPlane</a>( QPainter* painter )
<a name="l00757"></a>00757 {
<a name="l00758"></a>00758     <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html">CartesianCoordinatePlane</a>* plane = <span class="keyword">this</span>;
<a name="l00759"></a>00759     <a class="code" href="class_k_d_chart_1_1_abstract_cartesian_diagram.html">AbstractCartesianDiagram</a>* diag = dynamic_cast&lt; AbstractCartesianDiagram* &gt;( plane-&gt;<a class="code" href="class_k_d_chart_1_1_abstract_coordinate_plane.html#d6097b44d17dc4bf8dbfd70d63147e8d">diagram</a>() );
<a name="l00760"></a>00760     <span class="keyword">const</span> <a class="code" href="class_k_d_chart_1_1_cartesian_axis.html">CartesianAxis</a>* sharedAxis = 0;
<a name="l00761"></a>00761     <span class="keywordflow">if</span>( diag != 0 )
<a name="l00762"></a>00762     {
<a name="l00763"></a>00763         <span class="keyword">const</span> <a class="code" href="namespace_k_d_chart.html#fbc9d76508a0317c32a453f363a0ac8b">CartesianAxisList</a> axes = diag-&gt;<a class="code" href="class_k_d_chart_1_1_abstract_cartesian_diagram.html#0b7f58db7c1861a47d39eb6096cf6e1b">axes</a>();
<a name="l00764"></a>00764         KDAB_FOREACH( <span class="keyword">const</span> <a class="code" href="class_k_d_chart_1_1_cartesian_axis.html">CartesianAxis</a>* a, axes )
<a name="l00765"></a>00765         {
<a name="l00766"></a>00766             <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html">CartesianCoordinatePlane</a>* p = const_cast&lt; CartesianCoordinatePlane* &gt;(
<a name="l00767"></a>00767                                               dynamic_cast&lt; const CartesianCoordinatePlane* &gt;( a-&gt;<a class="code" href="class_k_d_chart_1_1_abstract_axis.html#2770ced5b257fcb09e609af263bc07bd">coordinatePlane</a>() ) );
<a name="l00768"></a>00768             <span class="keywordflow">if</span>( p != 0 &amp;&amp; p != <span class="keyword">this</span> )
<a name="l00769"></a>00769             {
<a name="l00770"></a>00770                 plane = p;
<a name="l00771"></a>00771                 sharedAxis = a;
<a name="l00772"></a>00772             }
<a name="l00773"></a>00773         }
<a name="l00774"></a>00774     }
<a name="l00775"></a>00775 
<a name="l00776"></a>00776     <span class="keywordflow">if</span>( plane == <span class="keyword">this</span> || painter == 0 )
<a name="l00777"></a>00777         <span class="keywordflow">return</span> plane;
<a name="l00778"></a>00778 
<a name="l00779"></a>00779     <span class="keyword">const</span> QPointF zero = QPointF( 0, 0 );
<a name="l00780"></a>00780     <span class="keyword">const</span> QPointF tenX = QPointF( 10, 0 );
<a name="l00781"></a>00781     <span class="keyword">const</span> QPointF tenY = QPointF( 0, 10 );
<a name="l00782"></a>00782 
<a name="l00783"></a>00783 
<a name="l00784"></a>00784     <span class="keywordflow">if</span>( sharedAxis-&gt;isOrdinate() )
<a name="l00785"></a>00785     {
<a name="l00786"></a>00786         painter-&gt;translate( <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#78a71423354969c970c5feb2f0c1da92">translate</a>( zero ).x(), 0.0 );
<a name="l00787"></a>00787         <span class="keyword">const</span> qreal factor = (<a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#78a71423354969c970c5feb2f0c1da92">translate</a>( tenX ) - <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#78a71423354969c970c5feb2f0c1da92">translate</a>( zero ) ).x() / ( plane-&gt;<a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#78a71423354969c970c5feb2f0c1da92">translate</a>( tenX ) - plane-&gt;<a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#78a71423354969c970c5feb2f0c1da92">translate</a>( zero ) ).x();
<a name="l00788"></a>00788         painter-&gt;scale( factor, 1.0 );
<a name="l00789"></a>00789         painter-&gt;translate( -plane-&gt;<a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#78a71423354969c970c5feb2f0c1da92">translate</a>( zero ).x(), 0.0 );
<a name="l00790"></a>00790     }
<a name="l00791"></a>00791     <span class="keywordflow">if</span>( sharedAxis-&gt;isAbscissa() )
<a name="l00792"></a>00792     {
<a name="l00793"></a>00793         painter-&gt;translate( 0.0, <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#78a71423354969c970c5feb2f0c1da92">translate</a>( zero ).y() );
<a name="l00794"></a>00794         <span class="keyword">const</span> qreal factor = (<a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#78a71423354969c970c5feb2f0c1da92">translate</a>( tenY ) - <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#78a71423354969c970c5feb2f0c1da92">translate</a>( zero ) ).y() / ( plane-&gt;<a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#78a71423354969c970c5feb2f0c1da92">translate</a>( tenY ) - plane-&gt;<a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#78a71423354969c970c5feb2f0c1da92">translate</a>( zero ) ).y();
<a name="l00795"></a>00795         painter-&gt;scale( 1.0, factor );
<a name="l00796"></a>00796         painter-&gt;translate( 0.0, -plane-&gt;<a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#78a71423354969c970c5feb2f0c1da92">translate</a>( zero ).y() );
<a name="l00797"></a>00797     }
<a name="l00798"></a>00798 
<a name="l00799"></a>00799 
<a name="l00800"></a>00800     <span class="keywordflow">return</span> plane;
<a name="l00801"></a>00801 }
<a name="l00802"></a>00802 
<a name="l00803"></a><a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#8e00b7508e0e3eb258187f7be2df2725">00803</a> <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#8e00b7508e0e3eb258187f7be2df2725">CartesianCoordinatePlane::setHorizontalRangeReversed</a>( <span class="keywordtype">bool</span> reverse )
<a name="l00804"></a>00804 {
<a name="l00805"></a>00805     <span class="keywordflow">if</span>( <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;reverseHorizontalPlane == reverse )
<a name="l00806"></a>00806         <span class="keywordflow">return</span>;
<a name="l00807"></a>00807 
<a name="l00808"></a>00808     <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;reverseHorizontalPlane = reverse;
<a name="l00809"></a>00809     <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#2f3481a044a90f98816af2167e1fce83">layoutDiagrams</a>();
<a name="l00810"></a>00810     emit <a class="code" href="class_k_d_chart_1_1_abstract_coordinate_plane.html#683824b7d35b89c35422a5bc1cf71c59">propertiesChanged</a>();
<a name="l00811"></a>00811 }
<a name="l00812"></a>00812 
<a name="l00813"></a><a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#6d628fb411ebbc6e7866ebcb0bba6952">00813</a> <span class="keywordtype">bool</span> <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#6d628fb411ebbc6e7866ebcb0bba6952">CartesianCoordinatePlane::isHorizontalRangeReversed</a>()<span class="keyword"> const</span>
<a name="l00814"></a>00814 <span class="keyword"></span>{
<a name="l00815"></a>00815     <span class="keywordflow">return</span> <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;reverseHorizontalPlane;
<a name="l00816"></a>00816 }
<a name="l00817"></a>00817 
<a name="l00818"></a><a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#0437b5fd1ffa3766b366603199ba0a3b">00818</a> <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#0437b5fd1ffa3766b366603199ba0a3b">CartesianCoordinatePlane::setVerticalRangeReversed</a>( <span class="keywordtype">bool</span> reverse )
<a name="l00819"></a>00819 {
<a name="l00820"></a>00820     <span class="keywordflow">if</span>( <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;reverseVerticalPlane == reverse )
<a name="l00821"></a>00821         <span class="keywordflow">return</span>;
<a name="l00822"></a>00822 
<a name="l00823"></a>00823     <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;reverseVerticalPlane = reverse;
<a name="l00824"></a>00824     <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#2f3481a044a90f98816af2167e1fce83">layoutDiagrams</a>();
<a name="l00825"></a>00825     emit <a class="code" href="class_k_d_chart_1_1_abstract_coordinate_plane.html#683824b7d35b89c35422a5bc1cf71c59">propertiesChanged</a>();
<a name="l00826"></a>00826 }
<a name="l00827"></a>00827 
<a name="l00828"></a><a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#38e71596b2b1acb412b3f2c066967d3e">00828</a> <span class="keywordtype">bool</span> <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#38e71596b2b1acb412b3f2c066967d3e">CartesianCoordinatePlane::isVerticalRangeReversed</a>()<span class="keyword"> const</span>
<a name="l00829"></a>00829 <span class="keyword"></span>{
<a name="l00830"></a>00830     <span class="keywordflow">return</span> <a class="code" href="_k_d_chart_abstract_area_8cpp.html#7cbfe8b0b7f4d0c69a28e0b9ffce7335">d</a>-&gt;reverseVerticalPlane;
<a name="l00831"></a>00831 }
<a name="l00832"></a>00832 
<a name="l00833"></a><a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#5b455bad1c87c865c9cf19d3a1481f4c">00833</a> QRectF <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#5b455bad1c87c865c9cf19d3a1481f4c">CartesianCoordinatePlane::visibleDataRange</a>()<span class="keyword"> const</span>
<a name="l00834"></a>00834 <span class="keyword"></span>{
<a name="l00835"></a>00835     QRectF result;
<a name="l00836"></a>00836 
<a name="l00837"></a>00837     <span class="keyword">const</span> QRectF drawArea = <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#57d31012ef9b7a882537b7762003b476">drawingArea</a>();
<a name="l00838"></a>00838 
<a name="l00839"></a>00839     result.setTopLeft( <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#40b481d335bdefbc11fb56801bc0d0f7">translateBack</a>( drawArea.topLeft() ) );
<a name="l00840"></a>00840     result.setBottomRight( <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#40b481d335bdefbc11fb56801bc0d0f7">translateBack</a>( drawArea.bottomRight() ) );
<a name="l00841"></a>00841 
<a name="l00842"></a>00842     <span class="keywordflow">return</span> result.normalized();
<a name="l00843"></a>00843 }
<a name="l00844"></a>00844 
<a name="l00845"></a><a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#b40648791fb0808cc180f75f400bb4db">00845</a> <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#b40648791fb0808cc180f75f400bb4db">CartesianCoordinatePlane::setGeometry</a>( <span class="keyword">const</span> QRect&amp; rectangle )
<a name="l00846"></a>00846 {
<a name="l00847"></a>00847     <a class="code" href="class_k_d_chart_1_1_abstract_coordinate_plane.html#deadbfe0b3ce004188eb6e5883960185">AbstractCoordinatePlane::setGeometry</a>( rectangle );
<a name="l00848"></a>00848     Q_FOREACH( <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html">AbstractDiagram</a>* <a class="code" href="class_k_d_chart_1_1_abstract_coordinate_plane.html#d6097b44d17dc4bf8dbfd70d63147e8d">diagram</a>, <a class="code" href="class_k_d_chart_1_1_abstract_coordinate_plane.html#27da62e376612d64e5e5631512a4dd59">diagrams</a>() ) {
<a name="l00849"></a>00849         <a class="code" href="class_k_d_chart_1_1_abstract_coordinate_plane.html#d6097b44d17dc4bf8dbfd70d63147e8d">diagram</a>-&gt;<a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#7e0c9cbc2b35229bb917a67434e381fb">resize</a>( <a class="code" href="class_k_d_chart_1_1_cartesian_coordinate_plane.html#57d31012ef9b7a882537b7762003b476">drawingArea</a>().size() );
<a name="l00850"></a>00850     }
<a name="l00851"></a>00851 }
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Mon Sep 17 16:16:50 2007 for KD Chart 2 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1 </small></address>
</body>
</html>

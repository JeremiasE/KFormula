<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>KD Chart 2: KDChartAbstractDiagram.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.6 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>KDChartAbstractDiagram.cpp</h1><a href="_k_d_chart_abstract_diagram_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">/****************************************************************************</span>
00002 <span class="comment"> ** Copyright (C) 2006 Klar√§vdalens Datakonsult AB.  All rights reserved.</span>
00003 <span class="comment"> **</span>
00004 <span class="comment"> ** This file is part of the KD Chart library.</span>
00005 <span class="comment"> **</span>
00006 <span class="comment"> ** This file may be distributed and/or modified under the terms of the</span>
00007 <span class="comment"> ** GNU General Public License version 2 as published by the Free Software</span>
00008 <span class="comment"> ** Foundation and appearing in the file LICENSE.GPL included in the</span>
00009 <span class="comment"> ** packaging of this file.</span>
00010 <span class="comment"> **</span>
00011 <span class="comment"> ** Licensees holding valid commercial KD Chart licenses may use this file in</span>
00012 <span class="comment"> ** accordance with the KD Chart Commercial License Agreement provided with</span>
00013 <span class="comment"> ** the Software.</span>
00014 <span class="comment"> **</span>
00015 <span class="comment"> ** This file is provided AS IS with NO WARRANTY OF ANY KIND, INCLUDING THE</span>
00016 <span class="comment"> ** WARRANTY OF DESIGN, MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.</span>
00017 <span class="comment"> **</span>
00018 <span class="comment"> ** See http://www.kdab.net/kdchart for</span>
00019 <span class="comment"> **   information about KDChart Commercial License Agreements.</span>
00020 <span class="comment"> **</span>
00021 <span class="comment"> ** Contact info@kdab.net if any conditions of this</span>
00022 <span class="comment"> ** licensing are not clear to you.</span>
00023 <span class="comment"> **</span>
00024 <span class="comment"> **********************************************************************/</span>
00025 
00026 <span class="preprocessor">#include &lt;QPainter&gt;</span>
00027 <span class="preprocessor">#include &lt;QDebug&gt;</span>
00028 <span class="preprocessor">#include &lt;QApplication&gt;</span>
00029 <span class="preprocessor">#include &lt;QAbstractProxyModel&gt;</span>
00030 <span class="preprocessor">#include &lt;QStandardItemModel&gt;</span>
00031 <span class="preprocessor">#include &lt;QSizeF&gt;</span>
00032 
00033 <span class="preprocessor">#include "<a class="code" href="_k_d_chart_abstract_coordinate_plane_8h.html">KDChartAbstractCoordinatePlane.h</a>"</span>
00034 <span class="preprocessor">#include "<a class="code" href="_k_d_chart_chart_8h.html">KDChartChart.h</a>"</span>
00035 <span class="preprocessor">#include "<a class="code" href="_k_d_chart_data_value_attributes_8h.html">KDChartDataValueAttributes.h</a>"</span>
00036 <span class="preprocessor">#include "<a class="code" href="_k_d_chart_text_attributes_8h.html">KDChartTextAttributes.h</a>"</span>
00037 <span class="preprocessor">#include "<a class="code" href="_k_d_chart_marker_attributes_8h.html">KDChartMarkerAttributes.h</a>"</span>
00038 <span class="preprocessor">#include "<a class="code" href="_k_d_chart_abstract_diagram_8h.html">KDChartAbstractDiagram.h</a>"</span>
00039 <span class="preprocessor">#include "KDChartAbstractDiagram_p.h"</span>
00040 <span class="preprocessor">#include "<a class="code" href="_k_d_chart_attributes_model_8h.html">KDChartAttributesModel.h</a>"</span>
00041 <span class="preprocessor">#include "<a class="code" href="_k_d_chart_abstract_three_d_attributes_8h.html">KDChartAbstractThreeDAttributes.h</a>"</span>
00042 <span class="preprocessor">#include "<a class="code" href="_k_d_chart_three_d_line_attributes_8h.html">KDChartThreeDLineAttributes.h</a>"</span>
00043 
00044 <span class="preprocessor">#include &lt;KDABLibFakes&gt;</span>
00045 
00046 
00047 <span class="keyword">using</span> <span class="keyword">namespace </span>KDChart;
00048 
00049 <span class="keyword">namespace </span>KDChart {
00050   <span class="keyword">class </span>PrivateAttributesModel : <span class="keyword">public</span> <a class="code" href="class_k_d_chart_1_1_attributes_model.html">AttributesModel</a> {
00051     Q_OBJECT
00052   <span class="keyword">public</span>:
00053         <span class="keyword">explicit</span> PrivateAttributesModel( QAbstractItemModel* model, <a class="code" href="class_q_object.html">QObject</a> * parent = 0 )
00054           : <a class="code" href="class_k_d_chart_1_1_attributes_model.html">AttributesModel</a>(model,parent) {}
00055   };
00056 }
00057 
00058 AbstractDiagram::Private::Private()
00059   : plane( 0 )
00060   , attributesModel( new PrivateAttributesModel(0,0) )
00061   , allowOverlappingDataValueTexts( false )
00062   , antiAliasing( true )
00063   , percent( false )
00064   , datasetDimension( 1 )
00065   , databoundariesDirty(true)
00066   , lastRoundedValue()
00067   , lastX( 0 )
00068   , mCachedFontMetrics( QFontMetrics( qApp-&gt;font() ) )
00069 {
00070 }
00071 
00072 AbstractDiagram::Private::~Private()
00073 {
00074   <span class="keywordflow">if</span>( attributesModel &amp;&amp; qobject_cast&lt;PrivateAttributesModel*&gt;(attributesModel) )
00075     <span class="keyword">delete</span> attributesModel;
00076 }
00077 
00078 <span class="keywordtype">void</span> AbstractDiagram::Private::init()
00079 {
00080 }
00081 
00082 <span class="keywordtype">void</span> AbstractDiagram::Private::init( <a class="code" href="class_k_d_chart_1_1_abstract_coordinate_plane.html">AbstractCoordinatePlane</a>* newPlane )
00083 {
00084     plane = newPlane;
00085 }
00086 
00087 <span class="keywordtype">bool</span> <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama83">AbstractDiagram::Private::usesExternalAttributesModel</a>()<span class="keyword">const</span>
00088 {
00089     <span class="keywordflow">return</span> ( ! attributesModel.isNull() ) &amp;&amp;
00090            ( ! qobject_cast&lt;PrivateAttributesModel*&gt;(attributesModel) );
00091 }
00092 
00093 <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama49">AbstractDiagram::Private::setAttributesModel</a>( <a class="code" href="class_k_d_chart_1_1_attributes_model.html">AttributesModel</a>* amodel )
00094 {
00095     <span class="keywordflow">if</span>( !attributesModel.isNull() &amp;&amp;
00096         qobject_cast&lt;PrivateAttributesModel*&gt;(attributesModel) ) {
00097         <span class="keyword">delete</span> attributesModel;
00098     }
00099     attributesModel = amodel;
00100 }
00101 
00102 AbstractDiagram::Private::Private( <span class="keyword">const</span> AbstractDiagram::Private&amp; rhs ) :
00103     <span class="comment">// Do not copy the plane</span>
00104     plane( 0 ),
00105     attributesModelRootIndex( QModelIndex() ),
00106     attributesModel( rhs.attributesModel ),
00107     allowOverlappingDataValueTexts( rhs.allowOverlappingDataValueTexts ),
00108     antiAliasing( rhs.antiAliasing ),
00109     percent( rhs.percent ),
00110     datasetDimension( rhs.datasetDimension ),
00111     mCachedFontMetrics( rhs.cachedFontMetrics() )
00112 {
00113     attributesModel = <span class="keyword">new</span> PrivateAttributesModel( 0, 0);
00114     attributesModel-&gt;initFrom( rhs.attributesModel );
00115 }
00116 
<a name="l00117"></a><a class="code" href="_k_d_chart_abstract_diagram_8cpp.html#a0">00117</a> <span class="preprocessor">#define d d_func()</span>
00118 <span class="preprocessor"></span>
<a name="l00119"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_abstract_diagramb0">00119</a> <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_abstract_diagramb1">AbstractDiagram::AbstractDiagram</a> ( <a class="code" href="class_q_widget.html">QWidget</a>* parent, <a class="code" href="class_k_d_chart_1_1_abstract_coordinate_plane.html">AbstractCoordinatePlane</a>* plane )
00120     : <a class="code" href="class_q_abstract_item_view.html">QAbstractItemView</a> ( parent ), _d( new Private() )
00121 {
00122     _d-&gt;init( plane );
00123 }
00124 
<a name="l00125"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_abstract_diagrama66">00125</a> <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_abstract_diagrama66">AbstractDiagram::~AbstractDiagram</a>()
00126 {
00127     <span class="keyword">delete</span> _d;
00128 }
00129 
00130 <span class="keywordtype">void</span> AbstractDiagram::init()
00131 {
00132 }
00133 
00134 
<a name="l00135"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama8">00135</a> <span class="keywordtype">bool</span> <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama8">AbstractDiagram::compare</a>( <span class="keyword">const</span> <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html">AbstractDiagram</a>* other )<span class="keyword">const</span>
00136 {
00137     <span class="keywordflow">if</span>( other == <span class="keyword">this</span> ) <span class="keywordflow">return</span> <span class="keyword">true</span>;
00138     <span class="keywordflow">if</span>( ! other ){
00139         <span class="comment">//qDebug() &lt;&lt; "AbstractDiagram::compare() cannot compare to Null pointer";</span>
00140         <span class="keywordflow">return</span> <span class="keyword">false</span>;
00141     }
00142     <span class="comment">/*</span>
00143 <span class="comment">    qDebug() &lt;&lt; "\n             AbstractDiagram::compare() QAbstractScrollArea:";</span>
00144 <span class="comment">            // compare QAbstractScrollArea properties</span>
00145 <span class="comment">    qDebug() &lt;&lt;</span>
00146 <span class="comment">            ((horizontalScrollBarPolicy() == other-&gt;horizontalScrollBarPolicy()) &amp;&amp;</span>
00147 <span class="comment">            (verticalScrollBarPolicy()    == other-&gt;verticalScrollBarPolicy()));</span>
00148 <span class="comment">    qDebug() &lt;&lt; "AbstractDiagram::compare() QFrame:";</span>
00149 <span class="comment">            // compare QFrame properties</span>
00150 <span class="comment">    qDebug() &lt;&lt;</span>
00151 <span class="comment">            ((frameShadow() == other-&gt;frameShadow()) &amp;&amp;</span>
00152 <span class="comment">            (frameShape()   == other-&gt;frameShape()) &amp;&amp;</span>
00153 <span class="comment">            (frameWidth()   == other-&gt;frameWidth()) &amp;&amp;</span>
00154 <span class="comment">            (lineWidth()    == other-&gt;lineWidth()) &amp;&amp;</span>
00155 <span class="comment">            (midLineWidth() == other-&gt;midLineWidth()));</span>
00156 <span class="comment">    qDebug() &lt;&lt; "AbstractDiagram::compare() QAbstractItemView:";</span>
00157 <span class="comment">            // compare QAbstractItemView properties</span>
00158 <span class="comment">    qDebug() &lt;&lt;</span>
00159 <span class="comment">            ((alternatingRowColors() == other-&gt;alternatingRowColors()) &amp;&amp;</span>
00160 <span class="comment">            (hasAutoScroll()         == other-&gt;hasAutoScroll()) &amp;&amp;</span>
00161 <span class="comment">#if QT_VERSION &gt; 0x040199</span>
00162 <span class="comment">            (dragDropMode()          == other-&gt;dragDropMode()) &amp;&amp;</span>
00163 <span class="comment">            (dragDropOverwriteMode() == other-&gt;dragDropOverwriteMode()) &amp;&amp;</span>
00164 <span class="comment">            (horizontalScrollMode()  == other-&gt;horizontalScrollMode ()) &amp;&amp;</span>
00165 <span class="comment">            (verticalScrollMode()    == other-&gt;verticalScrollMode()) &amp;&amp;</span>
00166 <span class="comment">#endif</span>
00167 <span class="comment">            (dragEnabled()           == other-&gt;dragEnabled()) &amp;&amp;</span>
00168 <span class="comment">            (editTriggers()          == other-&gt;editTriggers()) &amp;&amp;</span>
00169 <span class="comment">            (iconSize()              == other-&gt;iconSize()) &amp;&amp;</span>
00170 <span class="comment">            (selectionBehavior()     == other-&gt;selectionBehavior()) &amp;&amp;</span>
00171 <span class="comment">            (selectionMode()         == other-&gt;selectionMode()) &amp;&amp;</span>
00172 <span class="comment">            (showDropIndicator()     == other-&gt;showDropIndicator()) &amp;&amp;</span>
00173 <span class="comment">            (tabKeyNavigation()      == other-&gt;tabKeyNavigation()) &amp;&amp;</span>
00174 <span class="comment">            (textElideMode()         == other-&gt;textElideMode()));</span>
00175 <span class="comment">    qDebug() &lt;&lt; "AbstractDiagram::compare() AttributesModel: ";</span>
00176 <span class="comment">            // compare all of the properties stored in the attributes model</span>
00177 <span class="comment">    qDebug() &lt;&lt; attributesModel()-&gt;compare( other-&gt;attributesModel() );</span>
00178 <span class="comment">    qDebug() &lt;&lt; "AbstractDiagram::compare() own:";</span>
00179 <span class="comment">            // compare own properties</span>
00180 <span class="comment">    qDebug() &lt;&lt;</span>
00181 <span class="comment">            ((rootIndex().column()            == other-&gt;rootIndex().column()) &amp;&amp;</span>
00182 <span class="comment">            (rootIndex().row()                == other-&gt;rootIndex().row()) &amp;&amp;</span>
00183 <span class="comment">            (allowOverlappingDataValueTexts() == other-&gt;allowOverlappingDataValueTexts()) &amp;&amp;</span>
00184 <span class="comment">            (antiAliasing()                   == other-&gt;antiAliasing()) &amp;&amp;</span>
00185 <span class="comment">            (percentMode()                    == other-&gt;percentMode()) &amp;&amp;</span>
00186 <span class="comment">            (datasetDimension()               == other-&gt;datasetDimension()));</span>
00187 <span class="comment">    */</span>
00188     <span class="keywordflow">return</span>  <span class="comment">// compare QAbstractScrollArea properties</span>
00189             (horizontalScrollBarPolicy() == other-&gt;horizontalScrollBarPolicy()) &amp;&amp;
00190             (verticalScrollBarPolicy()   == other-&gt;verticalScrollBarPolicy()) &amp;&amp;
00191             <span class="comment">// compare QFrame properties</span>
00192             (frameShadow()  == other-&gt;frameShadow()) &amp;&amp;
00193             (frameShape()   == other-&gt;frameShape()) &amp;&amp;
00194             (frameWidth()   == other-&gt;frameWidth()) &amp;&amp;
00195             (lineWidth()    == other-&gt;lineWidth()) &amp;&amp;
00196             (midLineWidth() == other-&gt;midLineWidth()) &amp;&amp;
00197             <span class="comment">// compare QAbstractItemView properties</span>
00198             (alternatingRowColors()  == other-&gt;alternatingRowColors()) &amp;&amp;
00199             (hasAutoScroll()         == other-&gt;hasAutoScroll()) &amp;&amp;
00200 <span class="preprocessor">#if QT_VERSION &gt; 0x040199</span>
00201 <span class="preprocessor"></span>            (dragDropMode()          == other-&gt;dragDropMode()) &amp;&amp;
00202             (dragDropOverwriteMode() == other-&gt;dragDropOverwriteMode()) &amp;&amp;
00203             (horizontalScrollMode()  == other-&gt;horizontalScrollMode ()) &amp;&amp;
00204             (verticalScrollMode()    == other-&gt;verticalScrollMode()) &amp;&amp;
00205 <span class="preprocessor">#endif</span>
00206 <span class="preprocessor"></span>            (dragEnabled()           == other-&gt;dragEnabled()) &amp;&amp;
00207             (editTriggers()          == other-&gt;editTriggers()) &amp;&amp;
00208             (iconSize()              == other-&gt;iconSize()) &amp;&amp;
00209             (selectionBehavior()     == other-&gt;selectionBehavior()) &amp;&amp;
00210             (selectionMode()         == other-&gt;selectionMode()) &amp;&amp;
00211             (showDropIndicator()     == other-&gt;showDropIndicator()) &amp;&amp;
00212             (tabKeyNavigation()      == other-&gt;tabKeyNavigation()) &amp;&amp;
00213             (textElideMode()         == other-&gt;textElideMode()) &amp;&amp;
00214             <span class="comment">// compare all of the properties stored in the attributes model</span>
00215             attributesModel()-&gt;compare( other-&gt;attributesModel() ) &amp;&amp;
00216             <span class="comment">// compare own properties</span>
00217             (rootIndex().column()             == other-&gt;rootIndex().column()) &amp;&amp;
00218             (rootIndex().row()                == other-&gt;rootIndex().row()) &amp;&amp;
00219             (allowOverlappingDataValueTexts() == other-&gt;allowOverlappingDataValueTexts()) &amp;&amp;
00220             (antiAliasing()                   == other-&gt;antiAliasing()) &amp;&amp;
00221             (percentMode()                    == other-&gt;percentMode()) &amp;&amp;
00222             (datasetDimension()               == other-&gt;datasetDimension());
00223 }
00224 
00225 
<a name="l00226"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama9">00226</a> <a class="code" href="class_k_d_chart_1_1_abstract_coordinate_plane.html">AbstractCoordinatePlane</a>* <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama9">AbstractDiagram::coordinatePlane</a>()<span class="keyword"> const</span>
00227 <span class="keyword"></span>{
00228     <span class="keywordflow">return</span> <a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;plane;
00229 }
00230 
<a name="l00231"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama10">00231</a> <span class="keyword">const</span> QPair&lt;QPointF, QPointF&gt; <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama10">AbstractDiagram::dataBoundaries</a> ()<span class="keyword"> const</span>
00232 <span class="keyword"></span>{
00233     <span class="keywordflow">if</span>( <a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;databoundariesDirty ){
00234         <a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;databoundaries = <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_abstract_polar_diagramb1">calculateDataBoundaries</a> ();
00235         <a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;databoundariesDirty = <span class="keyword">false</span>;
00236     }
00237     <span class="keywordflow">return</span> <a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;databoundaries;
00238 }
00239 
<a name="l00240"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagramb13">00240</a> <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagramb13">AbstractDiagram::setDataBoundariesDirty</a>()<span class="keyword"> const</span>
00241 <span class="keyword"></span>{
00242     <a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;databoundariesDirty = <span class="keyword">true</span>;
00243 }
00244 
<a name="l00245"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama62">00245</a> <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama62">AbstractDiagram::setModel</a> ( QAbstractItemModel * newModel )
00246 {
00247   QAbstractItemView::setModel( newModel );
00248   <a class="code" href="class_k_d_chart_1_1_attributes_model.html">AttributesModel</a>* amodel = <span class="keyword">new</span> PrivateAttributesModel( newModel, <span class="keyword">this</span> );
00249   amodel-&gt;<a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela8">initFrom</a>( <a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;attributesModel );
00250   <a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;setAttributesModel(amodel);
00251   scheduleDelayedItemsLayout();
00252   <a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;databoundariesDirty = <span class="keyword">true</span>;
00253   emit <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagramb5">modelsChanged</a>();
00254 }
00255 
<a name="l00261"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama49">00261</a> <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama49">AbstractDiagram::setAttributesModel</a>( <a class="code" href="class_k_d_chart_1_1_attributes_model.html">AttributesModel</a>* amodel )
00262 {
00263     <span class="keywordflow">if</span>( amodel-&gt;sourceModel() != model() ) {
00264         qWarning(<span class="stringliteral">"KDChart::AbstractDiagram::setAttributesModel() failed: "</span>
00265                  <span class="stringliteral">"Trying to set an attributesmodel which works on a different "</span>
00266                  <span class="stringliteral">"model than the diagram."</span>);
00267         <span class="keywordflow">return</span>;
00268     }
00269     <span class="keywordflow">if</span>( qobject_cast&lt;PrivateAttributesModel*&gt;(amodel) ) {
00270         qWarning(<span class="stringliteral">"KDChart::AbstractDiagram::setAttributesModel() failed: "</span>
00271                  <span class="stringliteral">"Trying to set an attributesmodel that is private to another diagram."</span>);
00272         <span class="keywordflow">return</span>;
00273     }
00274     <a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;setAttributesModel(amodel);
00275     scheduleDelayedItemsLayout();
00276     <a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;databoundariesDirty = <span class="keyword">true</span>;
00277     emit <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagramb5">modelsChanged</a>();
00278 }
00279 
<a name="l00280"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama83">00280</a> <span class="keywordtype">bool</span> <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama83">AbstractDiagram::usesExternalAttributesModel</a>()<span class="keyword">const</span>
00281 {
00282     <span class="keywordflow">return</span> <a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;usesExternalAttributesModel();
00283 }
00284 
<a name="l00286"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama2">00286</a> <a class="code" href="class_k_d_chart_1_1_attributes_model.html">AttributesModel</a>* <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama2">AbstractDiagram::attributesModel</a>()<span class="keyword"> const</span>
00287 <span class="keyword"></span>{
00288     <span class="keywordflow">return</span> <a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;attributesModel;
00289 }
00290 
00292 <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama70">AbstractDiagram::setRootIndex</a> ( <span class="keyword">const</span> QModelIndex&amp; idx )
00293 {
<a name="l00294"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama70">00294</a>     QAbstractItemView::setRootIndex(idx);
00295     <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagramb12">setAttributesModelRootIndex</a>( <a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;attributesModel-&gt;mapFromSource(idx) );
00296 }
00297 
00299 <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagramb12">AbstractDiagram::setAttributesModelRootIndex</a>( <span class="keyword">const</span> QModelIndex&amp; idx )
00300 {
<a name="l00301"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagramb12">00301</a>   <a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;attributesModelRootIndex=idx;
00302   <a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;databoundariesDirty = <span class="keyword">true</span>;
00303   scheduleDelayedItemsLayout();
00304 }
00305 
00308 QModelIndex <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagramb0">AbstractDiagram::attributesModelRootIndex</a>()<span class="keyword"> const</span>
00309 <span class="keyword"></span>{
<a name="l00310"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagramb0">00310</a>     <span class="keywordflow">if</span> ( !<a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;attributesModelRootIndex.isValid() )
00311         <a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;attributesModelRootIndex = <a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;attributesModel-&gt;mapFromSource( rootIndex() );
00312   <span class="keywordflow">return</span> <a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;attributesModelRootIndex;
00313 }
00314 
00315 QModelIndex <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagramb3">AbstractDiagram::columnToIndex</a>( <span class="keywordtype">int</span> column )<span class="keyword"> const</span>
00316 <span class="keyword"></span>{
<a name="l00317"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagramb3">00317</a>     <span class="keywordflow">if</span>( model() )
00318         <span class="keywordflow">return</span> QModelIndex( model()-&gt;index( 0, column, rootIndex() ) );
00319     <span class="keywordflow">return</span> QModelIndex();
00320 }
00321 
00322 <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama53">AbstractDiagram::setCoordinatePlane</a>( <a class="code" href="class_k_d_chart_1_1_abstract_coordinate_plane.html">AbstractCoordinatePlane</a>* parent )
00323 {
<a name="l00324"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama53">00324</a>     <a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;plane = parent;
00325 }
00326 
00327 <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama20">AbstractDiagram::doItemsLayout</a>()
00328 {
<a name="l00329"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama20">00329</a>     <span class="keywordflow">if</span> ( <a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;plane ) {
00330         <a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;plane-&gt;layoutDiagrams();
00331         <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama80">update</a>();
00332     }
00333     QAbstractItemView::doItemsLayout();
00334 }
00335 
00336 <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama11">AbstractDiagram::dataChanged</a>( <span class="keyword">const</span> QModelIndex &amp;topLeft,
00337                                    <span class="keyword">const</span> QModelIndex &amp;bottomRight )
<a name="l00338"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama11">00338</a> {
00339   <span class="comment">// We are still too dumb to do intelligent updates...</span>
00340   <a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;databoundariesDirty = <span class="keyword">true</span>;
00341   scheduleDelayedItemsLayout();
00342 }
00343 
00344 
00345 <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama61">AbstractDiagram::setHidden</a>( <span class="keyword">const</span> QModelIndex &amp; index, <span class="keywordtype">bool</span> hidden )
00346 {
<a name="l00347"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama61">00347</a>     <a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;attributesModel-&gt;setData(
00348         <a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;attributesModel-&gt;mapFromSource( index ),
00349         qVariantFromValue( hidden ),
00350         <a class="code" href="namespace_k_d_chart.html#a21a18">DataHiddenRole</a> );
00351     emit <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagramb4">dataHidden</a>();
00352 }
00353 
00354 <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama61">AbstractDiagram::setHidden</a>( <span class="keywordtype">int</span> column, <span class="keywordtype">bool</span> hidden )
00355 {
<a name="l00356"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama60">00356</a>     <a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;attributesModel-&gt;setHeaderData(
00357         column, Qt::Vertical,
00358         qVariantFromValue( hidden ),
00359         DataHiddenRole );
00360     emit <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagramb4">dataHidden</a>();
00361 }
00362 
00363 <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama61">AbstractDiagram::setHidden</a>( <span class="keywordtype">bool</span> hidden )
00364 {
<a name="l00365"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama59">00365</a>     <a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;attributesModel-&gt;setModelData(
00366         qVariantFromValue( hidden ),
00367         DataHiddenRole );
00368     emit <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagramb4">dataHidden</a>();
00369 }
00370 
00371 <span class="keywordtype">bool</span> <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama26">AbstractDiagram::isHidden</a>()<span class="keyword"> const</span>
00372 <span class="keyword"></span>{
<a name="l00373"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama26">00373</a>     <span class="keywordflow">return</span> qVariantValue&lt;bool&gt;(
00374         <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama2">attributesModel</a>()-&gt;<a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela12">modelData</a>( DataHiddenRole ) );
00375 }
00376 
00377 <span class="keywordtype">bool</span> <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama26">AbstractDiagram::isHidden</a>( <span class="keywordtype">int</span> column )<span class="keyword"> const</span>
00378 <span class="keyword"></span>{
<a name="l00379"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama25">00379</a>     <span class="keywordflow">return</span> qVariantValue&lt;bool&gt;(
00380         <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama2">attributesModel</a>()-&gt;<a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela5">data</a>(
00381             <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama2">attributesModel</a>()-&gt;mapFromSource(<a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagramb3">columnToIndex</a>( column )),
00382             DataHiddenRole ) );
00383 }
00384 <span class="keywordtype">bool</span> <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama26">AbstractDiagram::isHidden</a>( <span class="keyword">const</span> QModelIndex &amp; index )<span class="keyword"> const</span>
00385 <span class="keyword"></span>{
<a name="l00386"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama24">00386</a>     <span class="keywordflow">return</span> qVariantValue&lt;bool&gt;(
00387         <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama2">attributesModel</a>()-&gt;<a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela5">data</a>(
00388             <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama2">attributesModel</a>()-&gt;mapFromSource(index),
00389             DataHiddenRole ) );
00390 }
00391 
00392 
00393 <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama57">AbstractDiagram::setDataValueAttributes</a>( <span class="keyword">const</span> QModelIndex &amp; index,
00394                                               <span class="keyword">const</span> <a class="code" href="class_k_d_chart_1_1_data_value_attributes.html">DataValueAttributes</a> &amp; a )
<a name="l00395"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama57">00395</a> {
00396     <a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;attributesModel-&gt;setData(
00397         <a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;attributesModel-&gt;mapFromSource( index ),
00398         qVariantFromValue( a ),
00399         <a class="code" href="namespace_k_d_chart.html#a21a10">DataValueLabelAttributesRole</a> );
00400     emit <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagramb10">propertiesChanged</a>();
00401 }
00402 
00403 
00404 <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama57">AbstractDiagram::setDataValueAttributes</a>( <span class="keywordtype">int</span> column, <span class="keyword">const</span> <a class="code" href="class_k_d_chart_1_1_data_value_attributes.html">DataValueAttributes</a> &amp; a )
00405 {
<a name="l00406"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama56">00406</a>     <a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;attributesModel-&gt;setHeaderData(
00407         column, Qt::Vertical,
00408         qVariantFromValue( a ), DataValueLabelAttributesRole );
00409     emit <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagramb10">propertiesChanged</a>();
00410 }
00411 
00412 <a class="code" href="class_k_d_chart_1_1_data_value_attributes.html">DataValueAttributes</a> <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama19">AbstractDiagram::dataValueAttributes</a>()<span class="keyword"> const</span>
00413 <span class="keyword"></span>{
<a name="l00414"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama19">00414</a>     <span class="keywordflow">return</span> qVariantValue&lt;DataValueAttributes&gt;(
00415         <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama2">attributesModel</a>()-&gt;<a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela12">modelData</a>( KDChart::DataValueLabelAttributesRole ) );
00416 }
00417 
00418 <a class="code" href="class_k_d_chart_1_1_data_value_attributes.html">DataValueAttributes</a> <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama19">AbstractDiagram::dataValueAttributes</a>( <span class="keywordtype">int</span> column )<span class="keyword"> const</span>
00419 <span class="keyword"></span>{
<a name="l00420"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama18">00420</a>     <span class="keywordflow">return</span> qVariantValue&lt;DataValueAttributes&gt;(
00421         <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama2">attributesModel</a>()-&gt;<a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela5">data</a>( <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama2">attributesModel</a>()-&gt;mapFromSource(<a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagramb3">columnToIndex</a>( column )),
00422         KDChart::DataValueLabelAttributesRole ) );
00423 }
00424 
00425 <a class="code" href="class_k_d_chart_1_1_data_value_attributes.html">DataValueAttributes</a> <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama19">AbstractDiagram::dataValueAttributes</a>( <span class="keyword">const</span> QModelIndex &amp; index )<span class="keyword"> const</span>
00426 <span class="keyword"></span>{
<a name="l00427"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama17">00427</a>     <span class="keywordflow">return</span> qVariantValue&lt;DataValueAttributes&gt;(
00428         <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama2">attributesModel</a>()-&gt;<a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela5">data</a>( <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama2">attributesModel</a>()-&gt;mapFromSource(index),
00429         KDChart::DataValueLabelAttributesRole ) );
00430 }
00431 
00432 <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama57">AbstractDiagram::setDataValueAttributes</a>( <span class="keyword">const</span> <a class="code" href="class_k_d_chart_1_1_data_value_attributes.html">DataValueAttributes</a> &amp; a )
00433 {
<a name="l00434"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama55">00434</a>     <a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;attributesModel-&gt;setModelData( qVariantFromValue( a ), DataValueLabelAttributesRole );
00435     emit <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagramb10">propertiesChanged</a>();
00436 }
00437 
00438 <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama47">AbstractDiagram::setAllowOverlappingDataValueTexts</a>( <span class="keywordtype">bool</span> allow )
00439 {
<a name="l00440"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama47">00440</a>     <a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;allowOverlappingDataValueTexts = allow;
00441     emit <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagramb10">propertiesChanged</a>();
00442 }
00443 
00444 <span class="keywordtype">bool</span> <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama0">AbstractDiagram::allowOverlappingDataValueTexts</a>()<span class="keyword"> const</span>
00445 <span class="keyword"></span>{
<a name="l00446"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama0">00446</a>     <span class="keywordflow">return</span> <a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;allowOverlappingDataValueTexts;
00447 }
00448 
00449 <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama48">AbstractDiagram::setAntiAliasing</a>( <span class="keywordtype">bool</span> enabled )
00450 {
<a name="l00451"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama48">00451</a>     <a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;antiAliasing = enabled;
00452     emit <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagramb10">propertiesChanged</a>();
00453 }
00454 
00455 <span class="keywordtype">bool</span> <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama1">AbstractDiagram::antiAliasing</a>()<span class="keyword"> const</span>
00456 <span class="keyword"></span>{
<a name="l00457"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama1">00457</a>     <span class="keywordflow">return</span> <a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;antiAliasing;
00458 }
00459 
00460 <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama66">AbstractDiagram::setPercentMode</a> ( <span class="keywordtype">bool</span> percent )
00461 {
<a name="l00462"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama66">00462</a>     <a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;percent = percent;
00463     emit <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagramb10">propertiesChanged</a>();
00464 }
00465 
00466 <span class="keywordtype">bool</span> <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama38">AbstractDiagram::percentMode</a>()<span class="keyword"> const</span>
00467 <span class="keyword"></span>{
<a name="l00468"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama38">00468</a>     <span class="keywordflow">return</span> <a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;percent;
00469 }
00470 
00471 
00472 <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama32">AbstractDiagram::paintDataValueText</a>( QPainter* painter,
00473                                           <span class="keyword">const</span> QModelIndex&amp; index,
<a name="l00474"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama32">00474</a>                                           <span class="keyword">const</span> QPointF&amp; pos,
00475                                           <span class="keywordtype">double</span> value )
00476 {
00477     <span class="comment">// paint one data series</span>
00478     <span class="keyword">const</span> <a class="code" href="class_k_d_chart_1_1_data_value_attributes.html">DataValueAttributes</a> a( <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama19">dataValueAttributes</a>(index) );
00479     <span class="keywordflow">if</span> ( !a.<a class="code" href="class_k_d_chart_1_1_data_value_attributes.html#_k_d_chart_1_1_data_value_attributesa6">isVisible</a>() ) <span class="keywordflow">return</span>;
00480 
00481     <span class="comment">// handle decimal digits</span>
00482     <span class="keywordtype">int</span> decimalDigits = a.<a class="code" href="class_k_d_chart_1_1_data_value_attributes.html#_k_d_chart_1_1_data_value_attributesa4">decimalDigits</a>();
00483     <span class="keywordtype">int</span> decimalPos = QString::number(  value ).indexOf( QLatin1Char( <span class="charliteral">'.'</span> ) );
00484     QString roundedValue;
00485     <span class="keywordflow">if</span> ( a.<a class="code" href="class_k_d_chart_1_1_data_value_attributes.html#_k_d_chart_1_1_data_value_attributesa1">dataLabel</a>().isNull() ) {
00486         <span class="keywordflow">if</span> ( decimalPos &gt; 0 &amp;&amp; value != 0 )
00487             roundedValue =  roundValues ( value, decimalPos, decimalDigits );
00488         <span class="keywordflow">else</span>
00489             roundedValue = QString::number(  value );
00490     } <span class="keywordflow">else</span>
00491         roundedValue = a.<a class="code" href="class_k_d_chart_1_1_data_value_attributes.html#_k_d_chart_1_1_data_value_attributesa1">dataLabel</a>();
00492         <span class="comment">// handle prefix and suffix</span>
00493     <span class="keywordflow">if</span> ( !a.<a class="code" href="class_k_d_chart_1_1_data_value_attributes.html#_k_d_chart_1_1_data_value_attributesa15">prefix</a>().isNull() )
00494         roundedValue.prepend( a.<a class="code" href="class_k_d_chart_1_1_data_value_attributes.html#_k_d_chart_1_1_data_value_attributesa15">prefix</a>() );
00495 
00496     <span class="keywordflow">if</span> ( !a.<a class="code" href="class_k_d_chart_1_1_data_value_attributes.html#_k_d_chart_1_1_data_value_attributesa32">suffix</a>().isNull() )
00497         roundedValue.append( a.<a class="code" href="class_k_d_chart_1_1_data_value_attributes.html#_k_d_chart_1_1_data_value_attributesa32">suffix</a>() );
00498 
00499     <span class="keyword">const</span> <a class="code" href="class_k_d_chart_1_1_text_attributes.html">TextAttributes</a> ta( a.<a class="code" href="class_k_d_chart_1_1_data_value_attributes.html#_k_d_chart_1_1_data_value_attributesa33">textAttributes</a>() );
00500     <span class="comment">// FIXME draw the non-text bits, background, etc</span>
00501     <span class="keywordflow">if</span> ( ta.<a class="code" href="class_k_d_chart_1_1_text_attributes.html#_k_d_chart_1_1_text_attributesa7">isVisible</a>() ) {
00502 
00503         QPointF pt( pos );
00504         <span class="comment">/* for debugging:</span>
00505 <span class="comment">        PainterSaver painterSaver( painter );</span>
00506 <span class="comment">        painter-&gt;setPen( Qt::black );</span>
00507 <span class="comment">        painter-&gt;drawLine( pos - QPointF( 1,1), pos + QPointF( 1,1) );</span>
00508 <span class="comment">        painter-&gt;drawLine( pos - QPointF(-1,1), pos + QPointF(-1,1) );</span>
00509 <span class="comment">        */</span>
00510 
00511         <span class="comment">// adjust the text start point position, if alignment is not Bottom/Left</span>
00512         <span class="keyword">const</span> <a class="code" href="class_k_d_chart_1_1_relative_position.html">RelativePosition</a> relPos( a.<a class="code" href="class_k_d_chart_1_1_data_value_attributes.html#_k_d_chart_1_1_data_value_attributesa12">position</a>( value &gt;= 0.0 ) );
00513         <span class="keyword">const</span> Qt::Alignment alignBottomLeft = Qt::AlignBottom | Qt::AlignLeft;
00514         <span class="keyword">const</span> QFont calculatedFont( ta.<a class="code" href="class_k_d_chart_1_1_text_attributes.html#_k_d_chart_1_1_text_attributesa2">calculatedFont</a>( <a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;plane, KDChartEnums::MeasureOrientationMinimum ) );
00515         <span class="comment">//qDebug() &lt;&lt; "calculatedFont's point size:" &lt;&lt; calculatedFont.pointSizeF();</span>
00516         <span class="keywordflow">if</span>( (relPos.<a class="code" href="class_k_d_chart_1_1_relative_position.html#_k_d_chart_1_1_relative_positiona0">alignment</a>() &amp; alignBottomLeft) != alignBottomLeft ){
00517             <span class="keyword">const</span> QRectF boundRect(
00518                     <a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;cachedFontMetrics( calculatedFont, <span class="keyword">this</span> )-&gt;boundingRect( roundedValue ) );
00519             <span class="keywordflow">if</span>( relPos.<a class="code" href="class_k_d_chart_1_1_relative_position.html#_k_d_chart_1_1_relative_positiona0">alignment</a>() &amp; Qt::AlignRight )
00520                 pt.rx() -= boundRect.width();
00521             <span class="keywordflow">else</span> <span class="keywordflow">if</span>( relPos.<a class="code" href="class_k_d_chart_1_1_relative_position.html#_k_d_chart_1_1_relative_positiona0">alignment</a>() &amp; Qt::AlignHCenter )
00522                 pt.rx() -= 0.5 * boundRect.width();
00523 
00524             <span class="keywordflow">if</span>( relPos.<a class="code" href="class_k_d_chart_1_1_relative_position.html#_k_d_chart_1_1_relative_positiona0">alignment</a>() &amp; Qt::AlignTop )
00525                 pt.ry() += boundRect.height();
00526             <span class="keywordflow">else</span> <span class="keywordflow">if</span>( relPos.<a class="code" href="class_k_d_chart_1_1_relative_position.html#_k_d_chart_1_1_relative_positiona0">alignment</a>() &amp; Qt::AlignVCenter )
00527                 pt.ry() += 0.5 * boundRect.height();
00528         }
00529 
00530         <span class="comment">// FIXME draw the non-text bits, background, etc</span>
00531 
00532         <span class="keywordflow">if</span> ( a.<a class="code" href="class_k_d_chart_1_1_data_value_attributes.html#_k_d_chart_1_1_data_value_attributesa31">showRepetitiveDataLabels</a>() ||
00533              pos.x() &lt;= <a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;lastX ||
00534              <a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;lastRoundedValue != roundedValue ) {
00535             <a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;lastRoundedValue = roundedValue;
00536             <a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;lastX = pos.x();
00537 
00538             PainterSaver painterSaver( painter );
00539             painter-&gt;setPen( ta.<a class="code" href="class_k_d_chart_1_1_text_attributes.html#_k_d_chart_1_1_text_attributesa12">pen</a>() );
00540             painter-&gt;setFont( calculatedFont );
00541             painter-&gt;translate( pt );
00542             painter-&gt;rotate( ta.<a class="code" href="class_k_d_chart_1_1_text_attributes.html#_k_d_chart_1_1_text_attributesa13">rotation</a>() );
00543             painter-&gt;drawText( QPointF(0, 0), roundedValue );
00544         }
00545     }
00546 }
00547 
00548 
00549 QString  AbstractDiagram::roundValues( <span class="keywordtype">double</span> value,
00550                                        <span class="keyword">const</span> <span class="keywordtype">int</span> decimalPos,
00551                                        <span class="keyword">const</span> <span class="keywordtype">int</span> decimalDigits )<span class="keyword"> const </span>{
00552 
00553     QString digits( QString::number( value ).mid( decimalPos+1 ) );
00554     QString num( QString::number( value ) );
00555     num.truncate( decimalPos );
00556     <span class="keywordtype">int</span> count = 0;
00557         <span class="keywordflow">for</span> (  <span class="keywordtype">int</span> i = digits.length(); i &gt;= decimalDigits ; --i ) {
00558             count += 1;
00559             <span class="keywordtype">int</span> lastval = QString( digits.data() [i] ).toInt();
00560             <span class="keywordtype">int</span> val = QString( digits.data() [i-1] ) .toInt();
00561             <span class="keywordflow">if</span> ( lastval &gt;= 5 ) {
00562                 val += 1;
00563                 digits.replace( digits.length() - count,1 , QString::number( val ) );
00564             }
00565         }
00566 
00567     digits.truncate( decimalDigits );
00568     num.append( QLatin1Char( <span class="charliteral">'.'</span> ) + digits );
00569 
00570     <span class="keywordflow">return</span> num;
00571 
00572 }
00573 
00574 <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagramb7">AbstractDiagram::paintDataValueTexts</a>( QPainter* painter )
00575 {
<a name="l00576"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagramb7">00576</a>     <span class="keywordflow">if</span> ( !<a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagramb2">checkInvariants</a>() ) <span class="keywordflow">return</span>;
00577     <span class="keyword">const</span> <span class="keywordtype">int</span> rowCount = model()-&gt;rowCount(rootIndex());
00578     <span class="keyword">const</span> <span class="keywordtype">int</span> columnCount = model()-&gt;columnCount(rootIndex());
00579     <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i=<a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama13">datasetDimension</a>()-1; i&lt;columnCount; i += <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama13">datasetDimension</a>() ) {
00580        <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> j=0; j&lt; rowCount; ++j ) {
00581            <span class="keyword">const</span> QModelIndex index = model()-&gt;index( j, i, rootIndex() );
00582            <span class="keywordtype">double</span> value = model()-&gt;data( index ).toDouble();
00583            <span class="keyword">const</span> QPointF pos = <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama9">coordinatePlane</a>()-&gt;<a class="code" href="class_k_d_chart_1_1_abstract_coordinate_plane.html#_k_d_chart_1_1_abstract_coordinate_planea58">translate</a>( QPointF( j, value ) );
00584            <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama32">paintDataValueText</a>( painter, index, pos, value );
00585        }
00586     }
00587 }
00588 
00589 
00590 <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama34">AbstractDiagram::paintMarker</a>( QPainter* painter,
00591                                    <span class="keyword">const</span> QModelIndex&amp; index,
<a name="l00592"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama33">00592</a>                                    <span class="keyword">const</span> QPointF&amp; pos )
00593 {
00594 
00595     <span class="keywordflow">if</span> ( !<a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagramb2">checkInvariants</a>() ) <span class="keywordflow">return</span>;
00596     <a class="code" href="class_k_d_chart_1_1_data_value_attributes.html">DataValueAttributes</a> a = <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama19">dataValueAttributes</a>(index);
00597     <span class="keywordflow">if</span> ( !a.<a class="code" href="class_k_d_chart_1_1_data_value_attributes.html#_k_d_chart_1_1_data_value_attributesa6">isVisible</a>() ) <span class="keywordflow">return</span>;
00598     <span class="keyword">const</span> <a class="code" href="class_k_d_chart_1_1_marker_attributes.html">MarkerAttributes</a> &amp;ma = a.<a class="code" href="class_k_d_chart_1_1_data_value_attributes.html#_k_d_chart_1_1_data_value_attributesa7">markerAttributes</a>();
00599     <span class="keywordflow">if</span> ( !ma.<a class="code" href="class_k_d_chart_1_1_marker_attributes.html#_k_d_chart_1_1_marker_attributesa0">isVisible</a>() ) <span class="keywordflow">return</span>;
00600 
00601     PainterSaver painterSaver( painter );
00602     QSizeF maSize( ma.<a class="code" href="class_k_d_chart_1_1_marker_attributes.html#_k_d_chart_1_1_marker_attributesa4">markerSize</a>() );
00603     QBrush indexBrush( <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama5">brush</a>( index ) );
00604     QPen indexPen( ma.<a class="code" href="class_k_d_chart_1_1_marker_attributes.html#_k_d_chart_1_1_marker_attributesa10">pen</a>() );
00605     <span class="keywordflow">if</span> ( ma.<a class="code" href="class_k_d_chart_1_1_marker_attributes.html#_k_d_chart_1_1_marker_attributesa3">markerColor</a>().isValid() )
00606         indexBrush.setColor( ma.<a class="code" href="class_k_d_chart_1_1_marker_attributes.html#_k_d_chart_1_1_marker_attributesa3">markerColor</a>() );
00607 
00608     <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama34">paintMarker</a>( painter, ma, indexBrush, indexPen, pos, maSize );
00609 }
00610 
00611 
00612 <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama34">AbstractDiagram::paintMarker</a>( QPainter* painter,
00613                                    <span class="keyword">const</span> <a class="code" href="class_k_d_chart_1_1_marker_attributes.html">MarkerAttributes</a>&amp; markerAttributes,
<a name="l00614"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama34">00614</a>                                    <span class="keyword">const</span> QBrush&amp; brush,
00615                                    <span class="keyword">const</span> QPen&amp; pen,
00616                                    <span class="keyword">const</span> QPointF&amp; pos,
00617                                    <span class="keyword">const</span> QSizeF&amp; maSize )
00618 {
00619 
00620     <span class="keyword">const</span> QPen oldPen( painter-&gt;pen() );
00621     <span class="comment">// Pen is used to paint 4Pixels - 1 Pixel - Ring and FastCross types.</span>
00622     <span class="comment">// make sure to use the brush color - see above in those cases.</span>
00623     <span class="keyword">const</span> <span class="keywordtype">bool</span> isFourPixels = (markerAttributes.<a class="code" href="class_k_d_chart_1_1_marker_attributes.html#_k_d_chart_1_1_marker_attributesa5">markerStyle</a>() == MarkerAttributes::Marker4Pixels);
00624     <span class="keywordflow">if</span>( isFourPixels || (markerAttributes.<a class="code" href="class_k_d_chart_1_1_marker_attributes.html#_k_d_chart_1_1_marker_attributesa5">markerStyle</a>() == MarkerAttributes::Marker1Pixel) ){
00625         <span class="comment">// for high-performance point charts with tiny point markers:</span>
00626         painter-&gt;setPen( QPen( brush.color().light() ) );
00627         <span class="keywordflow">if</span>( isFourPixels ){
00628             <span class="keyword">const</span> qreal x = pos.x();
00629             <span class="keyword">const</span> qreal y = pos.y();
00630             painter-&gt;drawLine( QPointF(x-1.0,y-1.0),
00631                                QPointF(x+1.0,y-1.0) );
00632             painter-&gt;drawLine( QPointF(x-1.0,y),
00633                                QPointF(x+1.0,y) );
00634             painter-&gt;drawLine( QPointF(x-1.0,y+1.0),
00635                                QPointF(x+1.0,y+1.0) );
00636         }
00637         painter-&gt;drawPoint( pos );
00638     }<span class="keywordflow">else</span>{
00639         PainterSaver painterSaver( painter );
00640         <span class="comment">// we only a solid line surrounding the markers</span>
00641         QPen painterPen( pen );
00642         painterPen.setStyle( Qt::SolidLine );
00643         painter-&gt;setPen( painterPen );
00644         painter-&gt;setBrush( brush );
00645         painter-&gt;setRenderHint ( QPainter::Antialiasing );
00646         painter-&gt;translate( pos );
00647         <span class="keywordflow">switch</span> ( markerAttributes.<a class="code" href="class_k_d_chart_1_1_marker_attributes.html#_k_d_chart_1_1_marker_attributesa5">markerStyle</a>() ) {
00648             <span class="keywordflow">case</span> MarkerAttributes::MarkerCircle:
00649                 painter-&gt;drawEllipse( QRectF( 0 - maSize.height()/2, 0 - maSize.width()/2,
00650                             maSize.height(), maSize.width()) );
00651                 <span class="keywordflow">break</span>;
00652             <span class="keywordflow">case</span> MarkerAttributes::MarkerSquare:
00653                 {
00654                     QRectF rect( 0 - maSize.width()/2, 0 - maSize.height()/2,
00655                                 maSize.width(), maSize.height() );
00656                     painter-&gt;drawRect( rect );
00657                     painter-&gt;fillRect( rect, brush.color() );
00658                     <span class="keywordflow">break</span>;
00659                 }
00660             <span class="keywordflow">case</span> MarkerAttributes::MarkerDiamond:
00661                 {
00662                     QVector &lt;QPointF &gt; diamondPoints;
00663                     QPointF top, left, bottom, right;
00664                     top    = QPointF( 0, 0 - maSize.height()/2 );
00665                     left   = QPointF( 0 - maSize.width()/2, 0 );
00666                     bottom = QPointF( 0, maSize.height()/2 );
00667                     right  = QPointF( maSize.width()/2, 0 );
00668                     diamondPoints &lt;&lt; top &lt;&lt; left &lt;&lt; bottom &lt;&lt; right;
00669                     painter-&gt;drawPolygon( diamondPoints );
00670                     <span class="keywordflow">break</span>;
00671                 }
00672             <span class="comment">// both handled on top of the method:</span>
00673             <span class="keywordflow">case</span> MarkerAttributes::Marker1Pixel:
00674             <span class="keywordflow">case</span> MarkerAttributes::Marker4Pixels:
00675                     <span class="keywordflow">break</span>;
00676             <span class="keywordflow">case</span> MarkerAttributes::MarkerRing:
00677                 {
00678                     painter-&gt;setPen( QPen( brush.color() ) );
00679                     painter-&gt;setBrush( Qt::NoBrush );
00680                     painter-&gt;drawEllipse( QRectF( 0 - maSize.height()/2, 0 - maSize.width()/2,
00681                                         maSize.height(), maSize.width()) );
00682                     <span class="keywordflow">break</span>;
00683                 }
00684             <span class="keywordflow">case</span> MarkerAttributes::MarkerCross:
00685                 {
00686                     QRectF rect( maSize.width()*-0.5, maSize.height()*-0.2,
00687                                  maSize.width(), maSize.height()*0.4 );
00688                     painter-&gt;drawRect( rect );
00689                     rect.setTopLeft(QPointF( maSize.width()*-0.2, maSize.height()*-0.5 ));
00690                     rect.setSize(QSizeF( maSize.width()*0.4, maSize.height() ));
00691                     painter-&gt;drawRect( rect );
00692                     <span class="keywordflow">break</span>;
00693                 }
00694             <span class="keywordflow">case</span> MarkerAttributes::MarkerFastCross:
00695                 {
00696                     QPointF left, right, top, bottom;
00697                     left  = QPointF( -maSize.width()/2, 0 );
00698                     right = QPointF( maSize.width()/2, 0 );
00699                     top   = QPointF( 0, -maSize.height()/2 );
00700                     bottom= QPointF( 0, maSize.height()/2 );
00701                     painter-&gt;setPen( QPen( brush.color() ) );
00702                     painter-&gt;drawLine( left, right );
00703                     painter-&gt;drawLine(  top, bottom );
00704                     <span class="keywordflow">break</span>;
00705                 }
00706             <span class="keywordflow">default</span>:
00707                 Q_ASSERT_X ( <span class="keyword">false</span>, <span class="stringliteral">"paintMarkers()"</span>,
00708                             <span class="stringliteral">"Type item does not match a defined Marker Type."</span> );
00709         }
00710     }
00711     painter-&gt;setPen( oldPen );
00712 }
00713 
00714 <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagramb9">AbstractDiagram::paintMarkers</a>( QPainter* painter )
00715 {
<a name="l00716"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagramb9">00716</a>     <span class="keywordflow">if</span> ( !<a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagramb2">checkInvariants</a>() ) <span class="keywordflow">return</span>;
00717     <span class="keyword">const</span> <span class="keywordtype">int</span> rowCount = model()-&gt;rowCount(rootIndex());
00718     <span class="keyword">const</span> <span class="keywordtype">int</span> columnCount = model()-&gt;columnCount(rootIndex());
00719     <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i=<a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama13">datasetDimension</a>()-1; i&lt;columnCount; i += <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama13">datasetDimension</a>() ) {
00720        <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> j=0; j&lt; rowCount; ++j ) {
00721            <span class="keyword">const</span> QModelIndex index = model()-&gt;index( j, i, rootIndex() );
00722            <span class="keywordtype">double</span> value = model()-&gt;data( index ).toDouble();
00723            <span class="keyword">const</span> QPointF pos = <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama9">coordinatePlane</a>()-&gt;<a class="code" href="class_k_d_chart_1_1_abstract_coordinate_plane.html#_k_d_chart_1_1_abstract_coordinate_planea58">translate</a>( QPointF( j, value ) );
00724            <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama34">paintMarker</a>( painter, index, pos );
00725        }
00726     }
00727 }
00728 
00729 
00730 <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama65">AbstractDiagram::setPen</a>( <span class="keyword">const</span> QModelIndex&amp; index, <span class="keyword">const</span> QPen&amp; pen )
00731 {
<a name="l00732"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama65">00732</a>     <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama2">attributesModel</a>()-&gt;<a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela19">setData</a>(
00733         <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama2">attributesModel</a>()-&gt;mapFromSource( index ),
00734         qVariantFromValue( pen ), DatasetPenRole );
00735     emit <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagramb10">propertiesChanged</a>();
00736 }
00737 
00738 <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama65">AbstractDiagram::setPen</a>( <span class="keyword">const</span> QPen&amp; pen )
00739 {
<a name="l00740"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama63">00740</a>     <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama2">attributesModel</a>()-&gt;<a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela21">setModelData</a>(
00741         qVariantFromValue( pen ), DatasetPenRole );
00742     emit <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagramb10">propertiesChanged</a>();
00743 }
00744 
00745 <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama65">AbstractDiagram::setPen</a>( <span class="keywordtype">int</span> column,<span class="keyword">const</span> QPen&amp; pen )
00746 {
<a name="l00747"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama64">00747</a>     <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama2">attributesModel</a>()-&gt;<a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela20">setHeaderData</a>(
00748         column, Qt::Vertical,
00749         qVariantFromValue( pen ),
00750         DatasetPenRole );
00751     emit <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagramb10">propertiesChanged</a>();
00752 }
00753 
00754 QPen <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama37">AbstractDiagram::pen</a>()<span class="keyword"> const</span>
00755 <span class="keyword"></span>{
<a name="l00756"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama37">00756</a>     <span class="keywordflow">return</span> qVariantValue&lt;QPen&gt;(
00757         <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama2">attributesModel</a>()-&gt;<a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela5">data</a>( DatasetPenRole ) );
00758 }
00759 
00760 QPen <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama37">AbstractDiagram::pen</a>( <span class="keywordtype">int</span> dataset )<span class="keyword"> const</span>
00761 <span class="keyword"></span>{
<a name="l00762"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama36">00762</a>     <span class="keywordflow">return</span> qVariantValue&lt;QPen&gt;(
00763         <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama2">attributesModel</a>()-&gt;<a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela5">data</a>(
00764             <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama2">attributesModel</a>()-&gt;mapFromSource( <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagramb3">columnToIndex</a>( dataset ) ),
00765             DatasetPenRole ) );
00766 }
00767 
00768 QPen <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama37">AbstractDiagram::pen</a>( <span class="keyword">const</span> QModelIndex&amp; index )<span class="keyword"> const</span>
00769 <span class="keyword"></span>{
<a name="l00770"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama35">00770</a>     <span class="keywordflow">return</span> qVariantValue&lt;QPen&gt;(
00771         <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama2">attributesModel</a>()-&gt;<a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela5">data</a>(
00772             <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama2">attributesModel</a>()-&gt;mapFromSource( index ),
00773             DatasetPenRole ) );
00774 }
00775 
00776 <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama52">AbstractDiagram::setBrush</a>( <span class="keyword">const</span> QModelIndex&amp; index, <span class="keyword">const</span> QBrush&amp; brush )
00777 {
<a name="l00778"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama52">00778</a>     <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama2">attributesModel</a>()-&gt;<a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela19">setData</a>(
00779         <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama2">attributesModel</a>()-&gt;mapFromSource( index ),
00780         qVariantFromValue( brush ), DatasetBrushRole );
00781     emit <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagramb10">propertiesChanged</a>();
00782 }
00783 
00784 <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama52">AbstractDiagram::setBrush</a>( <span class="keyword">const</span> QBrush&amp; brush )
00785 {
<a name="l00786"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama50">00786</a>     <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama2">attributesModel</a>()-&gt;<a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela21">setModelData</a>(
00787         qVariantFromValue( brush ), DatasetBrushRole );
00788     emit <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagramb10">propertiesChanged</a>();
00789 }
00790 
00791 <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama52">AbstractDiagram::setBrush</a>( <span class="keywordtype">int</span> column, <span class="keyword">const</span> QBrush&amp; brush )
00792 {
<a name="l00793"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama51">00793</a>     <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama2">attributesModel</a>()-&gt;<a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela20">setHeaderData</a>(
00794         column, Qt::Vertical,
00795         qVariantFromValue( brush ),
00796         DatasetBrushRole );
00797     emit <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagramb10">propertiesChanged</a>();
00798 }
00799 
00800 QBrush <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama5">AbstractDiagram::brush</a>()<span class="keyword"> const</span>
00801 <span class="keyword"></span>{
<a name="l00802"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama5">00802</a>     <span class="keywordflow">return</span> qVariantValue&lt;QBrush&gt;(
00803         <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama2">attributesModel</a>()-&gt;<a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela5">data</a>( DatasetBrushRole ) );
00804 }
00805 
00806 QBrush <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama5">AbstractDiagram::brush</a>( <span class="keywordtype">int</span> dataset )<span class="keyword"> const</span>
00807 <span class="keyword"></span>{
<a name="l00808"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama4">00808</a>     <span class="keywordflow">return</span> qVariantValue&lt;QBrush&gt;(
00809         <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama2">attributesModel</a>()-&gt;<a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela5">data</a>(
00810             <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama2">attributesModel</a>()-&gt;mapFromSource( <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagramb3">columnToIndex</a>( dataset ) ),
00811             DatasetBrushRole ) );
00812 }
00813 
00814 QBrush <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama5">AbstractDiagram::brush</a>( <span class="keyword">const</span> QModelIndex&amp; index )<span class="keyword"> const</span>
00815 <span class="keyword"></span>{
<a name="l00816"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama3">00816</a>     <span class="keywordflow">return</span> qVariantValue&lt;QBrush&gt;(
00817         <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama2">attributesModel</a>()-&gt;<a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela5">data</a>(
00818             <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama2">attributesModel</a>()-&gt;mapFromSource( index ),
00819             DatasetBrushRole ) );
00820 }
00821 
00822 <span class="comment">// implement QAbstractItemView:</span>
00823 QRect <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama87">AbstractDiagram::visualRect</a>(<span class="keyword">const</span> QModelIndex &amp;)<span class="keyword"> const</span>
00824 <span class="keyword"></span>{
<a name="l00825"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama87">00825</a>     <span class="keywordflow">return</span> QRect();
00826 }
00827 
00828 <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama46">AbstractDiagram::scrollTo</a>(<span class="keyword">const</span> QModelIndex &amp;, ScrollHint )
00829 {}
<a name="l00830"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama46">00830</a> 
00831 QModelIndex <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama23">AbstractDiagram::indexAt</a>(<span class="keyword">const</span> QPoint &amp;)<span class="keyword"> const</span>
00832 <span class="keyword"></span>{ <span class="keywordflow">return</span> QModelIndex(); }
<a name="l00833"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama23">00833</a> 
00834 QModelIndex <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama29">AbstractDiagram::moveCursor</a>(CursorAction, Qt::KeyboardModifiers )
00835 { <span class="keywordflow">return</span> QModelIndex(); }
<a name="l00836"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama29">00836</a> 
00837 <span class="keywordtype">int</span> <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama22">AbstractDiagram::horizontalOffset</a>()<span class="keyword"> const</span>
00838 <span class="keyword"></span>{ <span class="keywordflow">return</span> 0; }
<a name="l00839"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama22">00839</a> 
00840 <span class="keywordtype">int</span> <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama86">AbstractDiagram::verticalOffset</a>()<span class="keyword"> const</span>
00841 <span class="keyword"></span>{ <span class="keywordflow">return</span> 0; }
<a name="l00842"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama86">00842</a> 
00843 <span class="keywordtype">bool</span> <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama27">AbstractDiagram::isIndexHidden</a>(<span class="keyword">const</span> QModelIndex &amp;)<span class="keyword"> const</span>
00844 <span class="keyword"></span>{ <span class="keywordflow">return</span> <span class="keyword">true</span>; }
<a name="l00845"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama27">00845</a> 
00846 <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama71">AbstractDiagram::setSelection</a>(<span class="keyword">const</span> QRect &amp;, QItemSelectionModel::SelectionFlags)
00847 {}
<a name="l00848"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama71">00848</a> 
00849 QRegion <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama88">AbstractDiagram::visualRegionForSelection</a>(<span class="keyword">const</span> QItemSelection &amp;)<span class="keyword"> const</span>
00850 <span class="keyword"></span>{ <span class="keywordflow">return</span> QRegion(); }
<a name="l00851"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama88">00851</a> 
00852 
00853 <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama81">KDChart::AbstractDiagram::useDefaultColors</a>( )
00854 {
<a name="l00855"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama81">00855</a>     <a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;attributesModel-&gt;setPaletteType( AttributesModel::PaletteTypeDefault );
00856 }
00857 
00858 <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama84">KDChart::AbstractDiagram::useSubduedColors</a>( )
00859 {
<a name="l00860"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama84">00860</a>     <a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;attributesModel-&gt;setPaletteType( AttributesModel::PaletteTypeSubdued );
00861 }
00862 
00863 <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama82">KDChart::AbstractDiagram::useRainbowColors</a>( )
00864 {
<a name="l00865"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama82">00865</a>     <a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;attributesModel-&gt;setPaletteType( AttributesModel::PaletteTypeRainbow );
00866 }
00867 
00868 QStringList <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama28">AbstractDiagram::itemRowLabels</a>()<span class="keyword"> const</span>
00869 <span class="keyword"></span>{
<a name="l00870"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama28">00870</a>     QStringList ret;
00871     <span class="comment">//qDebug() &lt;&lt; "AbstractDiagram::itemRowLabels(): " &lt;&lt; attributesModel()-&gt;rowCount(attributesModelRootIndex()) &lt;&lt; "entries";</span>
00872     <span class="keyword">const</span> <span class="keywordtype">int</span> rowCount = <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama2">attributesModel</a>()-&gt;<a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela18">rowCount</a>(<a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagramb0">attributesModelRootIndex</a>());
00873     <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; rowCount; ++i ){
00874         <span class="comment">//qDebug() &lt;&lt; "item row label: " &lt;&lt; attributesModel()-&gt;headerData( i, Qt::Vertical, Qt::DisplayRole ).toString();</span>
00875         ret &lt;&lt; <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama2">attributesModel</a>()-&gt;<a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela6">headerData</a>( i, Qt::Vertical, Qt::DisplayRole ).toString();
00876     }
00877     <span class="keywordflow">return</span> ret;
00878 }
00879 
00880 QStringList <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama14">AbstractDiagram::datasetLabels</a>()<span class="keyword"> const</span>
00881 <span class="keyword"></span>{
<a name="l00882"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama14">00882</a>     QStringList ret;
00883     <span class="comment">//qDebug() &lt;&lt; "AbstractDiagram::datasetLabels(): " &lt;&lt; attributesModel()-&gt;columnCount(attributesModelRootIndex()) &lt;&lt; "entries";</span>
00884     <span class="keyword">const</span> <span class="keywordtype">int</span> columnCount = <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama2">attributesModel</a>()-&gt;<a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela0">columnCount</a>(<a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagramb0">attributesModelRootIndex</a>());
00885     <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama13">datasetDimension</a>()-1; i &lt; columnCount; i += <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama13">datasetDimension</a>() ){
00886         <span class="comment">//qDebug() &lt;&lt; "dataset label: " &lt;&lt; attributesModel()-&gt;headerData( i, Qt::Horizontal, Qt::DisplayRole ).toString();</span>
00887         ret &lt;&lt; <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama2">attributesModel</a>()-&gt;<a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela6">headerData</a>( i, Qt::Horizontal, Qt::DisplayRole ).toString();
00888     }
00889     <span class="keywordflow">return</span> ret;
00890 }
00891 
00892 QList&lt;QBrush&gt; <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama12">AbstractDiagram::datasetBrushes</a>()<span class="keyword"> const</span>
00893 <span class="keyword"></span>{
<a name="l00894"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama12">00894</a>     QList&lt;QBrush&gt; ret;
00895     <span class="keyword">const</span> <span class="keywordtype">int</span> columnCount = <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama2">attributesModel</a>()-&gt;<a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela0">columnCount</a>(<a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagramb0">attributesModelRootIndex</a>());
00896     <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama13">datasetDimension</a>()-1; i &lt; columnCount; i += <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama13">datasetDimension</a>() ) {
00897         QBrush brush = qVariantValue&lt;QBrush&gt;( <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama2">attributesModel</a>()-&gt;<a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela6">headerData</a>( i, Qt::Vertical, DatasetBrushRole ) );
00898         ret &lt;&lt; brush;
00899     }
00900 
00901     <span class="keywordflow">return</span> ret;
00902 }
00903 
00904 QList&lt;QPen&gt; <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama16">AbstractDiagram::datasetPens</a>()<span class="keyword"> const</span>
00905 <span class="keyword"></span>{
<a name="l00906"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama16">00906</a>     QList&lt;QPen&gt; ret;
00907     <span class="keyword">const</span> <span class="keywordtype">int</span> columnCount = <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama2">attributesModel</a>()-&gt;<a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela0">columnCount</a>(<a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagramb0">attributesModelRootIndex</a>());
00908     <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama13">datasetDimension</a>()-1; i &lt; columnCount; i += <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama13">datasetDimension</a>() ) {
00909         QPen pen = qVariantValue&lt;QPen&gt;( <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama2">attributesModel</a>()-&gt;<a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela6">headerData</a>( i, Qt::Vertical, DatasetPenRole ) );
00910         ret &lt;&lt; pen;
00911     }
00912     <span class="keywordflow">return</span> ret;
00913 }
00914 
00915 QList&lt;MarkerAttributes&gt; <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama15">AbstractDiagram::datasetMarkers</a>()<span class="keyword"> const</span>
00916 <span class="keyword"></span>{
<a name="l00917"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama15">00917</a>     QList&lt;MarkerAttributes&gt; ret;
00918     <span class="keyword">const</span> <span class="keywordtype">int</span> columnCount = <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama2">attributesModel</a>()-&gt;<a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela0">columnCount</a>(<a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagramb0">attributesModelRootIndex</a>());
00919     <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama13">datasetDimension</a>()-1; i &lt; columnCount; i += <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama13">datasetDimension</a>() ) {
00920         <a class="code" href="class_k_d_chart_1_1_data_value_attributes.html">DataValueAttributes</a> a =
00921             qVariantValue&lt;DataValueAttributes&gt;( <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama2">attributesModel</a>()-&gt;<a class="code" href="class_k_d_chart_1_1_attributes_model.html#_k_d_chart_1_1_private_attributes_modela6">headerData</a>( i, Qt::Vertical, DataValueLabelAttributesRole ) );
00922         <span class="keyword">const</span> <a class="code" href="class_k_d_chart_1_1_marker_attributes.html">MarkerAttributes</a> &amp;ma = a.<a class="code" href="class_k_d_chart_1_1_data_value_attributes.html#_k_d_chart_1_1_data_value_attributesa7">markerAttributes</a>();
00923         ret &lt;&lt; ma;
00924     }
00925     <span class="keywordflow">return</span> ret;
00926 }
00927 
00928 <span class="keywordtype">bool</span> <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagramb2">AbstractDiagram::checkInvariants</a>( <span class="keywordtype">bool</span> justReturnTheStatus )<span class="keyword"> const</span>
00929 <span class="keyword"></span>{
<a name="l00930"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagramb2">00930</a>     <span class="keywordflow">if</span>( ! justReturnTheStatus ){
00931         Q_ASSERT_X ( model(), <span class="stringliteral">"AbstractDiagram::checkInvariants()"</span>,
00932                     <span class="stringliteral">"There is no usable model set, for the diagram."</span> );
00933 
00934         Q_ASSERT_X ( <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama9">coordinatePlane</a>(), <span class="stringliteral">"AbstractDiagram::checkInvariants()"</span>,
00935                     <span class="stringliteral">"There is no usable coordinate plane set, for the diagram."</span> );
00936     }
00937     <span class="keywordflow">return</span> model() &amp;&amp; <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama9">coordinatePlane</a>();
00938 }
00939 
00940 <span class="keywordtype">int</span> <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama13">AbstractDiagram::datasetDimension</a>( )<span class="keyword"> const</span>
00941 <span class="keyword"></span>{
<a name="l00942"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama13">00942</a>     <span class="keywordflow">return</span> <a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;datasetDimension;
00943 }
00944 
00945 <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama54">AbstractDiagram::setDatasetDimension</a>( <span class="keywordtype">int</span> dimension )
00946 {
<a name="l00947"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama54">00947</a>     <span class="keywordflow">if</span> ( <a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;datasetDimension == dimension ) <span class="keywordflow">return</span>;
00948     <a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;datasetDimension = dimension;
00949     <a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;databoundariesDirty = <span class="keyword">true</span>;
00950     emit layoutChanged( <span class="keyword">this</span> );
00951 }
00952 
00953 <span class="keywordtype">double</span> <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagramb14">AbstractDiagram::valueForCell</a>( <span class="keywordtype">int</span> row, <span class="keywordtype">int</span> column )<span class="keyword"> const</span>
00954 <span class="keyword"></span>{
<a name="l00955"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagramb14">00955</a>     <span class="keywordflow">return</span> <a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;attributesModel-&gt;data(
00956             <a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;attributesModel-&gt;index( row, column, <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagramb0">attributesModelRootIndex</a>() ) ).toDouble();
00957 }
00958 
00959 <span class="keywordtype">void</span> <a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama80">AbstractDiagram::update</a>()<span class="keyword"> const</span>
00960 <span class="keyword"></span>{
<a name="l00961"></a><a class="code" href="class_k_d_chart_1_1_abstract_diagram.html#_k_d_chart_1_1_ring_diagrama80">00961</a>     <span class="comment">//qDebug("KDChart::AbstractDiagram::update() called");</span>
00962     <span class="keywordflow">if</span>( <a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;plane )
00963         <a class="code" href="_k_d_chart_abstract_area_8cpp.html#a0">d</a>-&gt;plane-&gt;update();
00964 }
00965 
00966 
00967 <span class="preprocessor">#include "KDChartAbstractDiagram.moc"</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Thu May 10 11:06:24 2007 for KD Chart 2 by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > </a>1.3.6 </small></address>
</body>
</html>
